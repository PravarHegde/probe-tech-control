import{c as we,a as Wt}from"./overlayscrollbars-CiKU261J.js";import{r as Tt,m as Ht,B as Gt,a as Vt,P as Ct,R as zt,W as Kt,C as Yt,n as Jt}from"./index-CWrpshtP.js";import{m as Xt,n as Zt,r as $t}from"./vuetify-CGRNWlIO.js";import"./echarts-Ce9dz-GT.js";import"./codemirror-Dbba2-Wz.js";var Lt={exports:{}},Ce={exports:{}},at;function nt(){if(at)return Ce.exports;at=1;var U=typeof Reflect=="object"?Reflect:null,b=U&&typeof U.apply=="function"?U.apply:function(c,k,W){return Function.prototype.apply.call(c,k,W)},E;U&&typeof U.ownKeys=="function"?E=U.ownKeys:Object.getOwnPropertySymbols?E=function(c){return Object.getOwnPropertyNames(c).concat(Object.getOwnPropertySymbols(c))}:E=function(c){return Object.getOwnPropertyNames(c)};function L(y){console&&console.warn&&console.warn(y)}var N=Number.isNaN||function(c){return c!==c};function d(){d.init.call(this)}Ce.exports=d,Ce.exports.once=h,d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var w=10;function s(y){if(typeof y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof y)}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(y){if(typeof y!="number"||y<0||N(y))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+y+".");w=y}}),d.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||N(c))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+c+".");return this._maxListeners=c,this};function g(y){return y._maxListeners===void 0?d.defaultMaxListeners:y._maxListeners}d.prototype.getMaxListeners=function(){return g(this)},d.prototype.emit=function(c){for(var k=[],W=1;W<arguments.length;W++)k.push(arguments[W]);var q=c==="error",H=this._events;if(H!==void 0)q=q&&H.error===void 0;else if(!q)return!1;if(q){var Y;if(k.length>0&&(Y=k[0]),Y instanceof Error)throw Y;var ee=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw ee.context=Y,ee}var se=H[c];if(se===void 0)return!1;if(typeof se=="function")b(se,this,k);else for(var ue=se.length,pe=R(se,ue),W=0;W<ue;++W)b(pe[W],this,k);return!0};function S(y,c,k,W){var q,H,Y;if(s(k),H=y._events,H===void 0?(H=y._events=Object.create(null),y._eventsCount=0):(H.newListener!==void 0&&(y.emit("newListener",c,k.listener?k.listener:k),H=y._events),Y=H[c]),Y===void 0)Y=H[c]=k,++y._eventsCount;else if(typeof Y=="function"?Y=H[c]=W?[k,Y]:[Y,k]:W?Y.unshift(k):Y.push(k),q=g(y),q>0&&Y.length>q&&!Y.warned){Y.warned=!0;var ee=new Error("Possible EventEmitter memory leak detected. "+Y.length+" "+String(c)+" listeners added. Use emitter.setMaxListeners() to increase limit");ee.name="MaxListenersExceededWarning",ee.emitter=y,ee.type=c,ee.count=Y.length,L(ee)}return y}d.prototype.addListener=function(c,k){return S(this,c,k,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(c,k){return S(this,c,k,!0)};function P(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function B(y,c,k){var W={fired:!1,wrapFn:void 0,target:y,type:c,listener:k},q=P.bind(W);return q.listener=k,W.wrapFn=q,q}d.prototype.once=function(c,k){return s(k),this.on(c,B(this,c,k)),this},d.prototype.prependOnceListener=function(c,k){return s(k),this.prependListener(c,B(this,c,k)),this},d.prototype.removeListener=function(c,k){var W,q,H,Y,ee;if(s(k),q=this._events,q===void 0)return this;if(W=q[c],W===void 0)return this;if(W===k||W.listener===k)--this._eventsCount===0?this._events=Object.create(null):(delete q[c],q.removeListener&&this.emit("removeListener",c,W.listener||k));else if(typeof W!="function"){for(H=-1,Y=W.length-1;Y>=0;Y--)if(W[Y]===k||W[Y].listener===k){ee=W[Y].listener,H=Y;break}if(H<0)return this;H===0?W.shift():M(W,H),W.length===1&&(q[c]=W[0]),q.removeListener!==void 0&&this.emit("removeListener",c,ee||k)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(c){var k,W,q;if(W=this._events,W===void 0)return this;if(W.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):W[c]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete W[c]),this;if(arguments.length===0){var H=Object.keys(W),Y;for(q=0;q<H.length;++q)Y=H[q],Y!=="removeListener"&&this.removeAllListeners(Y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(k=W[c],typeof k=="function")this.removeListener(c,k);else if(k!==void 0)for(q=k.length-1;q>=0;q--)this.removeListener(c,k[q]);return this};function A(y,c,k){var W=y._events;if(W===void 0)return[];var q=W[c];return q===void 0?[]:typeof q=="function"?k?[q.listener||q]:[q]:k?D(q):R(q,q.length)}d.prototype.listeners=function(c){return A(this,c,!0)},d.prototype.rawListeners=function(c){return A(this,c,!1)},d.listenerCount=function(y,c){return typeof y.listenerCount=="function"?y.listenerCount(c):C.call(y,c)},d.prototype.listenerCount=C;function C(y){var c=this._events;if(c!==void 0){var k=c[y];if(typeof k=="function")return 1;if(k!==void 0)return k.length}return 0}d.prototype.eventNames=function(){return this._eventsCount>0?E(this._events):[]};function R(y,c){for(var k=new Array(c),W=0;W<c;++W)k[W]=y[W];return k}function M(y,c){for(;c+1<y.length;c++)y[c]=y[c+1];y.pop()}function D(y){for(var c=new Array(y.length),k=0;k<c.length;++k)c[k]=y[k].listener||y[k];return c}function h(y,c){return new Promise(function(k,W){function q(Y){y.removeListener(c,H),W(Y)}function H(){typeof y.removeListener=="function"&&y.removeListener("error",q),k([].slice.call(arguments))}T(y,c,H,{once:!0}),c!=="error"&&_(y,q,{once:!0})})}function _(y,c,k){typeof y.on=="function"&&T(y,"error",c,k)}function T(y,c,k,W){if(typeof y.on=="function")W.once?y.once(c,k):y.on(c,k);else if(typeof y.addEventListener=="function")y.addEventListener(c,function q(H){W.once&&y.removeEventListener(c,q),k(H)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof y)}return Ce.exports}var Le={exports:{}},ot;function ke(){return ot||(ot=1,typeof Object.create=="function"?Le.exports=function(b,E){E&&(b.super_=E,b.prototype=Object.create(E.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}))}:Le.exports=function(b,E){if(E){b.super_=E;var L=function(){};L.prototype=E.prototype,b.prototype=new L,b.prototype.constructor=b}}),Le.exports}var Ne,st;function Bt(){return st||(st=1,Ne=nt().EventEmitter),Ne}var je={},Ae={},ut;function Qt(){if(ut)return Ae;ut=1,Ae.byteLength=s,Ae.toByteArray=S,Ae.fromByteArray=A;for(var U=[],b=[],E=typeof Uint8Array<"u"?Uint8Array:Array,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,d=L.length;N<d;++N)U[N]=L[N],b[L.charCodeAt(N)]=N;b[45]=62,b[95]=63;function w(C){var R=C.length;if(R%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var M=C.indexOf("=");M===-1&&(M=R);var D=M===R?0:4-M%4;return[M,D]}function s(C){var R=w(C),M=R[0],D=R[1];return(M+D)*3/4-D}function g(C,R,M){return(R+M)*3/4-M}function S(C){var R,M=w(C),D=M[0],h=M[1],_=new E(g(C,D,h)),T=0,y=h>0?D-4:D,c;for(c=0;c<y;c+=4)R=b[C.charCodeAt(c)]<<18|b[C.charCodeAt(c+1)]<<12|b[C.charCodeAt(c+2)]<<6|b[C.charCodeAt(c+3)],_[T++]=R>>16&255,_[T++]=R>>8&255,_[T++]=R&255;return h===2&&(R=b[C.charCodeAt(c)]<<2|b[C.charCodeAt(c+1)]>>4,_[T++]=R&255),h===1&&(R=b[C.charCodeAt(c)]<<10|b[C.charCodeAt(c+1)]<<4|b[C.charCodeAt(c+2)]>>2,_[T++]=R>>8&255,_[T++]=R&255),_}function P(C){return U[C>>18&63]+U[C>>12&63]+U[C>>6&63]+U[C&63]}function B(C,R,M){for(var D,h=[],_=R;_<M;_+=3)D=(C[_]<<16&16711680)+(C[_+1]<<8&65280)+(C[_+2]&255),h.push(P(D));return h.join("")}function A(C){for(var R,M=C.length,D=M%3,h=[],_=16383,T=0,y=M-D;T<y;T+=_)h.push(B(C,T,T+_>y?y:T+_));return D===1?(R=C[M-1],h.push(U[R>>2]+U[R<<4&63]+"==")):D===2&&(R=(C[M-2]<<8)+C[M-1],h.push(U[R>>10]+U[R>>4&63]+U[R<<2&63]+"=")),h.join("")}return Ae}var Be={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var ft;function er(){return ft||(ft=1,Be.read=function(U,b,E,L,N){var d,w,s=N*8-L-1,g=(1<<s)-1,S=g>>1,P=-7,B=E?N-1:0,A=E?-1:1,C=U[b+B];for(B+=A,d=C&(1<<-P)-1,C>>=-P,P+=s;P>0;d=d*256+U[b+B],B+=A,P-=8);for(w=d&(1<<-P)-1,d>>=-P,P+=L;P>0;w=w*256+U[b+B],B+=A,P-=8);if(d===0)d=1-S;else{if(d===g)return w?NaN:(C?-1:1)*(1/0);w=w+Math.pow(2,L),d=d-S}return(C?-1:1)*w*Math.pow(2,d-L)},Be.write=function(U,b,E,L,N,d){var w,s,g,S=d*8-N-1,P=(1<<S)-1,B=P>>1,A=N===23?Math.pow(2,-24)-Math.pow(2,-77):0,C=L?0:d-1,R=L?1:-1,M=b<0||b===0&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(s=isNaN(b)?1:0,w=P):(w=Math.floor(Math.log(b)/Math.LN2),b*(g=Math.pow(2,-w))<1&&(w--,g*=2),w+B>=1?b+=A/g:b+=A*Math.pow(2,1-B),b*g>=2&&(w++,g/=2),w+B>=P?(s=0,w=P):w+B>=1?(s=(b*g-1)*Math.pow(2,N),w=w+B):(s=b*Math.pow(2,B-1)*Math.pow(2,N),w=0));N>=8;U[E+C]=s&255,C+=R,s/=256,N-=8);for(w=w<<N|s,S+=N;S>0;U[E+C]=w&255,C+=R,w/=256,S-=8);U[E+C-R]|=M*128}),Be}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var lt;function De(){return lt||(lt=1,function(U){var b=Qt(),E=er(),L=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;U.Buffer=s,U.SlowBuffer=_,U.INSPECT_MAX_BYTES=50;var N=2147483647;U.kMaxLength=N,s.TYPED_ARRAY_SUPPORT=d(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{var n=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(n,e),n.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function w(n){if(n>N)throw new RangeError('The value "'+n+'" is invalid for option "size"');var e=new Uint8Array(n);return Object.setPrototypeOf(e,s.prototype),e}function s(n,e,t){if(typeof n=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return B(n)}return g(n,e,t)}s.poolSize=8192;function g(n,e,t){if(typeof n=="string")return A(n,e);if(ArrayBuffer.isView(n))return R(n);if(n==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n);if(F(n,ArrayBuffer)||n&&F(n.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(F(n,SharedArrayBuffer)||n&&F(n.buffer,SharedArrayBuffer)))return M(n,e,t);if(typeof n=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var r=n.valueOf&&n.valueOf();if(r!=null&&r!==n)return s.from(r,e,t);var i=D(n);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof n[Symbol.toPrimitive]=="function")return s.from(n[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof n)}s.from=function(n,e,t){return g(n,e,t)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function S(n){if(typeof n!="number")throw new TypeError('"size" argument must be of type number');if(n<0)throw new RangeError('The value "'+n+'" is invalid for option "size"')}function P(n,e,t){return S(n),n<=0?w(n):e!==void 0?typeof t=="string"?w(n).fill(e,t):w(n).fill(e):w(n)}s.alloc=function(n,e,t){return P(n,e,t)};function B(n){return S(n),w(n<0?0:h(n)|0)}s.allocUnsafe=function(n){return B(n)},s.allocUnsafeSlow=function(n){return B(n)};function A(n,e){if((typeof e!="string"||e==="")&&(e="utf8"),!s.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var t=T(n,e)|0,r=w(t),i=r.write(n,e);return i!==t&&(r=r.slice(0,i)),r}function C(n){for(var e=n.length<0?0:h(n.length)|0,t=w(e),r=0;r<e;r+=1)t[r]=n[r]&255;return t}function R(n){if(F(n,Uint8Array)){var e=new Uint8Array(n);return M(e.buffer,e.byteOffset,e.byteLength)}return C(n)}function M(n,e,t){if(e<0||n.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(n.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');var r;return e===void 0&&t===void 0?r=new Uint8Array(n):t===void 0?r=new Uint8Array(n,e):r=new Uint8Array(n,e,t),Object.setPrototypeOf(r,s.prototype),r}function D(n){if(s.isBuffer(n)){var e=h(n.length)|0,t=w(e);return t.length===0||n.copy(t,0,0,e),t}if(n.length!==void 0)return typeof n.length!="number"||G(n.length)?w(0):C(n);if(n.type==="Buffer"&&Array.isArray(n.data))return C(n.data)}function h(n){if(n>=N)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+N.toString(16)+" bytes");return n|0}function _(n){return+n!=n&&(n=0),s.alloc(+n)}s.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==s.prototype},s.compare=function(e,t){if(F(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),F(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,i=t.length,o=0,l=Math.min(r,i);o<l;++o)if(e[o]!==t[o]){r=e[o],i=t[o];break}return r<i?-1:i<r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return s.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=s.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var l=e[r];if(F(l,Uint8Array))o+l.length>i.length?s.from(l).copy(i,o):Uint8Array.prototype.set.call(i,l,o);else if(s.isBuffer(l))l.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=l.length}return i};function T(n,e){if(s.isBuffer(n))return n.length;if(ArrayBuffer.isView(n)||F(n,ArrayBuffer))return n.byteLength;if(typeof n!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof n);var t=n.length,r=arguments.length>2&&arguments[2]===!0;if(!r&&t===0)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return I(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return u(n).length;default:if(i)return r?-1:I(n).length;e=(""+e).toLowerCase(),i=!0}}s.byteLength=T;function y(n,e,t){var r=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(n||(n="utf8");;)switch(n){case"hex":return ye(this,e,t);case"utf8":case"utf-8":return pe(this,e,t);case"ascii":return le(this,e,t);case"latin1":case"binary":return de(this,e,t);case"base64":return ue(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ve(this,e,t);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),r=!0}}s.prototype._isBuffer=!0;function c(n,e,t){var r=n[e];n[e]=n[t],n[t]=r}s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)c(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)c(this,t,t+3),c(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)c(this,t,t+7),c(this,t+1,t+6),c(this,t+2,t+5),c(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return e===0?"":arguments.length===0?pe(this,0,e):y.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:s.compare(this,e)===0},s.prototype.inspect=function(){var e="",t=U.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},L&&(s.prototype[L]=s.prototype.inspect),s.prototype.compare=function(e,t,r,i,o){if(F(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),r===void 0&&(r=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||r>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=r)return 0;if(i>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,i>>>=0,o>>>=0,this===e)return 0;for(var l=o-i,p=r-t,x=Math.min(l,p),O=this.slice(i,o),V=e.slice(t,r),j=0;j<x;++j)if(O[j]!==V[j]){l=O[j],p=V[j];break}return l<p?-1:p<l?1:0};function k(n,e,t,r,i){if(n.length===0)return-1;if(typeof t=="string"?(r=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,G(t)&&(t=i?0:n.length-1),t<0&&(t=n.length+t),t>=n.length){if(i)return-1;t=n.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=s.from(e,r)),s.isBuffer(e))return e.length===0?-1:W(n,e,t,r,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(n,e,t):Uint8Array.prototype.lastIndexOf.call(n,e,t):W(n,[e],t,r,i);throw new TypeError("val must be string, number or Buffer")}function W(n,e,t,r,i){var o=1,l=n.length,p=e.length;if(r!==void 0&&(r=String(r).toLowerCase(),r==="ucs2"||r==="ucs-2"||r==="utf16le"||r==="utf-16le")){if(n.length<2||e.length<2)return-1;o=2,l/=2,p/=2,t/=2}function x(Z,oe){return o===1?Z[oe]:Z.readUInt16BE(oe*o)}var O;if(i){var V=-1;for(O=t;O<l;O++)if(x(n,O)===x(e,V===-1?0:O-V)){if(V===-1&&(V=O),O-V+1===p)return V*o}else V!==-1&&(O-=O-V),V=-1}else for(t+p>l&&(t=l-p),O=t;O>=0;O--){for(var j=!0,z=0;z<p;z++)if(x(n,O+z)!==x(e,z)){j=!1;break}if(j)return O}return-1}s.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},s.prototype.indexOf=function(e,t,r){return k(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return k(this,e,t,r,!1)};function q(n,e,t,r){t=Number(t)||0;var i=n.length-t;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;r>o/2&&(r=o/2);for(var l=0;l<r;++l){var p=parseInt(e.substr(l*2,2),16);if(G(p))return l;n[t+l]=p}return l}function H(n,e,t,r){return f(I(e,n.length-t),n,t,r)}function Y(n,e,t,r){return f(K(e),n,t,r)}function ee(n,e,t,r){return f(u(e),n,t,r)}function se(n,e,t,r){return f(J(e,n.length-t),n,t,r)}s.prototype.write=function(e,t,r,i){if(t===void 0)i="utf8",r=this.length,t=0;else if(r===void 0&&typeof t=="string")i=t,r=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(r)?(r=r>>>0,i===void 0&&(i="utf8")):(i=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-t;if((r===void 0||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var l=!1;;)switch(i){case"hex":return q(this,e,t,r);case"utf8":case"utf-8":return H(this,e,t,r);case"ascii":case"latin1":case"binary":return Y(this,e,t,r);case"base64":return ee(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,e,t,r);default:if(l)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),l=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ue(n,e,t){return e===0&&t===n.length?b.fromByteArray(n):b.fromByteArray(n.slice(e,t))}function pe(n,e,t){t=Math.min(n.length,t);for(var r=[],i=e;i<t;){var o=n[i],l=null,p=o>239?4:o>223?3:o>191?2:1;if(i+p<=t){var x,O,V,j;switch(p){case 1:o<128&&(l=o);break;case 2:x=n[i+1],(x&192)===128&&(j=(o&31)<<6|x&63,j>127&&(l=j));break;case 3:x=n[i+1],O=n[i+2],(x&192)===128&&(O&192)===128&&(j=(o&15)<<12|(x&63)<<6|O&63,j>2047&&(j<55296||j>57343)&&(l=j));break;case 4:x=n[i+1],O=n[i+2],V=n[i+3],(x&192)===128&&(O&192)===128&&(V&192)===128&&(j=(o&15)<<18|(x&63)<<12|(O&63)<<6|V&63,j>65535&&j<1114112&&(l=j))}}l===null?(l=65533,p=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|l&1023),r.push(l),i+=p}return ae(r)}var Q=4096;function ae(n){var e=n.length;if(e<=Q)return String.fromCharCode.apply(String,n);for(var t="",r=0;r<e;)t+=String.fromCharCode.apply(String,n.slice(r,r+=Q));return t}function le(n,e,t){var r="";t=Math.min(n.length,t);for(var i=e;i<t;++i)r+=String.fromCharCode(n[i]&127);return r}function de(n,e,t){var r="";t=Math.min(n.length,t);for(var i=e;i<t;++i)r+=String.fromCharCode(n[i]);return r}function ye(n,e,t){var r=n.length;(!e||e<0)&&(e=0),(!t||t<0||t>r)&&(t=r);for(var i="",o=e;o<t;++o)i+=a[n[o]];return i}function ve(n,e,t){for(var r=n.slice(e,t),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+r[o+1]*256);return i}s.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),t<e&&(t=e);var i=this.subarray(e,t);return Object.setPrototypeOf(i,s.prototype),i};function X(n,e,t){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+e>t)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,r){e=e>>>0,t=t>>>0,r||X(e,t,this.length);for(var i=this[e],o=1,l=0;++l<t&&(o*=256);)i+=this[e+l]*o;return i},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,r){e=e>>>0,t=t>>>0,r||X(e,t,this.length);for(var i=this[e+--t],o=1;t>0&&(o*=256);)i+=this[e+--t]*o;return i},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e=e>>>0,t||X(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||X(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||X(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||X(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||X(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,r){e=e>>>0,t=t>>>0,r||X(e,t,this.length);for(var i=this[e],o=1,l=0;++l<t&&(o*=256);)i+=this[e+l]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},s.prototype.readIntBE=function(e,t,r){e=e>>>0,t=t>>>0,r||X(e,t,this.length);for(var i=t,o=1,l=this[e+--i];i>0&&(o*=256);)l+=this[e+--i]*o;return o*=128,l>=o&&(l-=Math.pow(2,8*t)),l},s.prototype.readInt8=function(e,t){return e=e>>>0,t||X(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]},s.prototype.readInt16LE=function(e,t){e=e>>>0,t||X(e,2,this.length);var r=this[e]|this[e+1]<<8;return r&32768?r|4294901760:r},s.prototype.readInt16BE=function(e,t){e=e>>>0,t||X(e,2,this.length);var r=this[e+1]|this[e]<<8;return r&32768?r|4294901760:r},s.prototype.readInt32LE=function(e,t){return e=e>>>0,t||X(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e=e>>>0,t||X(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e=e>>>0,t||X(e,4,this.length),E.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e=e>>>0,t||X(e,4,this.length),E.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||X(e,8,this.length),E.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||X(e,8,this.length),E.read(this,e,!1,52,8)};function re(n,e,t,r,i,o){if(!s.isBuffer(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+r>n.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,r,i){if(e=+e,t=t>>>0,r=r>>>0,!i){var o=Math.pow(2,8*r)-1;re(this,e,t,r,o,0)}var l=1,p=0;for(this[t]=e&255;++p<r&&(l*=256);)this[t+p]=e/l&255;return t+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,r,i){if(e=+e,t=t>>>0,r=r>>>0,!i){var o=Math.pow(2,8*r)-1;re(this,e,t,r,o,0)}var l=r-1,p=1;for(this[t+l]=e&255;--l>=0&&(p*=256);)this[t+l]=e/p&255;return t+r},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,r){return e=+e,t=t>>>0,r||re(this,e,t,1,255,0),this[t]=e&255,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t=t>>>0,r||re(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t=t>>>0,r||re(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t=t>>>0,r||re(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t=t>>>0,r||re(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4},s.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t=t>>>0,!i){var o=Math.pow(2,8*r-1);re(this,e,t,r,o-1,-o)}var l=0,p=1,x=0;for(this[t]=e&255;++l<r&&(p*=256);)e<0&&x===0&&this[t+l-1]!==0&&(x=1),this[t+l]=(e/p>>0)-x&255;return t+r},s.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t=t>>>0,!i){var o=Math.pow(2,8*r-1);re(this,e,t,r,o-1,-o)}var l=r-1,p=1,x=0;for(this[t+l]=e&255;--l>=0&&(p*=256);)e<0&&x===0&&this[t+l+1]!==0&&(x=1),this[t+l]=(e/p>>0)-x&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e=+e,t=t>>>0,r||re(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t=t>>>0,r||re(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t=t>>>0,r||re(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t=t>>>0,r||re(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t=t>>>0,r||re(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function fe(n,e,t,r,i,o){if(t+r>n.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function xe(n,e,t,r,i){return e=+e,t=t>>>0,i||fe(n,e,t,4),E.write(n,e,t,r,23,4),t+4}s.prototype.writeFloatLE=function(e,t,r){return xe(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return xe(this,e,t,!1,r)};function ce(n,e,t,r,i){return e=+e,t=t>>>0,i||fe(n,e,t,8),E.write(n,e,t,r,52,8),t+8}s.prototype.writeDoubleLE=function(e,t,r){return ce(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return ce(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,i){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var o=i-r;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,r,i):Uint8Array.prototype.set.call(e,this.subarray(r,i),t),o},s.prototype.fill=function(e,t,r,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,r=this.length):typeof r=="string"&&(i=r,r=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!s.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){var o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t=t>>>0,r=r===void 0?this.length:r>>>0,e||(e=0);var l;if(typeof e=="number")for(l=t;l<r;++l)this[l]=e;else{var p=s.isBuffer(e)?e:s.from(e,i),x=p.length;if(x===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(l=0;l<r-t;++l)this[l+t]=p[l%x]}return this};var m=/[^+/0-9A-Za-z-_]/g;function v(n){if(n=n.split("=")[0],n=n.trim().replace(m,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function I(n,e){e=e||1/0;for(var t,r=n.length,i=null,o=[],l=0;l<r;++l){if(t=n.charCodeAt(l),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(l+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function K(n){for(var e=[],t=0;t<n.length;++t)e.push(n.charCodeAt(t)&255);return e}function J(n,e){for(var t,r,i,o=[],l=0;l<n.length&&!((e-=2)<0);++l)t=n.charCodeAt(l),r=t>>8,i=t%256,o.push(i),o.push(r);return o}function u(n){return b.toByteArray(v(n))}function f(n,e,t,r){for(var i=0;i<r&&!(i+t>=e.length||i>=n.length);++i)e[i+t]=n[i];return i}function F(n,e){return n instanceof e||n!=null&&n.constructor!=null&&n.constructor.name!=null&&n.constructor.name===e.name}function G(n){return n!==n}var a=function(){for(var n="0123456789abcdef",e=new Array(256),t=0;t<16;++t)for(var r=t*16,i=0;i<16;++i)e[r+i]=n[t]+n[i];return e}()}(je)),je}var qe,ht;function tr(){if(ht)return qe;ht=1;function U(R,M){var D=Object.keys(R);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(R);M&&(h=h.filter(function(_){return Object.getOwnPropertyDescriptor(R,_).enumerable})),D.push.apply(D,h)}return D}function b(R){for(var M=1;M<arguments.length;M++){var D=arguments[M]!=null?arguments[M]:{};M%2?U(Object(D),!0).forEach(function(h){E(R,h,D[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(D)):U(Object(D)).forEach(function(h){Object.defineProperty(R,h,Object.getOwnPropertyDescriptor(D,h))})}return R}function E(R,M,D){return M=w(M),M in R?Object.defineProperty(R,M,{value:D,enumerable:!0,configurable:!0,writable:!0}):R[M]=D,R}function L(R,M){if(!(R instanceof M))throw new TypeError("Cannot call a class as a function")}function N(R,M){for(var D=0;D<M.length;D++){var h=M[D];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(R,w(h.key),h)}}function d(R,M,D){return M&&N(R.prototype,M),Object.defineProperty(R,"prototype",{writable:!1}),R}function w(R){var M=s(R,"string");return typeof M=="symbol"?M:String(M)}function s(R,M){if(typeof R!="object"||R===null)return R;var D=R[Symbol.toPrimitive];if(D!==void 0){var h=D.call(R,M);if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(R)}var g=De(),S=g.Buffer,P=Tt,B=P.inspect,A=B&&B.custom||"inspect";function C(R,M,D){S.prototype.copy.call(R,M,D)}return qe=function(){function R(){L(this,R),this.head=null,this.tail=null,this.length=0}return d(R,[{key:"push",value:function(D){var h={data:D,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}},{key:"unshift",value:function(D){var h={data:D,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}},{key:"shift",value:function(){if(this.length!==0){var D=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,D}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(D){if(this.length===0)return"";for(var h=this.head,_=""+h.data;h=h.next;)_+=D+h.data;return _}},{key:"concat",value:function(D){if(this.length===0)return S.alloc(0);for(var h=S.allocUnsafe(D>>>0),_=this.head,T=0;_;)C(_.data,h,T),T+=_.data.length,_=_.next;return h}},{key:"consume",value:function(D,h){var _;return D<this.head.data.length?(_=this.head.data.slice(0,D),this.head.data=this.head.data.slice(D)):D===this.head.data.length?_=this.shift():_=h?this._getString(D):this._getBuffer(D),_}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(D){var h=this.head,_=1,T=h.data;for(D-=T.length;h=h.next;){var y=h.data,c=D>y.length?y.length:D;if(c===y.length?T+=y:T+=y.slice(0,D),D-=c,D===0){c===y.length?(++_,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=y.slice(c));break}++_}return this.length-=_,T}},{key:"_getBuffer",value:function(D){var h=S.allocUnsafe(D),_=this.head,T=1;for(_.data.copy(h),D-=_.data.length;_=_.next;){var y=_.data,c=D>y.length?y.length:D;if(y.copy(h,h.length-D,0,c),D-=c,D===0){c===y.length?(++T,_.next?this.head=_.next:this.head=this.tail=null):(this.head=_,_.data=y.slice(c));break}++T}return this.length-=T,h}},{key:A,value:function(D,h){return B(this,b(b({},h),{},{depth:0,customInspect:!1}))}}]),R}(),qe}var We,ct;function Ut(){if(ct)return We;ct=1;function U(w,s){var g=this,S=this._readableState&&this._readableState.destroyed,P=this._writableState&&this._writableState.destroyed;return S||P?(s?s(w):w&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(N,this,w)):process.nextTick(N,this,w)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(w||null,function(B){!s&&B?g._writableState?g._writableState.errorEmitted?process.nextTick(E,g):(g._writableState.errorEmitted=!0,process.nextTick(b,g,B)):process.nextTick(b,g,B):s?(process.nextTick(E,g),s(B)):process.nextTick(E,g)}),this)}function b(w,s){N(w,s),E(w)}function E(w){w._writableState&&!w._writableState.emitClose||w._readableState&&!w._readableState.emitClose||w.emit("close")}function L(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function N(w,s){w.emit("error",s)}function d(w,s){var g=w._readableState,S=w._writableState;g&&g.autoDestroy||S&&S.autoDestroy?w.destroy(s):w.emit("error",s)}return We={destroy:U,undestroy:L,errorOrDestroy:d},We}var He={},dt;function Re(){if(dt)return He;dt=1;function U(s,g){s.prototype=Object.create(g.prototype),s.prototype.constructor=s,s.__proto__=g}var b={};function E(s,g,S){S||(S=Error);function P(A,C,R){return typeof g=="string"?g:g(A,C,R)}var B=function(A){U(C,A);function C(R,M,D){return A.call(this,P(R,M,D))||this}return C}(S);B.prototype.name=S.name,B.prototype.code=s,b[s]=B}function L(s,g){if(Array.isArray(s)){var S=s.length;return s=s.map(function(P){return String(P)}),S>2?"one of ".concat(g," ").concat(s.slice(0,S-1).join(", "),", or ")+s[S-1]:S===2?"one of ".concat(g," ").concat(s[0]," or ").concat(s[1]):"of ".concat(g," ").concat(s[0])}else return"of ".concat(g," ").concat(String(s))}function N(s,g,S){return s.substr(0,g.length)===g}function d(s,g,S){return(S===void 0||S>s.length)&&(S=s.length),s.substring(S-g.length,S)===g}function w(s,g,S){return typeof S!="number"&&(S=0),S+g.length>s.length?!1:s.indexOf(g,S)!==-1}return E("ERR_INVALID_OPT_VALUE",function(s,g){return'The value "'+g+'" is invalid for option "'+s+'"'},TypeError),E("ERR_INVALID_ARG_TYPE",function(s,g,S){var P;typeof g=="string"&&N(g,"not ")?(P="must not be",g=g.replace(/^not /,"")):P="must be";var B;if(d(s," argument"))B="The ".concat(s," ").concat(P," ").concat(L(g,"type"));else{var A=w(s,".")?"property":"argument";B='The "'.concat(s,'" ').concat(A," ").concat(P," ").concat(L(g,"type"))}return B+=". Received type ".concat(typeof S),B},TypeError),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),E("ERR_METHOD_NOT_IMPLEMENTED",function(s){return"The "+s+" method is not implemented"}),E("ERR_STREAM_PREMATURE_CLOSE","Premature close"),E("ERR_STREAM_DESTROYED",function(s){return"Cannot call "+s+" after a stream was destroyed"}),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),E("ERR_STREAM_WRITE_AFTER_END","write after end"),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_UNKNOWN_ENCODING",function(s){return"Unknown encoding: "+s},TypeError),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),He.codes=b,He}var Ge,pt;function Dt(){if(pt)return Ge;pt=1;var U=Re().codes.ERR_INVALID_OPT_VALUE;function b(L,N,d){return L.highWaterMark!=null?L.highWaterMark:N?L[d]:null}function E(L,N,d,w){var s=b(N,w,d);if(s!=null){if(!(isFinite(s)&&Math.floor(s)===s)||s<0){var g=w?d:"highWaterMark";throw new U(g,s)}return Math.floor(s)}return L.objectMode?16:16*1024}return Ge={getHighWaterMark:E},Ge}var Ve,yt;function rr(){if(yt)return Ve;yt=1,Ve=U;function U(E,L){if(b("noDeprecation"))return E;var N=!1;function d(){if(!N){if(b("throwDeprecation"))throw new Error(L);b("traceDeprecation")?console.trace(L):console.warn(L),N=!0}return E.apply(this,arguments)}return d}function b(E){try{if(!we.localStorage)return!1}catch{return!1}var L=we.localStorage[E];return L==null?!1:String(L).toLowerCase()==="true"}return Ve}var ze,xt;function Pt(){if(xt)return ze;xt=1,ze=q;function U(m){var v=this;this.next=null,this.entry=null,this.finish=function(){ce(v,m)}}var b;q.WritableState=k;var E={deprecate:rr()},L=Bt(),N=De().Buffer,d=(typeof we<"u"?we:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function w(m){return N.from(m)}function s(m){return N.isBuffer(m)||m instanceof d}var g=Ut(),S=Dt(),P=S.getHighWaterMark,B=Re().codes,A=B.ERR_INVALID_ARG_TYPE,C=B.ERR_METHOD_NOT_IMPLEMENTED,R=B.ERR_MULTIPLE_CALLBACK,M=B.ERR_STREAM_CANNOT_PIPE,D=B.ERR_STREAM_DESTROYED,h=B.ERR_STREAM_NULL_VALUES,_=B.ERR_STREAM_WRITE_AFTER_END,T=B.ERR_UNKNOWN_ENCODING,y=g.errorOrDestroy;ke()(q,L);function c(){}function k(m,v,I){b=b||Se(),m=m||{},typeof I!="boolean"&&(I=v instanceof b),this.objectMode=!!m.objectMode,I&&(this.objectMode=this.objectMode||!!m.writableObjectMode),this.highWaterMark=P(this,m,"writableHighWaterMark",I),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var K=m.decodeStrings===!1;this.decodeStrings=!K,this.defaultEncoding=m.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(J){ae(v,J)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=m.emitClose!==!1,this.autoDestroy=!!m.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new U(this)}k.prototype.getBuffer=function(){for(var v=this.bufferedRequest,I=[];v;)I.push(v),v=v.next;return I},function(){try{Object.defineProperty(k.prototype,"buffer",{get:E.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var W;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty(q,Symbol.hasInstance,{value:function(v){return W.call(this,v)?!0:this!==q?!1:v&&v._writableState instanceof k}})):W=function(v){return v instanceof this};function q(m){b=b||Se();var v=this instanceof b;if(!v&&!W.call(q,this))return new q(m);this._writableState=new k(m,this,v),this.writable=!0,m&&(typeof m.write=="function"&&(this._write=m.write),typeof m.writev=="function"&&(this._writev=m.writev),typeof m.destroy=="function"&&(this._destroy=m.destroy),typeof m.final=="function"&&(this._final=m.final)),L.call(this)}q.prototype.pipe=function(){y(this,new M)};function H(m,v){var I=new _;y(m,I),process.nextTick(v,I)}function Y(m,v,I,K){var J;return I===null?J=new h:typeof I!="string"&&!v.objectMode&&(J=new A("chunk",["string","Buffer"],I)),J?(y(m,J),process.nextTick(K,J),!1):!0}q.prototype.write=function(m,v,I){var K=this._writableState,J=!1,u=!K.objectMode&&s(m);return u&&!N.isBuffer(m)&&(m=w(m)),typeof v=="function"&&(I=v,v=null),u?v="buffer":v||(v=K.defaultEncoding),typeof I!="function"&&(I=c),K.ending?H(this,I):(u||Y(this,K,m,I))&&(K.pendingcb++,J=se(this,K,u,m,v,I)),J},q.prototype.cork=function(){this._writableState.corked++},q.prototype.uncork=function(){var m=this._writableState;m.corked&&(m.corked--,!m.writing&&!m.corked&&!m.bufferProcessing&&m.bufferedRequest&&ye(this,m))},q.prototype.setDefaultEncoding=function(v){if(typeof v=="string"&&(v=v.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((v+"").toLowerCase())>-1))throw new T(v);return this._writableState.defaultEncoding=v,this},Object.defineProperty(q.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ee(m,v,I){return!m.objectMode&&m.decodeStrings!==!1&&typeof v=="string"&&(v=N.from(v,I)),v}Object.defineProperty(q.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function se(m,v,I,K,J,u){if(!I){var f=ee(v,K,J);K!==f&&(I=!0,J="buffer",K=f)}var F=v.objectMode?1:K.length;v.length+=F;var G=v.length<v.highWaterMark;if(G||(v.needDrain=!0),v.writing||v.corked){var a=v.lastBufferedRequest;v.lastBufferedRequest={chunk:K,encoding:J,isBuf:I,callback:u,next:null},a?a.next=v.lastBufferedRequest:v.bufferedRequest=v.lastBufferedRequest,v.bufferedRequestCount+=1}else ue(m,v,!1,F,K,J,u);return G}function ue(m,v,I,K,J,u,f){v.writelen=K,v.writecb=f,v.writing=!0,v.sync=!0,v.destroyed?v.onwrite(new D("write")):I?m._writev(J,v.onwrite):m._write(J,u,v.onwrite),v.sync=!1}function pe(m,v,I,K,J){--v.pendingcb,I?(process.nextTick(J,K),process.nextTick(fe,m,v),m._writableState.errorEmitted=!0,y(m,K)):(J(K),m._writableState.errorEmitted=!0,y(m,K),fe(m,v))}function Q(m){m.writing=!1,m.writecb=null,m.length-=m.writelen,m.writelen=0}function ae(m,v){var I=m._writableState,K=I.sync,J=I.writecb;if(typeof J!="function")throw new R;if(Q(I),v)pe(m,I,K,v,J);else{var u=ve(I)||m.destroyed;!u&&!I.corked&&!I.bufferProcessing&&I.bufferedRequest&&ye(m,I),K?process.nextTick(le,m,I,u,J):le(m,I,u,J)}}function le(m,v,I,K){I||de(m,v),v.pendingcb--,K(),fe(m,v)}function de(m,v){v.length===0&&v.needDrain&&(v.needDrain=!1,m.emit("drain"))}function ye(m,v){v.bufferProcessing=!0;var I=v.bufferedRequest;if(m._writev&&I&&I.next){var K=v.bufferedRequestCount,J=new Array(K),u=v.corkedRequestsFree;u.entry=I;for(var f=0,F=!0;I;)J[f]=I,I.isBuf||(F=!1),I=I.next,f+=1;J.allBuffers=F,ue(m,v,!0,v.length,J,"",u.finish),v.pendingcb++,v.lastBufferedRequest=null,u.next?(v.corkedRequestsFree=u.next,u.next=null):v.corkedRequestsFree=new U(v),v.bufferedRequestCount=0}else{for(;I;){var G=I.chunk,a=I.encoding,n=I.callback,e=v.objectMode?1:G.length;if(ue(m,v,!1,e,G,a,n),I=I.next,v.bufferedRequestCount--,v.writing)break}I===null&&(v.lastBufferedRequest=null)}v.bufferedRequest=I,v.bufferProcessing=!1}q.prototype._write=function(m,v,I){I(new C("_write()"))},q.prototype._writev=null,q.prototype.end=function(m,v,I){var K=this._writableState;return typeof m=="function"?(I=m,m=null,v=null):typeof v=="function"&&(I=v,v=null),m!=null&&this.write(m,v),K.corked&&(K.corked=1,this.uncork()),K.ending||xe(this,K,I),this},Object.defineProperty(q.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function ve(m){return m.ending&&m.length===0&&m.bufferedRequest===null&&!m.finished&&!m.writing}function X(m,v){m._final(function(I){v.pendingcb--,I&&y(m,I),v.prefinished=!0,m.emit("prefinish"),fe(m,v)})}function re(m,v){!v.prefinished&&!v.finalCalled&&(typeof m._final=="function"&&!v.destroyed?(v.pendingcb++,v.finalCalled=!0,process.nextTick(X,m,v)):(v.prefinished=!0,m.emit("prefinish")))}function fe(m,v){var I=ve(v);if(I&&(re(m,v),v.pendingcb===0&&(v.finished=!0,m.emit("finish"),v.autoDestroy))){var K=m._readableState;(!K||K.autoDestroy&&K.endEmitted)&&m.destroy()}return I}function xe(m,v,I){v.ending=!0,fe(m,v),I&&(v.finished?process.nextTick(I):m.once("finish",I)),v.ended=!0,m.writable=!1}function ce(m,v,I){var K=m.entry;for(m.entry=null;K;){var J=K.callback;v.pendingcb--,J(I),K=K.next}v.corkedRequestsFree.next=m}return Object.defineProperty(q.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(v){this._writableState&&(this._writableState.destroyed=v)}}),q.prototype.destroy=g.destroy,q.prototype._undestroy=g.undestroy,q.prototype._destroy=function(m,v){v(m)},ze}var Ke,vt;function Se(){if(vt)return Ke;vt=1;var U=Object.keys||function(S){var P=[];for(var B in S)P.push(B);return P};Ke=w;var b=Mt(),E=Pt();ke()(w,b);for(var L=U(E.prototype),N=0;N<L.length;N++){var d=L[N];w.prototype[d]||(w.prototype[d]=E.prototype[d])}function w(S){if(!(this instanceof w))return new w(S);b.call(this,S),E.call(this,S),this.allowHalfOpen=!0,S&&(S.readable===!1&&(this.readable=!1),S.writable===!1&&(this.writable=!1),S.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",s)))}Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(w.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(w.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function s(){this._writableState.ended||process.nextTick(g,this)}function g(S){S.end()}return Object.defineProperty(w.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(P){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=P,this._writableState.destroyed=P)}}),Ke}var Ye={},Ue={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var gt;function nr(){return gt||(gt=1,function(U,b){var E=De(),L=E.Buffer;function N(w,s){for(var g in w)s[g]=w[g]}L.from&&L.alloc&&L.allocUnsafe&&L.allocUnsafeSlow?U.exports=E:(N(E,b),b.Buffer=d);function d(w,s,g){return L(w,s,g)}d.prototype=Object.create(L.prototype),N(L,d),d.from=function(w,s,g){if(typeof w=="number")throw new TypeError("Argument must not be a number");return L(w,s,g)},d.alloc=function(w,s,g){if(typeof w!="number")throw new TypeError("Argument must be a number");var S=L(w);return s!==void 0?typeof g=="string"?S.fill(s,g):S.fill(s):S.fill(0),S},d.allocUnsafe=function(w){if(typeof w!="number")throw new TypeError("Argument must be a number");return L(w)},d.allocUnsafeSlow=function(w){if(typeof w!="number")throw new TypeError("Argument must be a number");return E.SlowBuffer(w)}}(Ue,Ue.exports)),Ue.exports}var mt;function wt(){if(mt)return Ye;mt=1;var U=nr().Buffer,b=U.isEncoding||function(h){switch(h=""+h,h&&h.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function E(h){if(!h)return"utf8";for(var _;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(_)return;h=(""+h).toLowerCase(),_=!0}}function L(h){var _=E(h);if(typeof _!="string"&&(U.isEncoding===b||!b(h)))throw new Error("Unknown encoding: "+h);return _||h}Ye.StringDecoder=N;function N(h){this.encoding=L(h);var _;switch(this.encoding){case"utf16le":this.text=B,this.end=A,_=4;break;case"utf8":this.fillLast=g,_=4;break;case"base64":this.text=C,this.end=R,_=3;break;default:this.write=M,this.end=D;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=U.allocUnsafe(_)}N.prototype.write=function(h){if(h.length===0)return"";var _,T;if(this.lastNeed){if(_=this.fillLast(h),_===void 0)return"";T=this.lastNeed,this.lastNeed=0}else T=0;return T<h.length?_?_+this.text(h,T):this.text(h,T):_||""},N.prototype.end=P,N.prototype.text=S,N.prototype.fillLast=function(h){if(this.lastNeed<=h.length)return h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,this.lastTotal-this.lastNeed,0,h.length),this.lastNeed-=h.length};function d(h){return h<=127?0:h>>5===6?2:h>>4===14?3:h>>3===30?4:h>>6===2?-1:-2}function w(h,_,T){var y=_.length-1;if(y<T)return 0;var c=d(_[y]);return c>=0?(c>0&&(h.lastNeed=c-1),c):--y<T||c===-2?0:(c=d(_[y]),c>=0?(c>0&&(h.lastNeed=c-2),c):--y<T||c===-2?0:(c=d(_[y]),c>=0?(c>0&&(c===2?c=0:h.lastNeed=c-3),c):0))}function s(h,_,T){if((_[0]&192)!==128)return h.lastNeed=0,"";if(h.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return h.lastNeed=1,"";if(h.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return h.lastNeed=2,""}}function g(h){var _=this.lastTotal-this.lastNeed,T=s(this,h);if(T!==void 0)return T;if(this.lastNeed<=h.length)return h.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);h.copy(this.lastChar,_,0,h.length),this.lastNeed-=h.length}function S(h,_){var T=w(this,h,_);if(!this.lastNeed)return h.toString("utf8",_);this.lastTotal=T;var y=h.length-(T-this.lastNeed);return h.copy(this.lastChar,0,y),h.toString("utf8",_,y)}function P(h){var _=h&&h.length?this.write(h):"";return this.lastNeed?_+"":_}function B(h,_){if((h.length-_)%2===0){var T=h.toString("utf16le",_);if(T){var y=T.charCodeAt(T.length-1);if(y>=55296&&y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1],T.slice(0,-1)}return T}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=h[h.length-1],h.toString("utf16le",_,h.length-1)}function A(h){var _=h&&h.length?this.write(h):"";if(this.lastNeed){var T=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,T)}return _}function C(h,_){var T=(h.length-_)%3;return T===0?h.toString("base64",_):(this.lastNeed=3-T,this.lastTotal=3,T===1?this.lastChar[0]=h[h.length-1]:(this.lastChar[0]=h[h.length-2],this.lastChar[1]=h[h.length-1]),h.toString("base64",_,h.length-T))}function R(h){var _=h&&h.length?this.write(h):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function M(h){return h.toString(this.encoding)}function D(h){return h&&h.length?this.write(h):""}return Ye}var Je,bt;function it(){if(bt)return Je;bt=1;var U=Re().codes.ERR_STREAM_PREMATURE_CLOSE;function b(d){var w=!1;return function(){if(!w){w=!0;for(var s=arguments.length,g=new Array(s),S=0;S<s;S++)g[S]=arguments[S];d.apply(this,g)}}}function E(){}function L(d){return d.setHeader&&typeof d.abort=="function"}function N(d,w,s){if(typeof w=="function")return N(d,null,w);w||(w={}),s=b(s||E);var g=w.readable||w.readable!==!1&&d.readable,S=w.writable||w.writable!==!1&&d.writable,P=function(){d.writable||A()},B=d._writableState&&d._writableState.finished,A=function(){S=!1,B=!0,g||s.call(d)},C=d._readableState&&d._readableState.endEmitted,R=function(){g=!1,C=!0,S||s.call(d)},M=function(T){s.call(d,T)},D=function(){var T;if(g&&!C)return(!d._readableState||!d._readableState.ended)&&(T=new U),s.call(d,T);if(S&&!B)return(!d._writableState||!d._writableState.ended)&&(T=new U),s.call(d,T)},h=function(){d.req.on("finish",A)};return L(d)?(d.on("complete",A),d.on("abort",D),d.req?h():d.on("request",h)):S&&!d._writableState&&(d.on("end",P),d.on("close",P)),d.on("end",R),d.on("finish",A),w.error!==!1&&d.on("error",M),d.on("close",D),function(){d.removeListener("complete",A),d.removeListener("abort",D),d.removeListener("request",h),d.req&&d.req.removeListener("finish",A),d.removeListener("end",P),d.removeListener("close",P),d.removeListener("finish",A),d.removeListener("end",R),d.removeListener("error",M),d.removeListener("close",D)}}return Je=N,Je}var Xe,_t;function ir(){if(_t)return Xe;_t=1;var U;function b(T,y,c){return y=E(y),y in T?Object.defineProperty(T,y,{value:c,enumerable:!0,configurable:!0,writable:!0}):T[y]=c,T}function E(T){var y=L(T,"string");return typeof y=="symbol"?y:String(y)}function L(T,y){if(typeof T!="object"||T===null)return T;var c=T[Symbol.toPrimitive];if(c!==void 0){var k=c.call(T,y);if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(T)}var N=it(),d=Symbol("lastResolve"),w=Symbol("lastReject"),s=Symbol("error"),g=Symbol("ended"),S=Symbol("lastPromise"),P=Symbol("handlePromise"),B=Symbol("stream");function A(T,y){return{value:T,done:y}}function C(T){var y=T[d];if(y!==null){var c=T[B].read();c!==null&&(T[S]=null,T[d]=null,T[w]=null,y(A(c,!1)))}}function R(T){process.nextTick(C,T)}function M(T,y){return function(c,k){T.then(function(){if(y[g]){c(A(void 0,!0));return}y[P](c,k)},k)}}var D=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((U={get stream(){return this[B]},next:function(){var y=this,c=this[s];if(c!==null)return Promise.reject(c);if(this[g])return Promise.resolve(A(void 0,!0));if(this[B].destroyed)return new Promise(function(H,Y){process.nextTick(function(){y[s]?Y(y[s]):H(A(void 0,!0))})});var k=this[S],W;if(k)W=new Promise(M(k,this));else{var q=this[B].read();if(q!==null)return Promise.resolve(A(q,!1));W=new Promise(this[P])}return this[S]=W,W}},b(U,Symbol.asyncIterator,function(){return this}),b(U,"return",function(){var y=this;return new Promise(function(c,k){y[B].destroy(null,function(W){if(W){k(W);return}c(A(void 0,!0))})})}),U),D),_=function(y){var c,k=Object.create(h,(c={},b(c,B,{value:y,writable:!0}),b(c,d,{value:null,writable:!0}),b(c,w,{value:null,writable:!0}),b(c,s,{value:null,writable:!0}),b(c,g,{value:y._readableState.endEmitted,writable:!0}),b(c,P,{value:function(q,H){var Y=k[B].read();Y?(k[S]=null,k[d]=null,k[w]=null,q(A(Y,!1))):(k[d]=q,k[w]=H)},writable:!0}),c));return k[S]=null,N(y,function(W){if(W&&W.code!=="ERR_STREAM_PREMATURE_CLOSE"){var q=k[w];q!==null&&(k[S]=null,k[d]=null,k[w]=null,q(W)),k[s]=W;return}var H=k[d];H!==null&&(k[S]=null,k[d]=null,k[w]=null,H(A(void 0,!0))),k[g]=!0}),y.on("readable",R.bind(null,k)),k};return Xe=_,Xe}var Ze,Et;function ar(){return Et||(Et=1,Ze=function(){throw new Error("Readable.from is not available in the browser")}),Ze}var $e,St;function Mt(){if(St)return $e;St=1,$e=H;var U;H.ReadableState=q,nt().EventEmitter;var b=function(f,F){return f.listeners(F).length},E=Bt(),L=De().Buffer,N=(typeof we<"u"?we:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d(u){return L.from(u)}function w(u){return L.isBuffer(u)||u instanceof N}var s=Tt,g;s&&s.debuglog?g=s.debuglog("stream"):g=function(){};var S=tr(),P=Ut(),B=Dt(),A=B.getHighWaterMark,C=Re().codes,R=C.ERR_INVALID_ARG_TYPE,M=C.ERR_STREAM_PUSH_AFTER_EOF,D=C.ERR_METHOD_NOT_IMPLEMENTED,h=C.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,_,T,y;ke()(H,E);var c=P.errorOrDestroy,k=["error","close","destroy","pause","resume"];function W(u,f,F){if(typeof u.prependListener=="function")return u.prependListener(f,F);!u._events||!u._events[f]?u.on(f,F):Array.isArray(u._events[f])?u._events[f].unshift(F):u._events[f]=[F,u._events[f]]}function q(u,f,F){U=U||Se(),u=u||{},typeof F!="boolean"&&(F=f instanceof U),this.objectMode=!!u.objectMode,F&&(this.objectMode=this.objectMode||!!u.readableObjectMode),this.highWaterMark=A(this,u,"readableHighWaterMark",F),this.buffer=new S,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=u.emitClose!==!1,this.autoDestroy=!!u.autoDestroy,this.destroyed=!1,this.defaultEncoding=u.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,u.encoding&&(_||(_=wt().StringDecoder),this.decoder=new _(u.encoding),this.encoding=u.encoding)}function H(u){if(U=U||Se(),!(this instanceof H))return new H(u);var f=this instanceof U;this._readableState=new q(u,this,f),this.readable=!0,u&&(typeof u.read=="function"&&(this._read=u.read),typeof u.destroy=="function"&&(this._destroy=u.destroy)),E.call(this)}Object.defineProperty(H.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(f){this._readableState&&(this._readableState.destroyed=f)}}),H.prototype.destroy=P.destroy,H.prototype._undestroy=P.undestroy,H.prototype._destroy=function(u,f){f(u)},H.prototype.push=function(u,f){var F=this._readableState,G;return F.objectMode?G=!0:typeof u=="string"&&(f=f||F.defaultEncoding,f!==F.encoding&&(u=L.from(u,f),f=""),G=!0),Y(this,u,f,!1,G)},H.prototype.unshift=function(u){return Y(this,u,null,!0,!1)};function Y(u,f,F,G,a){g("readableAddChunk",f);var n=u._readableState;if(f===null)n.reading=!1,ae(u,n);else{var e;if(a||(e=se(n,f)),e)c(u,e);else if(n.objectMode||f&&f.length>0)if(typeof f!="string"&&!n.objectMode&&Object.getPrototypeOf(f)!==L.prototype&&(f=d(f)),G)n.endEmitted?c(u,new h):ee(u,n,f,!0);else if(n.ended)c(u,new M);else{if(n.destroyed)return!1;n.reading=!1,n.decoder&&!F?(f=n.decoder.write(f),n.objectMode||f.length!==0?ee(u,n,f,!1):ye(u,n)):ee(u,n,f,!1)}else G||(n.reading=!1,ye(u,n))}return!n.ended&&(n.length<n.highWaterMark||n.length===0)}function ee(u,f,F,G){f.flowing&&f.length===0&&!f.sync?(f.awaitDrain=0,u.emit("data",F)):(f.length+=f.objectMode?1:F.length,G?f.buffer.unshift(F):f.buffer.push(F),f.needReadable&&le(u)),ye(u,f)}function se(u,f){var F;return!w(f)&&typeof f!="string"&&f!==void 0&&!u.objectMode&&(F=new R("chunk",["string","Buffer","Uint8Array"],f)),F}H.prototype.isPaused=function(){return this._readableState.flowing===!1},H.prototype.setEncoding=function(u){_||(_=wt().StringDecoder);var f=new _(u);this._readableState.decoder=f,this._readableState.encoding=this._readableState.decoder.encoding;for(var F=this._readableState.buffer.head,G="";F!==null;)G+=f.write(F.data),F=F.next;return this._readableState.buffer.clear(),G!==""&&this._readableState.buffer.push(G),this._readableState.length=G.length,this};var ue=1073741824;function pe(u){return u>=ue?u=ue:(u--,u|=u>>>1,u|=u>>>2,u|=u>>>4,u|=u>>>8,u|=u>>>16,u++),u}function Q(u,f){return u<=0||f.length===0&&f.ended?0:f.objectMode?1:u!==u?f.flowing&&f.length?f.buffer.head.data.length:f.length:(u>f.highWaterMark&&(f.highWaterMark=pe(u)),u<=f.length?u:f.ended?f.length:(f.needReadable=!0,0))}H.prototype.read=function(u){g("read",u),u=parseInt(u,10);var f=this._readableState,F=u;if(u!==0&&(f.emittedReadable=!1),u===0&&f.needReadable&&((f.highWaterMark!==0?f.length>=f.highWaterMark:f.length>0)||f.ended))return g("read: emitReadable",f.length,f.ended),f.length===0&&f.ended?I(this):le(this),null;if(u=Q(u,f),u===0&&f.ended)return f.length===0&&I(this),null;var G=f.needReadable;g("need readable",G),(f.length===0||f.length-u<f.highWaterMark)&&(G=!0,g("length less than watermark",G)),f.ended||f.reading?(G=!1,g("reading or ended",G)):G&&(g("do read"),f.reading=!0,f.sync=!0,f.length===0&&(f.needReadable=!0),this._read(f.highWaterMark),f.sync=!1,f.reading||(u=Q(F,f)));var a;return u>0?a=v(u,f):a=null,a===null?(f.needReadable=f.length<=f.highWaterMark,u=0):(f.length-=u,f.awaitDrain=0),f.length===0&&(f.ended||(f.needReadable=!0),F!==u&&f.ended&&I(this)),a!==null&&this.emit("data",a),a};function ae(u,f){if(g("onEofChunk"),!f.ended){if(f.decoder){var F=f.decoder.end();F&&F.length&&(f.buffer.push(F),f.length+=f.objectMode?1:F.length)}f.ended=!0,f.sync?le(u):(f.needReadable=!1,f.emittedReadable||(f.emittedReadable=!0,de(u)))}}function le(u){var f=u._readableState;g("emitReadable",f.needReadable,f.emittedReadable),f.needReadable=!1,f.emittedReadable||(g("emitReadable",f.flowing),f.emittedReadable=!0,process.nextTick(de,u))}function de(u){var f=u._readableState;g("emitReadable_",f.destroyed,f.length,f.ended),!f.destroyed&&(f.length||f.ended)&&(u.emit("readable"),f.emittedReadable=!1),f.needReadable=!f.flowing&&!f.ended&&f.length<=f.highWaterMark,m(u)}function ye(u,f){f.readingMore||(f.readingMore=!0,process.nextTick(ve,u,f))}function ve(u,f){for(;!f.reading&&!f.ended&&(f.length<f.highWaterMark||f.flowing&&f.length===0);){var F=f.length;if(g("maybeReadMore read 0"),u.read(0),F===f.length)break}f.readingMore=!1}H.prototype._read=function(u){c(this,new D("_read()"))},H.prototype.pipe=function(u,f){var F=this,G=this._readableState;switch(G.pipesCount){case 0:G.pipes=u;break;case 1:G.pipes=[G.pipes,u];break;default:G.pipes.push(u);break}G.pipesCount+=1,g("pipe count=%d opts=%j",G.pipesCount,f);var a=(!f||f.end!==!1)&&u!==process.stdout&&u!==process.stderr,n=a?t:V;G.endEmitted?process.nextTick(n):F.once("end",n),u.on("unpipe",e);function e(j,z){g("onunpipe"),j===F&&z&&z.hasUnpiped===!1&&(z.hasUnpiped=!0,o())}function t(){g("onend"),u.end()}var r=X(F);u.on("drain",r);var i=!1;function o(){g("cleanup"),u.removeListener("close",x),u.removeListener("finish",O),u.removeListener("drain",r),u.removeListener("error",p),u.removeListener("unpipe",e),F.removeListener("end",t),F.removeListener("end",V),F.removeListener("data",l),i=!0,G.awaitDrain&&(!u._writableState||u._writableState.needDrain)&&r()}F.on("data",l);function l(j){g("ondata");var z=u.write(j);g("dest.write",z),z===!1&&((G.pipesCount===1&&G.pipes===u||G.pipesCount>1&&J(G.pipes,u)!==-1)&&!i&&(g("false write response, pause",G.awaitDrain),G.awaitDrain++),F.pause())}function p(j){g("onerror",j),V(),u.removeListener("error",p),b(u,"error")===0&&c(u,j)}W(u,"error",p);function x(){u.removeListener("finish",O),V()}u.once("close",x);function O(){g("onfinish"),u.removeListener("close",x),V()}u.once("finish",O);function V(){g("unpipe"),F.unpipe(u)}return u.emit("pipe",F),G.flowing||(g("pipe resume"),F.resume()),u};function X(u){return function(){var F=u._readableState;g("pipeOnDrain",F.awaitDrain),F.awaitDrain&&F.awaitDrain--,F.awaitDrain===0&&b(u,"data")&&(F.flowing=!0,m(u))}}H.prototype.unpipe=function(u){var f=this._readableState,F={hasUnpiped:!1};if(f.pipesCount===0)return this;if(f.pipesCount===1)return u&&u!==f.pipes?this:(u||(u=f.pipes),f.pipes=null,f.pipesCount=0,f.flowing=!1,u&&u.emit("unpipe",this,F),this);if(!u){var G=f.pipes,a=f.pipesCount;f.pipes=null,f.pipesCount=0,f.flowing=!1;for(var n=0;n<a;n++)G[n].emit("unpipe",this,{hasUnpiped:!1});return this}var e=J(f.pipes,u);return e===-1?this:(f.pipes.splice(e,1),f.pipesCount-=1,f.pipesCount===1&&(f.pipes=f.pipes[0]),u.emit("unpipe",this,F),this)},H.prototype.on=function(u,f){var F=E.prototype.on.call(this,u,f),G=this._readableState;return u==="data"?(G.readableListening=this.listenerCount("readable")>0,G.flowing!==!1&&this.resume()):u==="readable"&&!G.endEmitted&&!G.readableListening&&(G.readableListening=G.needReadable=!0,G.flowing=!1,G.emittedReadable=!1,g("on readable",G.length,G.reading),G.length?le(this):G.reading||process.nextTick(fe,this)),F},H.prototype.addListener=H.prototype.on,H.prototype.removeListener=function(u,f){var F=E.prototype.removeListener.call(this,u,f);return u==="readable"&&process.nextTick(re,this),F},H.prototype.removeAllListeners=function(u){var f=E.prototype.removeAllListeners.apply(this,arguments);return(u==="readable"||u===void 0)&&process.nextTick(re,this),f};function re(u){var f=u._readableState;f.readableListening=u.listenerCount("readable")>0,f.resumeScheduled&&!f.paused?f.flowing=!0:u.listenerCount("data")>0&&u.resume()}function fe(u){g("readable nexttick read 0"),u.read(0)}H.prototype.resume=function(){var u=this._readableState;return u.flowing||(g("resume"),u.flowing=!u.readableListening,xe(this,u)),u.paused=!1,this};function xe(u,f){f.resumeScheduled||(f.resumeScheduled=!0,process.nextTick(ce,u,f))}function ce(u,f){g("resume",f.reading),f.reading||u.read(0),f.resumeScheduled=!1,u.emit("resume"),m(u),f.flowing&&!f.reading&&u.read(0)}H.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function m(u){var f=u._readableState;for(g("flow",f.flowing);f.flowing&&u.read()!==null;);}H.prototype.wrap=function(u){var f=this,F=this._readableState,G=!1;u.on("end",function(){if(g("wrapped end"),F.decoder&&!F.ended){var e=F.decoder.end();e&&e.length&&f.push(e)}f.push(null)}),u.on("data",function(e){if(g("wrapped data"),F.decoder&&(e=F.decoder.write(e)),!(F.objectMode&&e==null)&&!(!F.objectMode&&(!e||!e.length))){var t=f.push(e);t||(G=!0,u.pause())}});for(var a in u)this[a]===void 0&&typeof u[a]=="function"&&(this[a]=function(t){return function(){return u[t].apply(u,arguments)}}(a));for(var n=0;n<k.length;n++)u.on(k[n],this.emit.bind(this,k[n]));return this._read=function(e){g("wrapped _read",e),G&&(G=!1,u.resume())},this},typeof Symbol=="function"&&(H.prototype[Symbol.asyncIterator]=function(){return T===void 0&&(T=ir()),T(this)}),Object.defineProperty(H.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(H.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(H.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(f){this._readableState&&(this._readableState.flowing=f)}}),H._fromList=v,Object.defineProperty(H.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function v(u,f){if(f.length===0)return null;var F;return f.objectMode?F=f.buffer.shift():!u||u>=f.length?(f.decoder?F=f.buffer.join(""):f.buffer.length===1?F=f.buffer.first():F=f.buffer.concat(f.length),f.buffer.clear()):F=f.buffer.consume(u,f.decoder),F}function I(u){var f=u._readableState;g("endReadable",f.endEmitted),f.endEmitted||(f.ended=!0,process.nextTick(K,f,u))}function K(u,f){if(g("endReadableNT",u.endEmitted,u.length),!u.endEmitted&&u.length===0&&(u.endEmitted=!0,f.readable=!1,f.emit("end"),u.autoDestroy)){var F=f._writableState;(!F||F.autoDestroy&&F.finished)&&f.destroy()}}typeof Symbol=="function"&&(H.from=function(u,f){return y===void 0&&(y=ar()),y(H,u,f)});function J(u,f){for(var F=0,G=u.length;F<G;F++)if(u[F]===f)return F;return-1}return $e}var Qe,kt;function It(){if(kt)return Qe;kt=1,Qe=s;var U=Re().codes,b=U.ERR_METHOD_NOT_IMPLEMENTED,E=U.ERR_MULTIPLE_CALLBACK,L=U.ERR_TRANSFORM_ALREADY_TRANSFORMING,N=U.ERR_TRANSFORM_WITH_LENGTH_0,d=Se();ke()(s,d);function w(P,B){var A=this._transformState;A.transforming=!1;var C=A.writecb;if(C===null)return this.emit("error",new E);A.writechunk=null,A.writecb=null,B!=null&&this.push(B),C(P);var R=this._readableState;R.reading=!1,(R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}function s(P){if(!(this instanceof s))return new s(P);d.call(this,P),this._transformState={afterTransform:w.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,P&&(typeof P.transform=="function"&&(this._transform=P.transform),typeof P.flush=="function"&&(this._flush=P.flush)),this.on("prefinish",g)}function g(){var P=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(B,A){S(P,B,A)}):S(this,null,null)}s.prototype.push=function(P,B){return this._transformState.needTransform=!1,d.prototype.push.call(this,P,B)},s.prototype._transform=function(P,B,A){A(new b("_transform()"))},s.prototype._write=function(P,B,A){var C=this._transformState;if(C.writecb=A,C.writechunk=P,C.writeencoding=B,!C.transforming){var R=this._readableState;(C.needTransform||R.needReadable||R.length<R.highWaterMark)&&this._read(R.highWaterMark)}},s.prototype._read=function(P){var B=this._transformState;B.writechunk!==null&&!B.transforming?(B.transforming=!0,this._transform(B.writechunk,B.writeencoding,B.afterTransform)):B.needTransform=!0},s.prototype._destroy=function(P,B){d.prototype._destroy.call(this,P,function(A){B(A)})};function S(P,B,A){if(B)return P.emit("error",B);if(A!=null&&P.push(A),P._writableState.length)throw new N;if(P._transformState.transforming)throw new L;return P.push(null)}return Qe}var et,Rt;function or(){if(Rt)return et;Rt=1,et=b;var U=It();ke()(b,U);function b(E){if(!(this instanceof b))return new b(E);U.call(this,E)}return b.prototype._transform=function(E,L,N){N(null,E)},et}var tt,At;function sr(){if(At)return tt;At=1;var U;function b(A){var C=!1;return function(){C||(C=!0,A.apply(void 0,arguments))}}var E=Re().codes,L=E.ERR_MISSING_ARGS,N=E.ERR_STREAM_DESTROYED;function d(A){if(A)throw A}function w(A){return A.setHeader&&typeof A.abort=="function"}function s(A,C,R,M){M=b(M);var D=!1;A.on("close",function(){D=!0}),U===void 0&&(U=it()),U(A,{readable:C,writable:R},function(_){if(_)return M(_);D=!0,M()});var h=!1;return function(_){if(!D&&!h){if(h=!0,w(A))return A.abort();if(typeof A.destroy=="function")return A.destroy();M(_||new N("pipe"))}}}function g(A){A()}function S(A,C){return A.pipe(C)}function P(A){return!A.length||typeof A[A.length-1]!="function"?d:A.pop()}function B(){for(var A=arguments.length,C=new Array(A),R=0;R<A;R++)C[R]=arguments[R];var M=P(C);if(Array.isArray(C[0])&&(C=C[0]),C.length<2)throw new L("streams");var D,h=C.map(function(_,T){var y=T<C.length-1,c=T>0;return s(_,y,c,function(k){D||(D=k),k&&h.forEach(g),!y&&(h.forEach(g),M(D))})});return C.reduce(S)}return tt=B,tt}var rt,Ft;function ur(){if(Ft)return rt;Ft=1,rt=E;var U=nt().EventEmitter,b=ke();b(E,U),E.Readable=Mt(),E.Writable=Pt(),E.Duplex=Se(),E.Transform=It(),E.PassThrough=or(),E.finished=it(),E.pipeline=sr(),E.Stream=E;function E(){U.call(this)}return E.prototype.pipe=function(L,N){var d=this;function w(C){L.writable&&L.write(C)===!1&&d.pause&&d.pause()}d.on("data",w);function s(){d.readable&&d.resume&&d.resume()}L.on("drain",s),!L._isStdio&&(!N||N.end!==!1)&&(d.on("end",S),d.on("close",P));var g=!1;function S(){g||(g=!0,L.end())}function P(){g||(g=!0,typeof L.destroy=="function"&&L.destroy())}function B(C){if(A(),U.listenerCount(this,"error")===0)throw C}d.on("error",B),L.on("error",B);function A(){d.removeListener("data",w),L.removeListener("drain",s),d.removeListener("end",S),d.removeListener("close",P),d.removeListener("error",B),L.removeListener("error",B),d.removeListener("end",A),d.removeListener("close",A),L.removeListener("close",A)}return d.on("end",A),d.on("close",A),L.on("close",A),L.emit("pipe",d),L},rt}(function(U,b){(function(E,L){U.exports=L(ur())})(we,function(E){function L(a,n){(n==null||n>a.length)&&(n=a.length);for(var e=0,t=Array(n);e<n;e++)t[e]=a[e];return t}function N(a){if(Array.isArray(a))return a}function d(a){if(Array.isArray(a))return L(a)}function w(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function s(a,n){if(!(a instanceof n))throw new TypeError("Cannot call a class as a function")}function g(a,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,H(t.key),t)}}function S(a,n,e){return n&&g(a.prototype,n),e&&g(a,e),Object.defineProperty(a,"prototype",{writable:!1}),a}function P(a,n){var e=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!e){if(Array.isArray(a)||(e=ee(a))||n){e&&(a=e);var t=0,r=function(){};return{s:r,n:function(){return t>=a.length?{done:!0}:{done:!1,value:a[t++]}},e:function(p){throw p},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){e=e.call(a)},n:function(){var p=e.next();return o=p.done,p},e:function(p){l=!0,i=p},f:function(){try{o||e.return==null||e.return()}finally{if(l)throw i}}}}function B(a){var n=M();return function(){var e,t=C(a);if(n){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)}}function A(a,n,e){return(n=H(n))in a?Object.defineProperty(a,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):a[n]=e,a}function C(a){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},C(a)}function R(a,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(n&&n.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),n&&c(a,n)}function M(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M=function(){return!!a})()}function D(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function h(a,n){var e=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(e!=null){var t,r,i,o,l=[],p=!0,x=!1;try{if(i=(e=e.call(a)).next,n!==0)for(;!(p=(t=i.call(e)).done)&&(l.push(t.value),l.length!==n);p=!0);}catch(O){x=!0,r=O}finally{try{if(!p&&e.return!=null&&(o=e.return(),Object(o)!==o))return}finally{if(x)throw r}}return l}}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function T(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(a,n){if(n&&(typeof n=="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w(a)}function c(a,n){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(a,n)}function k(a,n){return N(a)||h(a,n)||ee(a,n)||_()}function W(a){return d(a)||D(a)||ee(a)||T()}function q(a,n){if(typeof a!="object"||!a)return a;var e=a[Symbol.toPrimitive];if(e!==void 0){var t=e.call(a,n);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}function H(a){var n=q(a,"string");return typeof n=="symbol"?n:n+""}function Y(a){"@babel/helpers - typeof";return Y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Y(a)}function ee(a,n){if(a){if(typeof a=="string")return L(a,n);var e={}.toString.call(a).slice(8,-1);return e==="Object"&&a.constructor&&(e=a.constructor.name),e==="Map"||e==="Set"?Array.from(a):e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?L(a,n):void 0}}var se,ue;function pe(a,n){se=a,ue=n}function Q(a){if(se){for(var n=arguments.length,e=new Array(n>1?n-1:0),t=1;t<n;t++)e[t-1]=arguments[t];se.apply(void 0,[a].concat(e))}}function ae(a){if(ue){for(var n=arguments.length,e=new Array(n>1?n-1:0),t=1;t<n;t++)e[t-1]=arguments[t];ue.apply(void 0,[a].concat(e))}}var le=function(){function a(n){s(this,a),this.listener={},this.type=n|""}return S(a,[{key:"on",value:function(e,t){return this.listener[e]||(this.listener[e]=[]),this.listener[e].push(t),!0}},{key:"off",value:function(e,t){if(this.listener[e]){var r=this.listener[e].indexOf(t);return r>-1&&this.listener[e].splice(r,1),!0}return!1}},{key:"offAll",value:function(){this.listener={}}},{key:"dispatch",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return this.listener[e]?(this.listener[e].map(function(o){o.apply(null,r)}),!0):!1}}]),a}(),de=function(){function a(){s(this,a)}return S(a,null,[{key:"init",value:function(){a.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],hev1:[],hvcC:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var e;for(e in a.types)a.types.hasOwnProperty(e)&&(a.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);a.HDLR_TYPES={video:t,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);a.STTS=a.STSC=a.STCO=o,a.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),a.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),a.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),a.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var l=new Uint8Array([105,115,111,109]),p=new Uint8Array([97,118,99,49]),x=new Uint8Array([0,0,0,1]);a.FTYP=a.box(a.types.ftyp,l,x,l,p),a.DINF=a.box(a.types.dinf,a.box(a.types.dref,i))}},{key:"box",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];for(var o=8,l=r.length,p=l,x;l--;)o+=r[l].byteLength;for(x=new Uint8Array(o),x[0]=o>>24&255,x[1]=o>>16&255,x[2]=o>>8&255,x[3]=o&255,x.set(e,4),l=0,o=8;l<p;++l)x.set(r[l],o),o+=r[l].byteLength;return x}},{key:"hdlr",value:function(e){return a.box(a.types.hdlr,a.HDLR_TYPES[e])}},{key:"mdat",value:function(e){return a.box(a.types.mdat,e)}},{key:"mdhd",value:function(e,t){return a.box(a.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,85,196,0,0]))}},{key:"mdia",value:function(e){return a.box(a.types.mdia,a.mdhd(e.timescale,e.duration),a.hdlr(e.type),a.minf(e))}},{key:"mfhd",value:function(e){return a.box(a.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}},{key:"minf",value:function(e){return e.type==="audio"?a.box(a.types.minf,a.box(a.types.smhd,a.SMHD),a.DINF,a.stbl(e)):a.box(a.types.minf,a.box(a.types.vmhd,a.VMHD),a.DINF,a.stbl(e))}},{key:"moof",value:function(e,t,r){return a.box(a.types.moof,a.mfhd(e),a.traf(r,t))}},{key:"moov",value:function(e,t,r){for(var i=e.length,o=[];i--;)o[i]=a.trak(e[i]);return a.box.apply(null,[a.types.moov,a.mvhd(r,t)].concat(o).concat(a.mvex(e)))}},{key:"mvex",value:function(e){for(var t=e.length,r=[];t--;)r[t]=a.trex(e[t]);return a.box.apply(null,[a.types.mvex].concat(r))}},{key:"mvhd",value:function(e,t){var r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,e>>24&255,e>>16&255,e>>8&255,e&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a.box(a.types.mvhd,r)}},{key:"sdtp",value:function(e){var t=e.samples||[],r=new Uint8Array(4+t.length),i,o;for(o=0;o<t.length;o++)i=t[o].flags,r[o+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return a.box(a.types.sdtp,r)}},{key:"stbl",value:function(e){return a.box(a.types.stbl,a.stsd(e),a.box(a.types.stts,a.STTS),a.box(a.types.stsc,a.STSC),a.box(a.types.stsz,a.STSZ),a.box(a.types.stco,a.STCO))}},{key:"avc1",value:function(e){var t=[],r=[],i,o,l;for(i=0;i<e.sps.length;i++)o=e.sps[i],l=o.byteLength,t.push(l>>>8&255),t.push(l&255),t=t.concat(Array.prototype.slice.call(o));for(i=0;i<e.pps.length;i++)o=e.pps[i],l=o.byteLength,r.push(l>>>8&255),r.push(l&255),r=r.concat(Array.prototype.slice.call(o));var p=a.box(a.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(r))),x=e.width,O=e.height;return a.box(a.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,x>>8&255,x&255,O>>8&255,O&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),p,a.box(a.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"hev1",value:function(e){for(var t=[],r=[],i=[],o,l,p=0;p<(((x=e.vps)===null||x===void 0?void 0:x.length)||0);p++){var x;o=e.vps[p],l=o.byteLength,t.push(l>>>8&255,l&255),t=t.concat(Array.prototype.slice.call(o))}for(var O=0;O<(((V=e.sps)===null||V===void 0?void 0:V.length)||0);O++){var V;o=e.sps[O],l=o.byteLength,r.push(l>>>8&255,l&255),r=r.concat(Array.prototype.slice.call(o))}for(var j=0;j<(((z=e.pps)===null||z===void 0?void 0:z.length)||0);j++){var z;o=e.pps[j],l=o.byteLength,i.push(l>>>8&255,l&255),i=i.concat(Array.prototype.slice.call(o))}var Z=e.hvcC,oe=Z.profile_space,he=Z.tier_flag,ne=Z.profile_idc,ie=Z.profile_compatibility_flags,te=Z.constraint_indicator_flags,_e=Z.level_idc,ge=Z.chroma_format_idc,Ee=a.box(a.types.hvcC,new Uint8Array([1,oe<<6|he<<5|ne,ie>>24&255,ie>>16&255,ie>>8&255,ie&255].concat(W(te),[_e,240,0,252,252|ge,248,248,0,0,3,3,32,0,1],W(t),[33,0,1],W(r),[34,0,1],W(i)))),me=e.width,$=e.height;return a.box(a.types.hev1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,me>>8&255,me&255,$>>8&255,$&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,98,105,110,101,108,112,114,111,46,114,117,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),Ee,a.box(a.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))}},{key:"esds",value:function(e){var t=e.config.byteLength,r=new Uint8Array(26+t+3);return r.set([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5,t]),r.set(e.config,26),r.set([6,1,2],26+t),r}},{key:"mp4a",value:function(e){var t=e.audiosamplerate;return a.box(a.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0]),a.box(a.types.esds,a.esds(e)))}},{key:"stsd",value:function(e){return e.type==="audio"?a.box(a.types.stsd,a.STSD,a.mp4a(e)):e.codec.startsWith("hvc1")?a.box(a.types.stsd,a.STSD,a.hev1(e)):a.box(a.types.stsd,a.STSD,a.avc1(e))}},{key:"tkhd",value:function(e){var t=e.id,r=e.duration,i=e.width,o=e.height,l=e.volume;return a.box(a.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,r&255,0,0,0,0,0,0,0,0,0,0,0,0,l>>0&255,l%1*10>>0&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,o>>8&255,o&255,0,0]))}},{key:"traf",value:function(e,t){var r=a.sdtp(e),i=e.id;return a.box(a.types.traf,a.box(a.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),a.box(a.types.tfdt,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255])),a.trun(e,r.length+16+16+8+16+8+8),r)}},{key:"trak",value:function(e){return e.duration=e.duration||4294967295,a.box(a.types.trak,a.tkhd(e),a.mdia(e))}},{key:"trex",value:function(e){var t=e.id;return a.box(a.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(e,t){var r=e.samples||[],i=r.length,o=12+16*i,l=new Uint8Array(o),p,x,O,V,j,z;for(t+=8+o,l.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),p=0;p<i;p++)x=r[p],O=x.duration,V=x.size,j=x.flags,z=x.cts,l.set([O>>>24&255,O>>>16&255,O>>>8&255,O&255,V>>>24&255,V>>>16&255,V>>>8&255,V&255,j.isLeading<<2|j.dependsOn,j.isDependedOn<<6|j.hasRedundancy<<4|j.paddingValue<<1|j.isNonSync,j.degradPrio&61440,j.degradPrio&15,z>>>24&255,z>>>16&255,z>>>8&255,z&255],12+16*p);return a.box(a.types.trun,l)}},{key:"initSegment",value:function(e,t,r){a.types||a.init();var i=a.moov(e,t,r),o;return o=new Uint8Array(a.FTYP.byteLength+i.byteLength),o.set(a.FTYP),o.set(i,a.FTYP.byteLength),o}}]),a}(),ye=function(){function a(){s(this,a)}return S(a,null,[{key:"samplingRateMap",get:function(){return[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350]}},{key:"getHeaderLength",value:function(e){return e[1]&1?7:9}},{key:"getFrameLength",value:function(e){return(e[3]&3)<<11|e[4]<<3|(e[5]&224)>>>5}},{key:"isAACPattern",value:function(e){return e[0]===255&&(e[1]&240)===240&&(e[1]&6)===0}},{key:"extractAAC",value:function(e){var t=0,r=e.byteLength,i=[],o,l;if(!a.isAACPattern(e))return ae("Invalid ADTS audio format"),{valid:!1};o=a.getHeaderLength(e);for(var p=e.subarray(0,o);t<r;)l=a.getFrameLength(e),i.push(e.subarray(o,l)),e=e.slice(l),t+=l;return{valid:!0,header:p,slices:i}}}]),a}(),ve=1,X=function(a){R(e,a);var n=B(e);function e(){return s(this,e),n.apply(this,arguments)}return S(e,[{key:"flush",value:function(){this.mp4track.len=0,this.mp4track.samples=[]}},{key:"isReady",value:function(){return!this.readyToDecode||!this.samples.length?null:!0}}],[{key:"getTrackID",value:function(){return ve++}}]),e}(le),re=function(a){R(e,a);var n=B(e);function e(t,r,i){var o;return s(this,e),o=n.call(this,"AACRemuxer"),o.frameDuration=i,o.readyToDecode=!1,o.header=null,o.nextDts=0,o.dts=0,o.mp4track={id:X.getTrackID(),type:"audio",channelCount:0,len:0,fragmented:!0,timescale:t,duration:r,samples:[],config:"",codec:""},o.samples=[],o}return S(e,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.header=null,this.mp4track.codec="",this.mp4track.channelCount="",this.mp4track.config="",this.mp4track.timescale=this.timescale,this.nextDts=0,this.dts=0}},{key:"feed",value:function(r,i){var o=ye.extractAAC(r),l=o.valid,p=o.header,x=o.slices;return this.header||(this.header=p),l&&x.length>0?(this.remux(this.getAudioFrames(x,i)),!0):(ae("Failed to extract audio data from:",r),this.dispatch("outOfData"),!1)}},{key:"getAudioFrames",value:function(r,i){var o=[],l=0,p=0,x=P(r),O;try{for(x.s();!(O=x.n()).done;){var V=O.value;o.push({units:V})}}catch(j){x.e(j)}finally{x.f()}return l=i?i/o.length|0:this.frameDuration,p=i?i-l*o.length:0,o.map(function(j){j.duration=l,p>0&&(j.duration++,p--)}),o}},{key:"remux",value:function(r){if(r.length>0)for(var i=0;i<r.length;i++){var o=r[i],l=o.units,p=l.byteLength;this.samples.push({units:l,size:p,duration:o.duration}),this.mp4track.len+=p,this.readyToDecode||this.setAACConfig()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),i=0,o=this.mp4track.samples,l,p;for(this.dts=this.nextDts;this.samples.length;){var x=this.samples.shift();if(x.units,p=x.duration,p<=0){Q("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(p)),this.mp4track.len-=x.size;continue}this.nextDts+=p,l={size:x.size,duration:p,cts:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},r.set(x.units,i),i+=x.size,o.push(l)}return o.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"setAACConfig",value:function(){var r,i,o,l=new Uint8Array(2);this.header&&(r=((this.header[2]&192)>>>6)+1,i=(this.header[2]&60)>>>2,o=(this.header[2]&1)<<2,o|=(this.header[3]&192)>>>6,l[0]=r<<3,l[0]|=(i&14)>>1,l[1]|=(i&1)<<7,l[1]|=o<<3,this.mp4track.codec="mp4a.40."+r,this.mp4track.channelCount=o,this.mp4track.config=l,this.readyToDecode=!0)}}]),e}(X),fe=function(){function a(n){s(this,a),this.data=n,this.index=0,this.bitLength=n.byteLength*8}return S(a,[{key:"setData",value:function(e){this.data=e,this.index=0,this.bitLength=e.byteLength*8}},{key:"bitsAvailable",get:function(){return this.bitLength-this.index}},{key:"skipBits",value:function(e){if(this.bitsAvailable<e)return!1;this.index+=e}},{key:"readBits",value:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this.getBits(e,this.index,t);return r}},{key:"getBits",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(this.bitsAvailable<e)return 0;var i=t%8,o=this.data[t/8|0]&255>>>i,l=8-i;if(l>=e)return r&&(this.index+=e),o>>l-e;r&&(this.index+=l);var p=e-l;return o<<p|this.getBits(p,t+l,r)}},{key:"skipLZ",value:function(){var e;for(e=0;e<this.bitLength-this.index;++e)if(this.getBits(1,this.index+e,!1)!==0)return this.index+=e,e;return e}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"readUEG",value:function(){var e=this.skipLZ();return this.readBits(e+1)-1}},{key:"readEG",value:function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}},{key:"readBoolean",value:function(){return this.readBits(1)===1}},{key:"readUByte",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.readBits(e*8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",value:function(){return this.readBits(32)}}]),a}(),xe=function(){function a(){s(this,a)}return S(a,null,[{key:"extractNALu",value:function(e){for(var t=0,r=e.byteLength,i=[],o=0,l=0;t<r;){var p=e[t++];if(p===0)l++;else if(p===1&&l>=2){var x=l+1;o!==t-x&&i.push(e.subarray(o,t-x)),o=t,l=0}else l=0}var O=null;return o<r&&(O=e.subarray(o,r)),[i,O]}},{key:"skipScalingList",value:function(e,t){for(var r=8,i=8,o,l=0;l<t;l++)i!==0&&(o=e.readEG(),i=(r+o+256)%256),r=i===0?r:i}},{key:"readSPS",value:function(e){var t=new fe(e),r=0,i=0,o=0,l=0,p=1,x,O,V,j,z,Z,oe=0;t.readUByte();for(var he=[],ne=1,ie=e.byteLength,te=ne;te<ie;te++)te+2<ie&&t.readBits(24,!1)===3?(he.push(t.readBits(8)),he.push(t.readBits(8)),te+=2,t.readBits(8)):he.push(t.readBits(8));if(t.setData(new Uint8Array(he)),x=t.readUByte(),t.readBits(5),t.skipBits(3),t.readUByte(),t.skipUEG(),x===100||x===110||x===122||x===244||x===44||x===83||x===86||x===118||x===128){var _e=t.readUEG();if(_e===3&&t.skipBits(1),t.skipUEG(),t.skipUEG(),t.skipBits(1),t.readBoolean()){Z=_e!==3?8:12;for(var ge=0;ge<Z;++ge)t.readBoolean()&&(ge<6?a.skipScalingList(t,16):a.skipScalingList(t,64))}}t.skipUEG();var Ee=t.readUEG();if(Ee===0)t.readUEG();else if(Ee===1){t.skipBits(1),t.skipEG(),t.skipEG(),O=t.readUEG();for(var me=0;me<O;++me)t.skipEG()}if(t.skipUEG(),t.skipBits(1),V=t.readUEG(),j=t.readUEG(),z=t.readBits(1),z===0&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(r=t.readUEG(),i=t.readUEG(),o=t.readUEG(),l=t.readUEG()),t.readBoolean()){if(t.readBoolean()){var $,Pe=t.readUByte();switch(Pe){case 1:$=[1,1];break;case 2:$=[12,11];break;case 3:$=[10,11];break;case 4:$=[16,11];break;case 5:$=[40,33];break;case 6:$=[24,11];break;case 7:$=[20,11];break;case 8:$=[32,11];break;case 9:$=[80,33];break;case 10:$=[18,11];break;case 11:$=[15,11];break;case 12:$=[64,33];break;case 13:$=[160,99];break;case 14:$=[4,3];break;case 15:$=[3,2];break;case 16:$=[2,1];break;case 255:{$=[t.readUByte()<<8|t.readUByte(),t.readUByte()<<8|t.readUByte()];break}}$&&$[0]>0&&$[1]>0&&(p=$[0]/$[1])}if(t.readBoolean()&&t.skipBits(1),t.readBoolean()&&(t.skipBits(4),t.readBoolean()&&t.skipBits(24)),t.readBoolean()&&(t.skipUEG(),t.skipUEG()),t.readBoolean()){var Me=t.readUInt(),Ie=t.readUInt(),Te=t.readBoolean(),Oe=Ie/(2*Me);Te&&(oe=Oe)}}return{fps:oe>0?oe:void 0,width:Math.ceil(((V+1)*16-r*2-i*2)*p),height:(2-z)*(j+1)*16-(z?2:4)*(o+l)}}}]),a}(),ce=function(){function a(n){s(this,a),this.payload=n,this.nri=(this.payload[0]&96)>>5,this.nalUnitType=this.payload[0]&31,this._sliceType=null,this._isFirstSlice=!1}return S(a,[{key:"toString",value:function(){return"".concat(a.TYPES[this.type()]||"UNKNOWN",": NRI: ").concat(this.getNri())}},{key:"getNri",value:function(){return this.nri}},{key:"type",value:function(){return this.nalUnitType}},{key:"isKeyframe",get:function(){return this.nalUnitType===a.IDR}},{key:"isVCL",get:function(){return this.nalUnitType==a.IDR||this.nalUnitType==a.NDR}},{key:"parseHeader",value:function(){var e=new fe(this.getPayload());e.readUByte(),this._isFirstSlice=e.readUEG()===0,this._sliceType=e.readUEG()}},{key:"isFirstSlice",get:function(){return this._isFirstSlice||this.parseHeader(),this._isFirstSlice}},{key:"sliceType",get:function(){return this._sliceType||this.parseHeader(),this._sliceType}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var e=new Uint8Array(this.getSize()),t=new DataView(e.buffer);return t.setUint32(0,this.getSize()-4),e.set(this.getPayload(),4),e}}],[{key:"NDR",get:function(){return 1}},{key:"IDR",get:function(){return 5}},{key:"SEI",get:function(){return 6}},{key:"SPS",get:function(){return 7}},{key:"PPS",get:function(){return 8}},{key:"AUD",get:function(){return 9}},{key:"TYPES",get:function(){var e;return e={},A(e,a.IDR,"IDR"),A(e,a.SEI,"SEI"),A(e,a.SPS,"SPS"),A(e,a.PPS,"PPS"),A(e,a.NDR,"NDR"),A(e,a.AUD,"AUD"),e}}]),a}();function m(a,n){var e=new Uint8Array((a.byteLength|0)+(n.byteLength|0));return e.set(a,0),e.set(n,a.byteLength|0),e}function v(a){var n,e,t,r="";return n=Math.floor(a),e=parseInt(n/3600,10)%24,t=parseInt(n/60,10)%60,n=n<0?0:n%60,e>0&&(r+=(e<10?"0"+e:e)+":"),r+=(t<10?"0"+t:t)+":"+(n<10?"0"+n:n),r}var I=function(a){R(e,a);var n=B(e);function e(t,r,i){var o;return s(this,e),o=n.call(this,"H264Remuxer"),o.frameDuration=i,o.readyToDecode=!1,o.nextDts=0,o.dts=0,o.mp4track={id:X.getTrackID(),type:"video",len:0,fragmented:!0,sps:"",pps:"",fps:30,width:0,height:0,timescale:t,duration:r,samples:[]},o.samples=[],o.remainingData=new Uint8Array,o.kfCounter=0,o.pendingUnits={},o}return S(e,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.sps="",this.mp4track.pps="",this.nextDts=0,this.dts=0,this.remainingData=new Uint8Array,this.kfCounter=0,this.pendingUnits={}}},{key:"feed",value:function(r,i,o){var l=[],p;r=m(this.remainingData,r);var x=xe.extractNALu(r),O=k(x,2);return l=O[0],p=O[1],this.remainingData=p||new Uint8Array,l.length>0?(this.remux(this.getVideoFrames(l,i,o)),!0):(ae("Failed to extract any NAL units from video data:",p),this.dispatch("outOfData"),!1)}},{key:"getVideoFrames",value:function(r,i,o){var l=this,p=[],x=[],O=0,V=0,j=!1,z=!1;this.pendingUnits.units&&(p=this.pendingUnits.units,z=this.pendingUnits.vcl,j=this.pendingUnits.keyFrame,this.pendingUnits={});var Z=P(r),oe;try{for(Z.s();!(oe=Z.n()).done;){var he=oe.value,ne=new ce(he);p.length&&z&&(ne.isFirstSlice||!ne.isVCL)&&(x.push({units:p,keyFrame:j}),p=[],j=!1,z=!1),p.push(ne),j=j||ne.isKeyframe,z=z||ne.isVCL}}catch(te){Z.e(te)}finally{Z.f()}if(p.length)if(!i)this.pendingUnits={units:p,keyFrame:j,vcl:z};else if(z)x.push({units:p,keyFrame:j});else{var ie=x.length-1;ie>=0&&(x[ie].units=x[ie].units.concat(p))}return O=i?i/x.length|0:this.frameDuration,V=i?i-O*x.length:0,x.map(function(te){te.duration=O,te.compositionTimeOffset=o,V>0&&(te.duration++,V--),l.kfCounter++,te.keyFrame&&l.dispatch("keyframePosition",l.kfCounter*O/1e3)}),Q("jmuxer: No. of H264 frames of the last chunk: ".concat(x.length)),x}},{key:"remux",value:function(r){var i=P(r),o;try{for(i.s();!(o=i.n()).done;){var l=o.value,p=[],x=0,O=P(l.units),V;try{for(O.s();!(V=O.n()).done;){var j=V.value;this.parseNAL(j)&&(p.push(j),x+=j.getSize())}}catch(z){O.e(z)}finally{O.f()}p.length>0&&this.readyToDecode&&(this.mp4track.len+=x,this.samples.push({units:p,size:x,keyFrame:l.keyFrame,duration:l.duration,compositionTimeOffset:l.compositionTimeOffset}))}}catch(z){i.e(z)}finally{i.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),i=0,o=this.mp4track.samples,l,p;for(this.dts=this.nextDts;this.samples.length;){var x=this.samples.shift(),O=x.units;if(p=x.duration,p<=0){Q("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(p)),this.mp4track.len-=x.size;continue}this.nextDts+=p,l={size:x.size,duration:p,cts:x.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:x.keyFrame?0:1,dependsOn:x.keyFrame?2:1}};var V=P(O),j;try{for(V.s();!(j=V.n()).done;){var z=j.value;r.set(z.getData(),i),i+=z.getSize()}}catch(Z){V.e(Z)}finally{V.f()}o.push(l)}return o.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"parseSPS",value:function(r){var i=xe.readSPS(new Uint8Array(r));this.mp4track.fps=i.fps||this.mp4track.fps,this.mp4track.width=i.width,this.mp4track.height=i.height,this.mp4track.sps=[new Uint8Array(r)],this.mp4track.codec="avc1.";for(var o=new DataView(r.buffer,r.byteOffset+1,4),l=0;l<3;++l){var p=o.getUint8(l).toString(16);p.length<2&&(p="0"+p),this.mp4track.codec+=p}}},{key:"parsePPS",value:function(r){this.mp4track.pps=[new Uint8Array(r)]}},{key:"parseNAL",value:function(r){if(!r)return!1;if(r.isVCL)return!0;var i=!1;switch(r.type()){case ce.PPS:this.mp4track.pps||this.parsePPS(r.getPayload()),i=!0;break;case ce.SPS:this.mp4track.sps||this.parseSPS(r.getPayload()),i=!0;break;case ce.AUD:Q("AUD - ignoing");break;case ce.SEI:Q("SEI - ignoing");break}return!this.readyToDecode&&this.mp4track.pps&&this.mp4track.sps&&(this.readyToDecode=!0),i}}]),e}(X),K=function(){function a(){s(this,a)}return S(a,null,[{key:"extractNALu",value:function(e){for(var t=0,r=e.byteLength,i=[],o=0,l=0;t<r;){var p=e[t++];if(p===0)l++;else if(p===1&&l>=2){var x=l+1;o!==t-x&&i.push(e.subarray(o,t-x)),o=t,l=0}else l=0}var O=null;return o<r&&(O=e.subarray(o,r)),[i,O]}},{key:"removeEmulationPreventionBytes",value:function(e){for(var t=[],r=0,i=0;i<e.length;i++){var o=e[i];if(r===2&&o===3){r=0;continue}t.push(o),o===0?r++:r=0}return new Uint8Array(t)}},{key:"readSPS",value:function(e){var t=new fe(e);t.readUByte(),t.readUByte(),t.readBits(4),t.readBits(3),t.readBits(1);for(var r=t.readBits(2),i=t.readBits(1),o=t.readBits(5),l=t.readUInt(),p=new Uint8Array(6),x=0;x<6;x++)p[x]=t.readUByte();var O=t.readUByte();t.readUEG();var V=t.readUEG();V===3&&t.readBits(1);var j=t.readUEG(),z=t.readUEG(),Z=t.readBoolean(),oe=0,he=0,ne=0,ie=0;Z&&(oe=t.readUEG(),he=t.readUEG(),ne=t.readUEG(),ie=t.readUEG());var te=null,_e=t.readBoolean();if(_e){var ge=t.readBoolean();if(ge){var Ee=t.readUByte();Ee===255&&(t.readUShort(),t.readUShort())}var me=t.readBoolean();me&&t.readBoolean();var $=t.readBoolean();if($){t.readBits(3),t.readBoolean();var Pe=t.readBoolean();Pe&&(t.readUByte(),t.readUByte(),t.readUByte())}var Me=t.readBoolean();Me&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean();var Ie=t.readBoolean();if(Ie){var Te=t.readUInt(),Oe=t.readUInt();t.readBoolean(),Te&&(te=Oe/(2*Te))}}var Ot=V===1||V===2?2:1,Nt=V===1?2:1,jt=j-Ot*(he+oe),qt=z-Nt*(ne+ie);return{width:jt,height:qt,profile_space:r,tier_flag:i,profile_idc:o,profile_compatibility_flags:l,constraint_indicator_flags:p,level_idc:O,chroma_format_idc:V,fps:te}}}]),a}(),J=function(){function a(n){s(this,a),this.payload=n,this.nalUnitType=(n[0]&126)>>1,this.nuhLayerId=(n[0]&1)<<5|(n[1]&248)>>3,this.nuhTemporalIdPlus1=n[1]&7,this._isFirstSlice=null,this._sliceType=null}return S(a,[{key:"toString",value:function(){return"".concat(a.TYPES[this.type()]||"UNKNOWN ("+this.type()+")",": Layer: ").concat(this.nuhLayerId,", Temporal Id: ").concat(this.nuhTemporalIdPlus1)}},{key:"type",value:function(){return this.nalUnitType}},{key:"isKeyframe",get:function(){return[a.IDR_W_RADL,a.IDR_N_LP,a.CRA].includes(this.nalUnitType)}},{key:"isVCL",get:function(){return this.nalUnitType<=31}},{key:"parseHeader",value:function(){var e=new fe(this.getPayload());e.readUByte(),e.readUByte(),this._isFirstSlice=e.readBoolean(),this.isKeyframe&&e.readBits(1),e.readUEG(),this._sliceType=e.readUEG()}},{key:"isFirstSlice",get:function(){return this._isFirstSlice||this.parseHeader(),this._isFirstSlice}},{key:"sliceType",get:function(){return this._sliceType||this.parseHeader(),this._sliceType}},{key:"getPayload",value:function(){return this.payload}},{key:"getPayloadSize",value:function(){return this.payload.byteLength}},{key:"getSize",value:function(){return 4+this.getPayloadSize()}},{key:"getData",value:function(){var e=new Uint8Array(this.getSize()),t=new DataView(e.buffer);return t.setUint32(0,this.getSize()-4),e.set(this.getPayload(),4),e}}],[{key:"TRAIL_N",get:function(){return 0}},{key:"TRAIL_R",get:function(){return 1}},{key:"IDR_W_RADL",get:function(){return 19}},{key:"IDR_N_LP",get:function(){return 20}},{key:"CRA",get:function(){return 21}},{key:"VPS",get:function(){return 32}},{key:"SPS",get:function(){return 33}},{key:"PPS",get:function(){return 34}},{key:"AUD",get:function(){return 35}},{key:"SEI",get:function(){return 39}},{key:"SEI2",get:function(){return 40}},{key:"TYPES",get:function(){var e;return e={},A(e,a.TRAIL_N,"TRAIL_N"),A(e,a.TRAIL_R,"TRAIL_R"),A(e,a.IDR_W_RADL,"IDR"),A(e,a.IDR_N_LP,"IDR2"),A(e,a.CRA,"CRA"),A(e,a.VPS,"VPS"),A(e,a.SPS,"SPS"),A(e,a.PPS,"PPS"),A(e,a.AUD,"AUD"),A(e,a.SEI,"SEI"),A(e,a.SEI2,"SEI2"),e}}]),a}(),u=function(a){R(e,a);var n=B(e);function e(t,r,i){var o;return s(this,e),o=n.call(this,"H264Remuxer"),o.frameDuration=i,o.readyToDecode=!1,o.nextDts=0,o.dts=0,o.mp4track={id:X.getTrackID(),type:"video",len:0,fragmented:!0,vps:"",sps:"",pps:"",hvcC:{},fps:30,width:0,height:0,timescale:t,duration:r,samples:[]},o.samples=[],o.remainingData=new Uint8Array,o.kfCounter=0,o.pendingUnits={},o}return S(e,[{key:"resetTrack",value:function(){this.readyToDecode=!1,this.mp4track.vps="",this.mp4track.sps="",this.mp4track.pps="",this.mp4track.hvcC={},this.nextDts=0,this.dts=0,this.remainingData=new Uint8Array,this.kfCounter=0,this.pendingUnits={}}},{key:"feed",value:function(r,i,o){var l=[],p;r=m(this.remainingData,r);var x=K.extractNALu(r),O=k(x,2);return l=O[0],p=O[1],this.remainingData=p||new Uint8Array,l.length>0?(this.remux(this.getVideoFrames(l,i,o)),!0):(ae("Failed to extract any NAL units from video data:",p),this.dispatch("outOfData"),!1)}},{key:"getVideoFrames",value:function(r,i,o){var l=this,p=[],x=[],O=0,V=0,j=!1,z=!1;this.pendingUnits.units&&(p=this.pendingUnits.units,z=this.pendingUnits.vcl,j=this.pendingUnits.keyFrame,this.pendingUnits={});var Z=P(r),oe;try{for(Z.s();!(oe=Z.n()).done;){var he=oe.value,ne=new J(he);p.length&&z&&(ne.isFirstSlice||!ne.isVCL)&&(x.push({units:p,keyFrame:j}),p=[],j=!1,z=!1),p.push(ne),j=j||ne.isKeyframe,z=z||ne.isVCL}}catch(te){Z.e(te)}finally{Z.f()}if(p.length)if(!i)this.pendingUnits={units:p,keyFrame:j,vcl:z};else if(z)x.push({units:p,keyFrame:j});else{var ie=x.length-1;ie>=0&&(x[ie].units=x[ie].units.concat(p))}return O=i?i/x.length|0:this.frameDuration,V=i?i-O*x.length:0,x.map(function(te){te.duration=O,te.compositionTimeOffset=o,V>0&&(te.duration++,V--),l.kfCounter++,te.keyFrame&&l.dispatch("keyframePosition",l.kfCounter*O/1e3)}),Q("jmuxer: No. of H265 frames of the last chunk: ".concat(x.length)),x}},{key:"remux",value:function(r){var i=P(r),o;try{for(i.s();!(o=i.n()).done;){var l=o.value,p=[],x=0,O=P(l.units),V;try{for(O.s();!(V=O.n()).done;){var j=V.value;this.parseNAL(j)&&(p.push(j),x+=j.getSize())}}catch(z){O.e(z)}finally{O.f()}p.length>0&&this.readyToDecode&&(this.mp4track.len+=x,this.samples.push({units:p,size:x,keyFrame:l.keyFrame,duration:l.duration,compositionTimeOffset:l.compositionTimeOffset}))}}catch(z){i.e(z)}finally{i.f()}}},{key:"getPayload",value:function(){if(!this.isReady())return null;var r=new Uint8Array(this.mp4track.len),i=0,o=this.mp4track.samples,l,p;for(this.dts=this.nextDts;this.samples.length;){var x=this.samples.shift(),O=x.units;if(p=x.duration,p<=0){Q("remuxer: invalid sample duration at DTS: ".concat(this.nextDts," :").concat(p)),this.mp4track.len-=x.size;continue}this.nextDts+=p,l={size:x.size,duration:p,cts:x.compositionTimeOffset||0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,isNonSync:x.keyFrame?0:1,dependsOn:x.keyFrame?2:1}};var V=P(O),j;try{for(V.s();!(j=V.n()).done;){var z=j.value;r.set(z.getData(),i),i+=z.getSize()}}catch(Z){V.e(Z)}finally{V.f()}o.push(l)}return o.length?new Uint8Array(r.buffer,0,this.mp4track.len):null}},{key:"parseSPS",value:function(r){this.mp4track.sps=[new Uint8Array(r)],r=K.removeEmulationPreventionBytes(r);var i=K.readSPS(new Uint8Array(r));this.mp4track.fps=i.fps||this.mp4track.fps,this.mp4track.width=i.width,this.mp4track.height=i.height,this.mp4track.codec="hvc1.".concat(i.profile_idc,".").concat(i.profile_compatibility_flags.toString(16))+".L".concat(i.level_idc).concat(i.tier_flag?"H":"L")+".".concat(i.constraint_indicator_flags.map(function(o){return o.toString(16)}).join(".").toUpperCase()),this.mp4track.hvcC={profile_space:i.profile_space,tier_flag:i.tier_flag,profile_idc:i.profile_idc,profile_compatibility_flags:i.profile_compatibility_flags,constraint_indicator_flags:i.constraint_indicator_flags,level_idc:i.level_idc,chroma_format_idc:i.chroma_format_idc}}},{key:"parsePPS",value:function(r){this.mp4track.pps=[r]}},{key:"parseVPS",value:function(r){this.mp4track.vps=[r]}},{key:"parseNAL",value:function(r){if(!r)return!1;if(r.isVCL)return!0;var i=!1;switch(r.type()){case J.VPS:this.mp4track.vps||this.parseVPS(r.getPayload()),i=!0;break;case J.SPS:this.mp4track.sps||this.parseSPS(r.getPayload()),i=!0;break;case J.PPS:this.mp4track.pps||this.parsePPS(r.getPayload()),i=!0;break;case J.AUD:Q("AUD - ignoing");break;case J.SEI:case J.SEI2:Q("SEI - ignoing");break}return!this.readyToDecode&&this.mp4track.vps&&this.mp4track.sps&&this.mp4track.pps&&(this.readyToDecode=!0),i}}]),e}(X),f=function(a){R(e,a);var n=B(e);function e(t,r,i,o){var l;return s(this,e),l=n.call(this,"remuxer"),l.videoCodec=i,l.frameDuration=o,l.initialized=!1,l.tracks={},l.seq=1,l.env=t,l.timescale=1e3,l.mediaDuration=r?4294967295:0,l}return S(e,[{key:"addTrack",value:function(r){var i=this;if((r==="video"||r==="both")&&(this.videoCodec=="H265"?this.tracks.video=new u(this.timescale,this.mediaDuration,this.frameDuration):this.tracks.video=new I(this.timescale,this.mediaDuration,this.frameDuration),this.tracks.video.on("outOfData",function(){i.dispatch("missingVideoFrames")}),this.tracks.video.on("keyframePosition",function(l){i.dispatch("keyframePosition",l)})),r==="audio"||r==="both"){var o=new re(this.timescale,this.mediaDuration,this.frameDuration);this.tracks.audio=o,this.tracks.video.on("outOfData",function(){i.dispatch("missingAudioFrames")})}}},{key:"reset",value:function(){for(var r in this.tracks)this.tracks[r].resetTrack();this.initialized=!1}},{key:"destroy",value:function(){this.tracks={},this.offAll()}},{key:"flush",value:function(){if(!this.initialized){if(!this.isReady())return;this.dispatch("ready"),this.initSegment(),this.initialized=!0}for(var r in this.tracks){var i=this.tracks[r],o=i.getPayload();if(o&&o.byteLength){var l=de.moof(this.seq,i.dts,i.mp4track),p=de.mdat(o),x=m(l,p),O={type:r,payload:x,dts:i.dts};r==="video"&&(O.fps=i.mp4track.fps),this.dispatch("buffer",O);var V=v(i.dts/this.timescale);Q("put segment (".concat(r,"): dts: ").concat(i.dts," frames: ").concat(i.mp4track.samples.length," second: ").concat(V)),i.flush(),this.seq++}}}},{key:"initSegment",value:function(){var r=[];for(var i in this.tracks){var o=this.tracks[i];if(this.env=="browser"){var l={type:i,payload:de.initSegment([o.mp4track],this.mediaDuration,this.timescale)};this.dispatch("buffer",l)}else r.push(o.mp4track)}if(this.env=="node"){var p={type:"all",payload:de.initSegment(r,this.mediaDuration,this.timescale)};this.dispatch("buffer",p)}Q("Initial segment generated.")}},{key:"isReady",value:function(){for(var r in this.tracks)if(!this.tracks[r].readyToDecode||!this.tracks[r].samples.length)return!1;return!0}},{key:"feed",value:function(r){var i=!1;if(r.video&&this.tracks.video&&(i|=this.tracks.video.feed(r.video,r.duration,r.compositionTimeOffset)),r.audio&&this.tracks.audio&&(i|=this.tracks.audio.feed(r.audio,r.duration)),!i){ae("Input object must have video and/or audio property. Make sure it is a valid typed array");return}this.flush()}}]),e}(le),F=function(a){R(e,a);var n=B(e);function e(t,r){var i;return s(this,e),i=n.call(this,"buffer"),i.type=r,i.queue=new Uint8Array,i.cleaning=!1,i.pendingCleaning=0,i.cleanOffset=30,i.cleanRanges=[],i.sourceBuffer=t,i.sourceBuffer.addEventListener("updateend",function(){if(i.pendingCleaning>0&&(i.initCleanup(i.pendingCleaning),i.pendingCleaning=0),i.cleaning=!1,i.cleanRanges.length){i.doCleanup();return}}),i.sourceBuffer.addEventListener("error",function(){i.dispatch("error",{type:i.type,name:"buffer",error:"buffer error"})}),i}return S(e,[{key:"destroy",value:function(){this.queue=null,this.sourceBuffer=null,this.offAll()}},{key:"doCleanup",value:function(){if(!this.cleanRanges.length){this.cleaning=!1;return}var r=this.cleanRanges.shift();Q("".concat(this.type," remove range [").concat(r[0]," - ").concat(r[1],")")),this.cleaning=!0,this.sourceBuffer.remove(r[0],r[1])}},{key:"initCleanup",value:function(r){try{if(this.sourceBuffer.updating){this.pendingCleaning=r;return}if(this.sourceBuffer.buffered&&this.sourceBuffer.buffered.length&&!this.cleaning){for(var i=0;i<this.sourceBuffer.buffered.length;++i){var o=this.sourceBuffer.buffered.start(i),l=this.sourceBuffer.buffered.end(i);r-o>this.cleanOffset&&(l=r-this.cleanOffset,o<l&&this.cleanRanges.push([o,l]))}this.doCleanup()}}catch(p){ae("Error occured while cleaning ".concat(this.type," buffer - ").concat(p.name,": ").concat(p.message))}}},{key:"doAppend",value:function(){if(this.queue.length&&!(!this.sourceBuffer||this.sourceBuffer.updating))try{this.sourceBuffer.appendBuffer(this.queue),this.queue=new Uint8Array}catch(i){var r="unexpectedError";i.name==="QuotaExceededError"?(Q("".concat(this.type," buffer quota full")),r="QuotaExceeded"):(ae("Error occured while appending ".concat(this.type," buffer - ").concat(i.name,": ").concat(i.message)),r="InvalidStateError"),this.dispatch("error",{type:this.type,name:r,error:"buffer error"})}}},{key:"feed",value:function(r){this.queue=m(this.queue,r)}}]),e}(le),G=function(a){R(e,a);var n=B(e);function e(t){var r;s(this,e),r=n.call(this,"jmuxer"),r.isReset=!1;var i={node:"",mode:"both",videoCodec:"H264",flushingTime:500,maxDelay:500,clearBuffer:!0,fps:30,readFpsFromTrack:!1,debug:!1,onReady:function(){},onData:function(){},onError:function(){},onUnsupportedCodec:function(){},onMissingVideoFrames:function(){},onMissingAudioFrames:function(){},onKeyframePosition:function(){},onLoggerLog:console.log,onLoggerErr:console.error};return r.options=Object.assign({},i,t),r.env=(typeof process>"u"?"undefined":Y(process))==="object"&&typeof window>"u"?"node":"browser",r.options.debug&&pe(r.options.onLoggerLog,r.options.onLoggerErr),r.options.fps||(r.options.fps=30),r.frameDuration=1e3/r.options.fps|0,r.remuxController=new f(r.env,t.live,r.options.videoCodec,r.frameDuration),r.remuxController.addTrack(r.options.mode),r.initData(),r.remuxController.on("buffer",r.onBuffer.bind(w(r))),r.env=="browser"&&(r.remuxController.on("ready",r.createBuffer.bind(w(r))),r.initBrowser()),r.remuxController.on("missingVideoFrames",function(){typeof r.options.onMissingVideoFrames=="function"&&r.options.onMissingVideoFrames.call(null)}),r.remuxController.on("missingAudioFrames",function(){typeof r.options.onMissingAudioFrames=="function"&&r.options.onMissingAudioFrames.call(null)}),r.clearBuffer&&r.remuxController.on("keyframePosition",function(o){r.kfPosition.push(o)}),typeof r.options.onKeyframePosition=="function"&&r.remuxController.on("keyframePosition",function(o){r.options.onKeyframePosition.call(null,o)}),r}return S(e,[{key:"initData",value:function(){this.lastCleaningTime=Date.now(),this.kfPosition=[],this.pendingUnits={},this.remainingData=new Uint8Array,this.startInterval()}},{key:"initBrowser",value:function(){typeof this.options.node=="string"&&this.options.node==""&&ae("no video element were found to render, provide a valid video element"),this.node=typeof this.options.node=="string"?document.getElementById(this.options.node):this.options.node,this.mseReady=!1,this.setupMSE()}},{key:"createStream",value:function(){var r=this.feed.bind(this),i=this.destroy.bind(this);return this.stream=new E.Duplex({writableObjectMode:!0,read:function(l){},write:function(l,p,x){r(l),x()},final:function(l){i(),l()}}),this.stream}},{key:"setupMSE",value:function(){if(window.MediaSource=window.MediaSource||window.WebKitMediaSource||window.ManagedMediaSource,!window.MediaSource)throw"Oops! Browser does not support Media Source Extension or Managed Media Source (IOS 17+).";if(this.isMSESupported=!!window.MediaSource,this.mediaSource=new window.MediaSource,this.url=URL.createObjectURL(this.mediaSource),window.MediaSource===window.ManagedMediaSource)try{this.node.removeAttribute("src"),this.node.disableRemotePlayback=!0;var r=document.createElement("source");r.type="video/mp4",r.src=this.url,this.node.appendChild(r),this.node.load()}catch{this.node.src=this.url}else this.node.src=this.url;this.mseEnded=!1,this.mediaSource.addEventListener("sourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("sourceclose",this.onMSEClose.bind(this)),this.mediaSource.addEventListener("webkitsourceopen",this.onMSEOpen.bind(this)),this.mediaSource.addEventListener("webkitsourceclose",this.onMSEClose.bind(this))}},{key:"endMSE",value:function(){if(!this.mseEnded)try{this.mseEnded=!0,this.mediaSource.endOfStream()}catch{ae("mediasource is not available to end")}}},{key:"feed",value:function(r){!r||!this.remuxController||(r.duration=r.duration?parseInt(r.duration):0,this.remuxController.feed(r))}},{key:"destroy",value:function(){if(this.stopInterval(),this.stream&&(this.remuxController.flush(),this.stream.push(null),this.stream=null),this.remuxController&&(this.remuxController.destroy(),this.remuxController=null),this.bufferControllers){for(var r in this.bufferControllers)this.bufferControllers[r].destroy();this.bufferControllers=null,this.endMSE()}this.node=!1,this.mseReady=!1,this.videoStarted=!1,this.mediaSource=null}},{key:"reset",value:function(){if(this.stopInterval(),this.isReset=!0,this.node.pause(),this.remuxController&&this.remuxController.reset(),this.bufferControllers){for(var r in this.bufferControllers)this.bufferControllers[r].destroy();this.bufferControllers=null,this.endMSE()}this.initData(),this.env=="browser"&&this.initBrowser(),Q("JMuxer was reset")}},{key:"createBuffer",value:function(){if(!(!this.mseReady||!this.remuxController||!this.remuxController.isReady()||this.bufferControllers)){this.bufferControllers={};for(var r in this.remuxController.tracks){var i=this.remuxController.tracks[r];if(!e.isSupported("".concat(r,'/mp4; codecs="').concat(i.mp4track.codec,'"')))return ae("Browser does not support codec: ".concat(r,'/mp4; codecs="').concat(i.mp4track.codec,'"')),typeof this.options.onUnsupportedCodec=="function"&&this.options.onUnsupportedCodec.call(null,i.mp4track.codec),!1;var o=this.mediaSource.addSourceBuffer("".concat(r,'/mp4; codecs="').concat(i.mp4track.codec,'"'));this.bufferControllers[r]=new F(o,r),this.bufferControllers[r].on("error",this.onBufferError.bind(this))}}}},{key:"startInterval",value:function(){var r=this;this.interval=setInterval(function(){r.options.flushingTime?r.applyAndClearBuffer():r.bufferControllers&&r.cancelDelay()},this.options.flushingTime||1e3)}},{key:"stopInterval",value:function(){this.interval&&clearInterval(this.interval)}},{key:"cancelDelay",value:function(){if(this.node.buffered&&this.node.buffered.length>0&&!this.node.seeking){var r=this.node.buffered.end(0);r-this.node.currentTime>this.options.maxDelay/1e3&&(Q("delay"),this.node.paused&&this.node.play().catch(ae),this.node.currentTime=r-.001)}}},{key:"releaseBuffer",value:function(){for(var r in this.bufferControllers)this.bufferControllers[r].doAppend()}},{key:"applyAndClearBuffer",value:function(){this.bufferControllers&&(this.releaseBuffer(),this.clearBuffer())}},{key:"getSafeClearOffsetOfBuffer",value:function(r){for(var i=this.options.mode==="audio"&&r||0,o,l=0;l<this.kfPosition.length&&!(this.kfPosition[l]>=r);l++)o=this.kfPosition[l];return o&&(this.kfPosition=this.kfPosition.filter(function(p){return p<o&&(i=p),p>=o})),i}},{key:"clearBuffer",value:function(){if(this.options.clearBuffer&&Date.now()-this.lastCleaningTime>1e4){for(var r in this.bufferControllers){var i=this.getSafeClearOffsetOfBuffer(this.node.currentTime);this.bufferControllers[r].initCleanup(i)}this.lastCleaningTime=Date.now()}}},{key:"onBuffer",value:function(r){this.options.readFpsFromTrack&&typeof r.fps<"u"&&this.options.fps!=r.fps&&(this.options.fps=r.fps,this.frameDuration=Math.ceil(1e3/r.fps),Q("JMuxer changed FPS to ".concat(r.fps," from track data"))),this.env=="browser"?this.bufferControllers&&this.bufferControllers[r.type]&&this.bufferControllers[r.type].feed(r.payload):this.stream&&this.stream.push(r.payload),this.options.onData&&this.options.onData(r.payload),this.options.flushingTime===0&&this.applyAndClearBuffer()}},{key:"onMSEOpen",value:function(){this.mseReady=!0,URL.revokeObjectURL(this.url),typeof this.options.onReady=="function"&&this.options.onReady.call(null,this.isReset)}},{key:"onMSEClose",value:function(){this.mseReady=!1,this.videoStarted=!1}},{key:"onBufferError",value:function(r){if(r.name=="QuotaExceeded"){Q("JMuxer cleaning ".concat(r.type," buffer due to QuotaExceeded error")),this.bufferControllers[r.type].initCleanup(this.node.currentTime);return}else r.name=="InvalidStateError"?(Q("JMuxer is reseting due to InvalidStateError"),this.reset()):this.endMSE();typeof this.options.onError=="function"&&this.options.onError.call(null,r)}}],[{key:"isSupported",value:function(r){return window.MediaSource&&window.MediaSource.isTypeSupported(r)}}]),e}(le);return G})})(Lt);var fr=Lt.exports;const lr=Wt(fr);var hr=Object.defineProperty,cr=Object.getOwnPropertyDescriptor,Fe=(U,b,E,L)=>{for(var N=L>1?void 0:L?cr(b,E):b,d=U.length-1,w;d>=0;d--)(w=U[d])&&(N=(L?w(b,E,N):w(N))||N);return L&&N&&hr(b,E,N),N};let be=class extends Ht(Gt,Vt){constructor(){super(...arguments),this.jmuxer=null,this.status="connecting",this.aspectRatio=null}get url(){var U;return this.convertUrl((U=this.camSettings)==null?void 0:U.stream_url,this.printerUrl)}get wrapperStyle(){return this.getWrapperStyle(this.aspectRatio,this.camSettings.rotation)}get webcamStyle(){var U,b,E,L;return{transform:this.generateTransform((U=this.camSettings.flip_horizontal)!=null?U:!1,(b=this.camSettings.flip_vertical)!=null?b:!1,(E=this.camSettings.rotation)!=null?E:0,(L=this.aspectRatio)!=null?L:1)}}mounted(){this.play()}play(){var E;if(this.status="connecting",(E=this.jmuxer)==null||E.destroy(),!this.url.startsWith("ws://")&&!this.url.startsWith("wss://")){console.error("jmuxer error: only websocket streams supported (ws://.. or wss://..)"),this.status="error";return}const U=this.camSettings.target_fps||10;this.jmuxer=new lr({node:this.video,mode:"video",flushingTime:0,fps:U,onReady:()=>{this.status="connected"},onError:L=>{this.status="error"}});const b=new WebSocket(this.url);b.binaryType="arraybuffer",b.addEventListener("message",L=>{var N;(N=this.jmuxer)==null||N.feed({video:new Uint8Array(L.data)})}),b.addEventListener("error",L=>{this.status="error"})}beforeUnmount(){var U;(U=this.jmuxer)==null||U.destroy()}onCamSettingsChanged(){this.play()}onLoadedMetadata(){this.aspectRatio=this.updateAspectRatioFromVideo(this.video)}};Fe([Ct({required:!0})],be.prototype,"camSettings",2);Fe([Ct({default:null})],be.prototype,"printerUrl",2);Fe([zt()],be.prototype,"video",2);Fe([Kt("camSettings",{deep:!0})],be.prototype,"onCamSettingsChanged",1);be=Fe([Yt],be);var dr=function(){var b=this,E=b._self._c;return b._self._setupProxy,E("div",{staticClass:"webcamBackground",style:b.wrapperStyle},[E("video",{ref:"video",staticClass:"webcamImage",style:b.webcamStyle,attrs:{autoplay:""},on:{loadedmetadata:b.onLoadedMetadata}}),b.status!=="connected"?E(Xt,[E(Zt,{staticClass:"_webcam_jmuxer_output text-center d-flex flex-column justify-center align-center"},[b.status==="connecting"?E($t,{staticClass:"mb-3",attrs:{indeterminate:"",color:"primary"}}):b._e(),E("span",{staticClass:"mt-3"},[b._v(b._s(b.status))])],1)],1):b._e()],1)},pr=[],yr=Jt(be,dr,pr,!1,null,"51e77f50");const br=yr.exports;export{br as default};
