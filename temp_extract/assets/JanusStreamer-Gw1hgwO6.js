import{m as Hm,B as Jm,a as zm,P as wu,R as Vm,W as Km,C as $m,n as Ym}from"./index-CWrpshtP.js";import{m as jm,n as Zm,r as Xm}from"./vuetify-CGRNWlIO.js";import"./overlayscrollbars-CiKU261J.js";import"./echarts-Ce9dz-GT.js";import"./codemirror-Dbba2-Wz.js";function Qm(o,s){return s.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in o)){var u=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(o,i,u.get?u:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(o)}var xo=function(o,s){return xo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&(n[u]=i[u])},xo(o,s)};function vt(o,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");xo(o,s);function n(){this.constructor=o}o.prototype=s===null?Object.create(s):(n.prototype=s.prototype,new n)}var de=function(){return de=Object.assign||function(s){for(var n,i=1,u=arguments.length;i<u;i++){n=arguments[i];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(s[c]=n[c])}return s},de.apply(this,arguments)};function ce(o,s,n,i){function u(c){return c instanceof n?c:new n(function(d){d(c)})}return new(n||(n=Promise))(function(c,d){function m(R){try{T(i.next(R))}catch(M){d(M)}}function _(R){try{T(i.throw(R))}catch(M){d(M)}}function T(R){R.done?c(R.value):u(R.value).then(m,_)}T((i=i.apply(o,s||[])).next())})}function fe(o,s){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,u,c,d=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return d.next=m(0),d.throw=m(1),d.return=m(2),typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(T){return function(R){return _([T,R])}}function _(T){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,T[0]&&(n=0)),n;)try{if(i=1,u&&(c=T[0]&2?u.return:T[0]?u.throw||((c=u.return)&&c.call(u),0):u.next)&&!(c=c.call(u,T[1])).done)return c;switch(u=0,c&&(T=[T[0]&2,c.value]),T[0]){case 0:case 1:c=T;break;case 4:return n.label++,{value:T[1],done:!1};case 5:n.label++,u=T[1],T=[0];continue;case 7:T=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(T[0]===6||T[0]===2)){n=0;continue}if(T[0]===3&&(!c||T[1]>c[0]&&T[1]<c[3])){n.label=T[1];break}if(T[0]===6&&n.label<c[1]){n.label=c[1],c=T;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(T);break}c[2]&&n.ops.pop(),n.trys.pop();continue}T=s.call(o,n)}catch(R){T=[6,R],u=0}finally{i=c=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}}function Eo(o){var s=typeof Symbol=="function"&&Symbol.iterator,n=s&&o[s],i=0;if(n)return n.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ao(o,s){var n=typeof Symbol=="function"&&o[Symbol.iterator];if(!n)return o;var i=n.call(o),u,c=[],d;try{for(;(s===void 0||s-- >0)&&!(u=i.next()).done;)c.push(u.value)}catch(m){d={error:m}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(d)throw d.error}}return c}function tr(o,s,n){if(n||arguments.length===2)for(var i=0,u=s.length,c;i<u;i++)(c||!(i in s))&&(c||(c=Array.prototype.slice.call(s,0,i)),c[i]=s[i]);return o.concat(c||Array.prototype.slice.call(s))}var Zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function No(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var Ro={exports:{}},hu;function ev(){return hu||(hu=1,function(o){(function(s){if(o.exports)o.exports=s();else if(typeof window=="object")return s()})(function(){n.sessions=new Map,n.isExtensionEnabled=function(){if(navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia)return!0;if(window.navigator.userAgent.match("Chrome")){let i=parseInt(window.navigator.userAgent.match(/Chrome\/(.*) /)[1],10),u=33;return window.navigator.userAgent.match("Linux")&&(u=35),i>=26&&i<=u?!0:n.extension.isInstalled()}else return!0};var s={extensionId:"hapfgfdkleiggjjpfpenajgdnfckjpaj",isInstalled:function(){return document.querySelector("#janus-extension-installed")!==null},getScreen:function(i){let u=window.setTimeout(function(){let c=new Error("NavigatorUserMediaError");return c.name='The required Chrome extension is not installed: click <a href="#">here</a> to install it. (NOTE: this will need you to refresh the page)',i(c)},1e3);this.cache[u]=i,window.postMessage({type:"janusGetScreen",id:u},"*")},init:function(){let i={};this.cache=i,window.addEventListener("message",function(u){if(u.origin==window.location.origin)if(u.data.type=="janusGotScreen"&&i[u.data.id]){let c=i[u.data.id];if(delete i[u.data.id],u.data.sourceId===""){let d=new Error("NavigatorUserMediaError");d.name="You cancelled the request for permission, giving up...",c(d)}else c(null,u.data.sourceId)}else u.data.type=="janusGetScreenPending"&&(console.log("clearing ",u.data.id),window.clearTimeout(u.data.id))})}};n.useDefaultDependencies=function(i){let u=i&&i.fetch||fetch,c=i&&i.Promise||Promise,d=i&&i.WebSocket||WebSocket;return{newWebSocket:function(m,_){return new d(m,_)},extension:i&&i.extension||s,isArray:function(m){return Array.isArray(m)},webRTCAdapter:i&&i.adapter||adapter,httpAPICall:function(m,_){let T={method:_.verb,headers:{Accept:"application/json, text/plain, */*"},cache:"no-cache"};_.verb==="POST"&&(T.headers["Content-Type"]="application/json"),typeof _.withCredentials<"u"&&(T.credentials=_.withCredentials===!0?"include":_.withCredentials?_.withCredentials:"omit"),_.body&&(T.body=JSON.stringify(_.body));let R=u(m,T).catch(function(M){return c.reject({message:"Probably a network error, is the server down?",error:M})});if(_.timeout){let M=new c(function(B,z){let Z=setTimeout(function(){return clearTimeout(Z),z({message:"Request timed out",timeout:_.timeout})},_.timeout)});R=c.race([R,M])}return R.then(function(M){if(M.ok){if(typeof _.success==typeof n.noop)return M.json().then(function(B){try{_.success(B)}catch(z){n.error("Unhandled httpAPICall success callback error",z)}},function(B){return c.reject({message:"Failed to parse response body",error:B,response:M})})}else return c.reject({message:"API call failed",response:M})}).catch(function(M){typeof _.error==typeof n.noop&&_.error(M.message||"<< internal error >>",M)}),R}}},n.useOldDependencies=function(i){let u=i&&i.jQuery||jQuery,c=i&&i.WebSocket||WebSocket;return{newWebSocket:function(d,m){return new c(d,m)},isArray:function(d){return u.isArray(d)},extension:i&&i.extension||s,webRTCAdapter:i&&i.adapter||adapter,httpAPICall:function(d,m){let _=typeof m.body<"u"?{contentType:"application/json",data:JSON.stringify(m.body)}:{},T=typeof m.withCredentials<"u"?{xhrFields:{withCredentials:m.withCredentials}}:{};return u.ajax(u.extend(_,T,{url:d,type:m.verb,cache:!1,dataType:"json",async:m.async,timeout:m.timeout,success:function(R){typeof m.success==typeof n.noop&&m.success(R)},error:function(R,M,B){typeof m.error==typeof n.noop&&m.error(M,B)}}))}}},n.mediaToTracks=function(i){let u=[];if(!i)u.push({type:"audio",capture:!0,recv:!0}),u.push({type:"video",capture:!0,recv:!0});else{if(!i.keepAudio&&i.audio!==!1&&(typeof i.audio>"u"||i.audio||i.audioSend||i.audioRecv||i.addAudio||i.replaceAudio||i.removeAudio)){let c={type:"audio"};i.removeAudio?c.remove=!0:(i.addAudio?c.add=!0:i.replaceAudio&&(c.replace=!0),i.audioSend!==!1&&(c.capture=i.audio||!0),i.audioRecv!==!1&&(c.recv=!0)),(c.remove||c.capture||c.recv)&&u.push(c)}if(!i.keepVideo&&i.video!==!1&&(typeof i.video>"u"||i.video||i.videoSend||i.videoRecv||i.addVideo||i.replaceVideo||i.removeVideo)){let c={type:"video"};i.removeVideo?c.remove=!0:(i.addVideo?c.add=!0:i.replaceVideo&&(c.replace=!0),i.videoSend!==!1&&(c.capture=i.video||!0,["screen","window","desktop"].includes(c.capture)&&(c.type="screen",c.capture={video:{}},i.screenshareFrameRate&&(c.capture.frameRate=i.screenshareFrameRate),i.screenshareHeight&&(c.capture.height=i.screenshareHeight),i.screenshareWidth&&(c.capture.width=i.screenshareWidth))),i.videoRecv!==!1&&(c.recv=!0)),(c.remove||c.capture||c.recv)&&u.push(c)}i.data&&u.push({type:"data"})}return u},n.trackConstraints=function(i){let u={};if(!i||!i.capture)return u;if(i.type==="audio")u.audio=i.capture;else if(i.type==="video")if((i.simulcast||i.svc)&&i.capture===!0&&(i.capture="hires"),i.capture===!0||typeof i.capture=="object")u.video=i.capture;else{let c=0,d=0;i.capture==="lowres"?(c=320,d=240):i.capture==="lowres-16:9"?(c=320,d=180):i.capture==="hires"||i.capture==="hires-16:9"||i.capture==="hdres"?(c=1280,d=720):i.capture==="fhdres"?(c=1920,d=1080):i.capture==="4kres"?(c=3840,d=2160):i.capture==="stdres"?(c=640,d=480):i.capture==="stdres-16:9"?(c=640,d=360):(n.log("Default video setting is stdres 4:3"),c=640,d=480),u.video={width:{ideal:c},height:{ideal:d}}}else i.type==="screen"&&(u.video=i.capture);return u},n.noop=function(){},n.dataChanDefaultLabel="JanusDataChannel",n.endOfCandidates=null,n.stopAllTracks=function(i){try{let u=i.getTracks();for(let c of u)n.log(c),c&&c.dontStop!==!0&&c.stop()}catch{}},n.init=function(i){if(i=i||{},i.callback=typeof i.callback=="function"?i.callback:n.noop,n.initDone)i.callback();else{if(typeof console.log>"u"&&(console.log=function(){}),n.trace=n.noop,n.debug=n.noop,n.vdebug=n.noop,n.log=n.noop,n.warn=n.noop,n.error=n.noop,i.debug===!0||i.debug==="all")n.trace=console.trace.bind(console),n.debug=console.debug.bind(console),n.vdebug=console.debug.bind(console),n.log=console.log.bind(console),n.warn=console.warn.bind(console),n.error=console.error.bind(console);else if(Array.isArray(i.debug))for(let _ of i.debug)switch(_){case"trace":n.trace=console.trace.bind(console);break;case"debug":n.debug=console.debug.bind(console);break;case"vdebug":n.vdebug=console.debug.bind(console);break;case"log":n.log=console.log.bind(console);break;case"warn":n.warn=console.warn.bind(console);break;case"error":n.error=console.error.bind(console);break;default:console.error("Unknown debugging option '"+_+"' (supported: 'trace', 'debug', 'vdebug', 'log', warn', 'error')");break}n.log("Initializing library");let u=i.dependencies||n.useDefaultDependencies();n.isArray=u.isArray,n.webRTCAdapter=u.webRTCAdapter,n.httpAPICall=u.httpAPICall,n.newWebSocket=u.newWebSocket,n.extension=u.extension,n.extension.init(),n.listDevices=function(_,T){_=typeof _=="function"?_:n.noop,T||(T={audio:!0,video:!0}),n.isGetUserMediaAvailable()?navigator.mediaDevices.getUserMedia(T).then(function(R){navigator.mediaDevices.enumerateDevices().then(function(M){n.debug(M),_(M),n.stopAllTracks(R)})}).catch(function(R){n.error(R),_([])}):(n.warn("navigator.mediaDevices unavailable"),_([]))},n.attachMediaStream=function(_,T){try{_.srcObject=T}catch{try{_.src=URL.createObjectURL(T)}catch(M){n.error("Error attaching stream to element",M)}}},n.reattachMediaStream=function(_,T){try{_.srcObject=T.srcObject}catch{try{_.src=T.src}catch(M){n.error("Error reattaching stream to element",M)}}};let d=["iPad","iPhone","iPod"].indexOf(navigator.platform)>=0?"pagehide":"beforeunload",m=window["on"+d];if(window.addEventListener(d,function(){n.log("Closing window");for(const[_,T]of n.sessions)T&&T.destroyOnUnload&&(n.log("Destroying session "+_),T.destroy({unload:!0,notifyDestroyed:!1}));m&&typeof m=="function"&&m()}),n.safariVp8=!1,n.safariVp9=!1,n.webRTCAdapter.browserDetails.browser==="safari"&&n.webRTCAdapter.browserDetails.version>=605)if(RTCRtpSender&&RTCRtpSender.getCapabilities&&RTCRtpSender.getCapabilities("video")&&RTCRtpSender.getCapabilities("video").codecs&&RTCRtpSender.getCapabilities("video").codecs.length){for(let _ of RTCRtpSender.getCapabilities("video").codecs)_&&_.mimeType&&_.mimeType.toLowerCase()==="video/vp8"?n.safariVp8=!0:_&&_.mimeType&&_.mimeType.toLowerCase()==="video/vp9"&&(n.safariVp9=!0);n.safariVp8?n.log("This version of Safari supports VP8"):n.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu")}else{let _=new RTCPeerConnection({});_.createOffer({offerToReceiveVideo:!0}).then(function(T){n.safariVp8=T.sdp.indexOf("VP8")!==-1,n.safariVp9=T.sdp.indexOf("VP9")!==-1,n.safariVp8?n.log("This version of Safari supports VP8"):n.warn("This version of Safari does NOT support VP8: if you're using a Technology Preview, try enabling the 'WebRTC VP8 codec' setting in the 'Experimental Features' Develop menu"),_.close(),_=null})}n.initDone=!0,i.callback()}},n.isWebrtcSupported=function(){return!!window.RTCPeerConnection},n.isGetUserMediaAvailable=function(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia},n.randomString=function(i){let u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c="";for(let d=0;d<i;d++){let m=Math.floor(Math.random()*u.length);c+=u.charAt(m)}return c};function n(i){if(i=i||{},i.success=typeof i.success=="function"?i.success:n.noop,i.error=typeof i.error=="function"?i.error:n.noop,i.destroyed=typeof i.destroyed=="function"?i.destroyed:n.noop,!n.initDone)return i.error("Library not initialized"),{};if(!n.isWebrtcSupported())return i.error("WebRTC not supported by this browser"),{};if(n.log("Library initialized: "+n.initDone),!i.server)return i.error("Invalid server url"),{};let u=!1,c=null,d={},m=null,_=null,T=0,R=i.server;n.isArray(R)?(n.log("Multiple servers provided ("+R.length+"), will use the first that works"),R=null,_=i.server,n.debug(_)):R.indexOf("ws")===0?(u=!0,n.log("Using WebSockets to contact Janus: "+R)):(u=!1,n.log("Using REST API to contact Janus: "+R));let M=i.iceServers||[{urls:"stun:stun.l.google.com:19302"}],B=i.iceTransportPolicy,z=i.bundlePolicy,Z=!1;typeof i.withCredentials<"u"&&i.withCredentials!==null&&(Z=i.withCredentials===!0);let ee=10;typeof i.max_poll_events<"u"&&i.max_poll_events!==null&&(ee=i.max_poll_events),ee<1&&(ee=1);let ye=null;typeof i.token<"u"&&i.token!==null&&(ye=i.token);let pe=null;typeof i.apisecret<"u"&&i.apisecret!==null&&(pe=i.apisecret),this.destroyOnUnload=!0,typeof i.destroyOnUnload<"u"&&i.destroyOnUnload!==null&&(this.destroyOnUnload=i.destroyOnUnload===!0);let yt=25e3;typeof i.keepAlivePeriod<"u"&&i.keepAlivePeriod!==null&&(yt=i.keepAlivePeriod),isNaN(yt)&&(yt=25e3);let Le=6e4;typeof i.longPollTimeout<"u"&&i.longPollTimeout!==null&&(Le=i.longPollTimeout),isNaN(Le)&&(Le=6e4);function Pt(p){let y={high:9e5,medium:3e5,low:1e5};return typeof p<"u"&&p!==null&&(p.high&&(y.high=p.high),p.medium&&(y.medium=p.medium),p.low&&(y.low=p.low)),y}let ge=!1,V=null,j=new Map,et=this,Nt=0,Ge=new Map;Zt(i),this.getServer=function(){return R},this.isConnected=function(){return ge},this.reconnect=function(p){p=p||{},p.success=typeof p.success=="function"?p.success:n.noop,p.error=typeof p.error=="function"?p.error:n.noop,p.reconnect=!0,Zt(p)},this.getSessionId=function(){return V},this.getInfo=function(p){si(p)},this.destroy=function(p){ai(p)},this.attach=function(p){xt(p)};function Mn(){if(V==null)return;if(n.debug("Long poll..."),!ge){n.warn("Is the server down? (connected=false)");return}let p=R+"/"+V+"?rid="+new Date().getTime();ee&&(p=p+"&maxev="+ee),ye&&(p=p+"&token="+encodeURIComponent(ye)),pe&&(p=p+"&apisecret="+encodeURIComponent(pe)),n.httpAPICall(p,{verb:"GET",withCredentials:Z,success:Ln,timeout:Le,error:function(y,S){if(n.error(y+":",S),Nt++,Nt>3){ge=!1,i.error("Lost connection to the server (is it down?)");return}Mn()}})}function Ln(p,y){if(Nt=0,!u&&typeof V<"u"&&V!==null&&y!==!0&&Mn(),!u&&n.isArray(p)){for(let S=0;S<p.length;S++)Ln(p[S],!0);return}if(p.janus==="keepalive"){n.vdebug("Got a keepalive on session "+V);return}else if(p.janus==="server_info"){n.debug("Got info on the Janus instance"),n.debug(p);const S=p.transaction;if(S){const g=Ge.get(S);g&&g(p),Ge.delete(S)}return}else if(p.janus==="ack"){n.debug("Got an ack on session "+V),n.debug(p);const S=p.transaction;if(S){const g=Ge.get(S);g&&g(p),Ge.delete(S)}return}else if(p.janus==="success"){n.debug("Got a success on session "+V),n.debug(p);const S=p.transaction;if(S){const g=Ge.get(S);g&&g(p),Ge.delete(S)}return}else if(p.janus==="trickle"){const S=p.sender;if(!S){n.warn("Missing sender...");return}const g=j.get(S);if(!g){n.debug("This handle is not attached to this session");return}let A=p.candidate;n.debug("Got a trickled candidate on session "+V),n.debug(A);let w=g.webrtcStuff;w.pc&&w.remoteSdp?(n.debug("Adding remote candidate:",A),!A||A.completed===!0?w.pc.addIceCandidate(n.endOfCandidates):w.pc.addIceCandidate(A)):(n.debug("We didn't do setRemoteDescription (trickle got here before the offer?), caching candidate"),w.candidates||(w.candidates=[]),w.candidates.push(A),n.debug(w.candidates))}else if(p.janus==="webrtcup"){n.debug("Got a webrtcup event on session "+V),n.debug(p);const S=p.sender;if(!S){n.warn("Missing sender...");return}const g=j.get(S);if(!g){n.debug("This handle is not attached to this session");return}g.webrtcState(!0);return}else if(p.janus==="hangup"){n.debug("Got a hangup event on session "+V),n.debug(p);const S=p.sender;if(!S){n.warn("Missing sender...");return}const g=j.get(S);if(!g){n.debug("This handle is not attached to this session");return}g.webrtcState(!1,p.reason),g.hangup()}else if(p.janus==="detached"){n.debug("Got a detached event on session "+V),n.debug(p);const S=p.sender;if(!S){n.warn("Missing sender...");return}const g=j.get(S);if(!g)return;g.ondetached(),g.detach()}else if(p.janus==="media"){n.debug("Got a media event on session "+V),n.debug(p);const S=p.sender;if(!S){n.warn("Missing sender...");return}const g=j.get(S);if(!g){n.debug("This handle is not attached to this session");return}g.mediaState(p.type,p.receiving,p.mid)}else if(p.janus==="slowlink"){n.debug("Got a slowlink event on session "+V),n.debug(p);const S=p.sender;if(!S){n.warn("Missing sender...");return}const g=j.get(S);if(!g){n.debug("This handle is not attached to this session");return}g.slowLink(p.uplink,p.lost,p.mid)}else if(p.janus==="error"){n.error("Ooops: "+p.error.code+" "+p.error.reason),n.debug(p);let S=p.transaction;if(S){let g=Ge.get(S);g&&g(p),Ge.delete(S)}return}else if(p.janus==="event"){n.debug("Got a plugin event on session "+V),n.debug(p);const S=p.sender;if(!S){n.warn("Missing sender...");return}let g=p.plugindata;if(!g){n.warn("Missing plugindata...");return}n.debug("  -- Event is coming from "+S+" ("+g.plugin+")");let A=g.data;n.debug(A);const w=j.get(S);if(!w){n.warn("This handle is not attached to this session");return}let b=p.jsep;b&&(n.debug("Handling SDP as well..."),n.debug(b));let N=w.onmessage;N?(n.debug("Notifying application..."),N(A,b)):n.debug("No provided notification callback")}else if(p.janus==="timeout"){n.error("Timeout on session "+V),n.debug(p),u&&c.close(3504,"Gateway timeout");return}else n.warn("Unknown message/event  '"+p.janus+"' on session "+V),n.debug(p)}function rr(){if(!R||!u||!ge)return;m=setTimeout(rr,yt);let p={janus:"keepalive",session_id:V,transaction:n.randomString(12)};ye&&(p.token=ye),pe&&(p.apisecret=pe),c.send(JSON.stringify(p))}function Zt(p){let y=n.randomString(12),S={janus:"create",transaction:y};if(p.reconnect&&(ge=!1,S.janus="claim",S.session_id=V,c&&(c.onopen=null,c.onerror=null,c.onclose=null,m&&(clearTimeout(m),m=null))),ye&&(S.token=ye),pe&&(S.apisecret=pe),!R&&n.isArray(_)&&(R=_[T],R.indexOf("ws")===0?(u=!0,n.log("Server #"+(T+1)+": trying WebSockets to contact Janus ("+R+")")):(u=!1,n.log("Server #"+(T+1)+": trying REST API to contact Janus ("+R+")"))),u){c=n.newWebSocket(R,"janus-protocol"),d={error:function(){if(n.error("Error connecting to the Janus WebSockets server... "+R),n.isArray(_)&&!p.reconnect){if(T++,T===_.length){p.error("Error connecting to any of the provided Janus servers: Is the server down?");return}R=null,setTimeout(function(){Zt(p)},200);return}p.error("Error connecting to the Janus WebSockets server: Is the server down?")},open:function(){Ge.set(y,function(g){if(n.debug(g),g.janus!=="success"){n.error("Ooops: "+g.error.code+" "+g.error.reason),p.error(g.error.reason);return}m=setTimeout(rr,yt),ge=!0,V=g.session_id?g.session_id:g.data.id,p.reconnect?n.log("Claimed session: "+V):n.log("Created session: "+V),n.sessions.set(V,et),p.success()}),c.send(JSON.stringify(S))},message:function(g){Ln(JSON.parse(g.data))},close:function(){!R||!ge||(ge=!1,i.error("Lost connection to the server (is it down?)"))}};for(let g in d)c.addEventListener(g,d[g]);return}n.httpAPICall(R,{verb:"POST",withCredentials:Z,body:S,success:function(g){if(n.debug(g),g.janus!=="success"){n.error("Ooops: "+g.error.code+" "+g.error.reason),p.error(g.error.reason);return}ge=!0,V=g.session_id?g.session_id:g.data.id,p.reconnect?n.log("Claimed session: "+V):n.log("Created session: "+V),n.sessions.set(V,et),Mn(),p.success()},error:function(g,A){if(n.error(g+":",A),n.isArray(_)&&!p.reconnect){if(T++,T===_.length){p.error("Error connecting to any of the provided Janus servers: Is the server down?");return}R=null,setTimeout(function(){Zt(p)},200);return}A===""?p.error(g+": Is the server down?"):A&&A.error?p.error(g+": "+A.error.message):p.error(g+": "+A)}})}function si(p){if(p=p||{},p.success=typeof p.success=="function"?p.success:n.noop,p.error=typeof p.error=="function"?p.error:n.noop,n.log("Getting info on Janus instance"),!ge){n.warn("Is the server down? (connected=false)"),p.error("Is the server down? (connected=false)");return}let y=n.randomString(12),S={janus:"info",transaction:y};if(ye&&(S.token=ye),pe&&(S.apisecret=pe),u){Ge.set(y,function(g){n.log("Server info:"),n.debug(g),g.janus!=="server_info"&&n.error("Ooops: "+g.error.code+" "+g.error.reason),p.success(g)}),c.send(JSON.stringify(S));return}n.httpAPICall(R,{verb:"POST",withCredentials:Z,body:S,success:function(g){n.log("Server info:"),n.debug(g),g.janus!=="server_info"&&n.error("Ooops: "+g.error.code+" "+g.error.reason),p.success(g)},error:function(g,A){n.error(g+":",A),A===""?p.error(g+": Is the server down?"):p.error(g+": "+A)}})}function ai(p){p=p||{},p.success=typeof p.success=="function"?p.success:n.noop,p.error=typeof p.error=="function"?p.error:n.noop;let y=p.unload===!0,S=!0;typeof p.notifyDestroyed<"u"&&p.notifyDestroyed!==null&&(S=p.notifyDestroyed===!0);let g=p.cleanupHandles===!0;if(n.log("Destroying session "+V+" (unload="+y+")"),!V){n.warn("No session to destroy"),p.success(),S&&i.destroyed();return}if(g)for(const w of j.keys())Un(w,{noRequest:!0});if(!ge){n.warn("Is the server down? (connected=false)"),V=null,p.success();return}let A={janus:"destroy",transaction:n.randomString(12)};if(ye&&(A.token=ye),pe&&(A.apisecret=pe),y){u?(c.onclose=null,c.close(),c=null):navigator.sendBeacon(R+"/"+V,JSON.stringify(A)),n.log("Destroyed session:"),V=null,ge=!1,p.success(),S&&i.destroyed();return}if(u){A.session_id=V;let w=function(){for(let F in d)c.removeEventListener(F,d[F]);c.removeEventListener("message",b),c.removeEventListener("error",N),m&&clearTimeout(m),c.close()},b=function(F){let P=JSON.parse(F.data);P.session_id==A.session_id&&P.transaction==A.transaction&&(w(),p.success(),S&&i.destroyed())},N=function(){w(),p.error("Failed to destroy the server: Is the server down?"),S&&i.destroyed()};c.addEventListener("message",b),c.addEventListener("error",N),c.readyState===1?c.send(JSON.stringify(A)):N();return}n.httpAPICall(R+"/"+V,{verb:"POST",withCredentials:Z,body:A,success:function(w){n.log("Destroyed session:"),n.debug(w),V=null,ge=!1,w.janus!=="success"&&n.error("Ooops: "+w.error.code+" "+w.error.reason),p.success(),S&&i.destroyed()},error:function(w,b){n.error(w+":",b),V=null,ge=!1,p.success(),S&&i.destroyed()}})}function xt(p){if(p=p||{},p.success=typeof p.success=="function"?p.success:n.noop,p.error=typeof p.error=="function"?p.error:n.noop,p.dataChannelOptions=p.dataChannelOptions||{ordered:!0},p.consentDialog=typeof p.consentDialog=="function"?p.consentDialog:n.noop,p.connectionState=typeof p.connectionState=="function"?p.connectionState:n.noop,p.iceState=typeof p.iceState=="function"?p.iceState:n.noop,p.mediaState=typeof p.mediaState=="function"?p.mediaState:n.noop,p.webrtcState=typeof p.webrtcState=="function"?p.webrtcState:n.noop,p.slowLink=typeof p.slowLink=="function"?p.slowLink:n.noop,p.onmessage=typeof p.onmessage=="function"?p.onmessage:n.noop,p.onlocaltrack=typeof p.onlocaltrack=="function"?p.onlocaltrack:n.noop,p.onremotetrack=typeof p.onremotetrack=="function"?p.onremotetrack:n.noop,p.ondata=typeof p.ondata=="function"?p.ondata:n.noop,p.ondataopen=typeof p.ondataopen=="function"?p.ondataopen:n.noop,p.oncleanup=typeof p.oncleanup=="function"?p.oncleanup:n.noop,p.ondetached=typeof p.ondetached=="function"?p.ondetached:n.noop,!ge){n.warn("Is the server down? (connected=false)"),p.error("Is the server down? (connected=false)");return}let y=p.plugin;if(!y){n.error("Invalid plugin"),p.error("Invalid plugin");return}let S=p.opaqueId,g=p.loopIndex,A=p.token?p.token:ye,w=n.randomString(12),b={janus:"attach",plugin:y,opaque_id:S,loop_index:g,transaction:w};if(A&&(b.token=A),pe&&(b.apisecret=pe),u){Ge.set(w,function(N){if(n.debug(N),N.janus!=="success"){n.error("Ooops: "+N.error.code+" "+N.error.reason),p.error("Ooops: "+N.error.code+" "+N.error.reason);return}let F=N.data.id;n.log("Created handle: "+F);let P={session:et,plugin:y,id:F,token:A,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:p.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return F},getPlugin:function(){return y},getVolume:function(O,G){return Oe(F,O,!0,G)},getRemoteVolume:function(O,G){return Oe(F,O,!0,G)},getLocalVolume:function(O,G){return Oe(F,O,!1,G)},isAudioMuted:function(O){return St(F,O,!1)},muteAudio:function(O){return _t(F,O,!1,!0)},unmuteAudio:function(O){return _t(F,O,!1,!1)},isVideoMuted:function(O){return St(F,O,!0)},muteVideo:function(O){return _t(F,O,!0,!0)},unmuteVideo:function(O){return _t(F,O,!0,!1)},getBitrate:function(O){return tt(F,O)},setMaxBitrate:function(O,G){return kn(F,O,G)},send:function(O){ft(F,O)},data:function(O){ze(F,O)},dtmf:function(O){or(F,O)},consentDialog:p.consentDialog,connectionState:p.connectionState,iceState:p.iceState,mediaState:p.mediaState,webrtcState:p.webrtcState,slowLink:p.slowLink,onmessage:p.onmessage,createOffer:function(O){lt(F,!0,O)},createAnswer:function(O){lt(F,!1,O)},handleRemoteJsep:function(O){Xt(F,O)},replaceTracks:function(O){sr(F,O)},getLocalTracks:function(){return tn(F)},getRemoteTracks:function(){return Fn(F)},onlocaltrack:p.onlocaltrack,onremotetrack:p.onremotetrack,ondata:p.ondata,ondataopen:p.ondataopen,oncleanup:p.oncleanup,ondetached:p.ondetached,hangup:function(O){Et(F,O===!0)},detach:function(O){Un(F,O)}};j.set(F,P),p.success(P)}),b.session_id=V,c.send(JSON.stringify(b));return}n.httpAPICall(R+"/"+V,{verb:"POST",withCredentials:Z,body:b,success:function(N){if(n.debug(N),N.janus!=="success"){n.error("Ooops: "+N.error.code+" "+N.error.reason),p.error("Ooops: "+N.error.code+" "+N.error.reason);return}let F=N.data.id;n.log("Created handle: "+F);let P={session:et,plugin:y,id:F,token:A,detached:!1,webrtcStuff:{started:!1,myStream:null,streamExternal:!1,mySdp:null,mediaConstraints:null,pc:null,dataChannelOptions:p.dataChannelOptions,dataChannel:{},dtmfSender:null,trickle:!0,iceDone:!1,bitrate:{}},getId:function(){return F},getPlugin:function(){return y},getVolume:function(O,G){return Oe(F,O,!0,G)},getRemoteVolume:function(O,G){return Oe(F,O,!0,G)},getLocalVolume:function(O,G){return Oe(F,O,!1,G)},isAudioMuted:function(O){return St(F,O,!1)},muteAudio:function(O){return _t(F,O,!1,!0)},unmuteAudio:function(O){return _t(F,O,!1,!1)},isVideoMuted:function(O){return St(F,O,!0)},muteVideo:function(O){return _t(F,O,!0,!0)},unmuteVideo:function(O){return _t(F,O,!0,!1)},getBitrate:function(O){return tt(F,O)},setMaxBitrate:function(O,G){return kn(F,O,G)},send:function(O){ft(F,O)},data:function(O){ze(F,O)},dtmf:function(O){or(F,O)},consentDialog:p.consentDialog,connectionState:p.connectionState,iceState:p.iceState,mediaState:p.mediaState,webrtcState:p.webrtcState,slowLink:p.slowLink,onmessage:p.onmessage,createOffer:function(O){lt(F,!0,O)},createAnswer:function(O){lt(F,!1,O)},handleRemoteJsep:function(O){Xt(F,O)},replaceTracks:function(O){sr(F,O)},getLocalTracks:function(){return tn(F)},getRemoteTracks:function(){return Fn(F)},onlocaltrack:p.onlocaltrack,onremotetrack:p.onremotetrack,ondata:p.ondata,ondataopen:p.ondataopen,oncleanup:p.oncleanup,ondetached:p.ondetached,hangup:function(O){Et(F,O===!0)},detach:function(O){Un(F,O)}};j.set(F,P),p.success(P)},error:function(N,F){n.error(N+":",F),F===""?p.error(N+": Is the server down?"):p.error(N+": "+F)}})}function ft(p,y){if(y=y||{},y.success=typeof y.success=="function"?y.success:n.noop,y.error=typeof y.error=="function"?y.error:n.noop,!ge){n.warn("Is the server down? (connected=false)"),y.error("Is the server down? (connected=false)");return}let S=j.get(p);if(!S||!S.webrtcStuff){n.warn("Invalid handle"),y.error("Invalid handle");return}let g=y.message,A=y.jsep,w=n.randomString(12),b={janus:"message",body:g,transaction:w};if(S.token&&(b.token=S.token),pe&&(b.apisecret=pe),A){b.jsep={type:A.type,sdp:A.sdp},A.e2ee&&(b.jsep.e2ee=!0),(A.rid_order==="hml"||A.rid_order==="lmh")&&(b.jsep.rid_order=A.rid_order),A.force_relay&&(b.jsep.force_relay=!0);let N=null,F=S.webrtcStuff;if(F.pc){let P=F.pc.getTransceivers();if(P&&P.length>0)for(let O in P){let G=P[O];if(G&&G.sender&&G.sender.track&&G.sender.track.kind==="video"){let te=G.sender.getParameters();te&&te.encodings&&te.encodings.length===1&&te.encodings[0]&&te.encodings[0].scalabilityMode&&(N||(N=[]),N.push({mindex:parseInt(O),mid:G.mid,svc:te.encodings[0].scalabilityMode}))}}}N&&(b.jsep.svc=N)}if(n.debug("Sending message to plugin (handle="+p+"):"),n.debug(b),u){b.session_id=V,b.handle_id=p,Ge.set(w,function(N){if(n.debug("Message sent!"),n.debug(N),N.janus==="success"){let F=N.plugindata;if(!F){n.warn("Request succeeded, but missing plugindata..."),y.success();return}n.log("Synchronous transaction successful ("+F.plugin+")");let P=F.data;n.debug(P),y.success(P);return}else if(N.janus!=="ack"){N.error?(n.error("Ooops: "+N.error.code+" "+N.error.reason),y.error(N.error.code+" "+N.error.reason)):(n.error("Unknown error"),y.error("Unknown error"));return}y.success()}),c.send(JSON.stringify(b));return}n.httpAPICall(R+"/"+V+"/"+p,{verb:"POST",withCredentials:Z,body:b,success:function(N){if(n.debug("Message sent!"),n.debug(N),N.janus==="success"){let F=N.plugindata;if(!F){n.warn("Request succeeded, but missing plugindata..."),y.success();return}n.log("Synchronous transaction successful ("+F.plugin+")");let P=F.data;n.debug(P),y.success(P);return}else if(N.janus!=="ack"){N.error?(n.error("Ooops: "+N.error.code+" "+N.error.reason),y.error(N.error.code+" "+N.error.reason)):(n.error("Unknown error"),y.error("Unknown error"));return}y.success()},error:function(N,F){n.error(N+":",F),y.error(N+": "+F)}})}function ir(p,y){if(!ge){n.warn("Is the server down? (connected=false)");return}let S=j.get(p);if(!S||!S.webrtcStuff){n.warn("Invalid handle");return}let g={janus:"trickle",candidate:y,transaction:n.randomString(12)};if(S.token&&(g.token=S.token),pe&&(g.apisecret=pe),n.vdebug("Sending trickle candidate (handle="+p+"):"),n.vdebug(g),u){g.session_id=V,g.handle_id=p,c.send(JSON.stringify(g));return}n.httpAPICall(R+"/"+V+"/"+p,{verb:"POST",withCredentials:Z,body:g,success:function(A){if(n.vdebug("Candidate sent!"),n.vdebug(A),A.janus!=="ack"){n.error("Ooops: "+A.error.code+" "+A.error.reason);return}},error:function(A,w){n.error(A+":",w)}})}function Wt(p,y,S,g,A){let w=j.get(p);if(!w||!w.webrtcStuff){n.warn("Invalid handle");return}let b=w.webrtcStuff;if(!b.pc){n.warn("Invalid PeerConnection");return}let N=function(O){n.log("Received message on data channel:",O);let G=O.target.label;w.ondata(O.data,G)},F=function(O){n.log("Received state change on data channel:",O);let G=O.target.label,te=O.target.protocol,le=b.dataChannel[G]?b.dataChannel[G].readyState:"null";if(n.log("State change on <"+G+"> data channel: "+le),le==="open"){if(b.dataChannel[G].pending&&b.dataChannel[G].pending.length>0){n.log("Sending pending messages on <"+G+">:",b.dataChannel[G].pending.length);for(let dt of b.dataChannel[G].pending)n.log("Sending data on data channel <"+G+">"),n.debug(dt),b.dataChannel[G].send(dt);b.dataChannel[G].pending=[]}w.ondataopen(G,te)}},P=function(O){n.error("Got error on data channel:",O)};if(g)b.dataChannel[y]=g;else{let O=b.dataChannelOptions;S&&(O.protocol=S),b.dataChannel[y]=b.pc.createDataChannel(y,O)}b.dataChannel[y].onmessage=N,b.dataChannel[y].onopen=F,b.dataChannel[y].onclose=F,b.dataChannel[y].onerror=P,b.dataChannel[y].pending=[],A&&b.dataChannel[y].pending.push(A)}function ze(p,y){y=y||{},y.success=typeof y.success=="function"?y.success:n.noop,y.error=typeof y.error=="function"?y.error:n.noop;let S=j.get(p);if(!S||!S.webrtcStuff){n.warn("Invalid handle"),y.error("Invalid handle");return}let g=S.webrtcStuff,A=y.text||y.data;if(!A){n.warn("Invalid data"),y.error("Invalid data");return}let w=y.label?y.label:n.dataChanDefaultLabel;if(!g.dataChannel[w]){Wt(p,w,y.protocol,!1,A,y.protocol),y.success();return}if(g.dataChannel[w].readyState!=="open"){g.dataChannel[w].pending.push(A),y.success();return}n.log("Sending data on data channel <"+w+">"),n.debug(A),g.dataChannel[w].send(A),y.success()}function or(p,y){y=y||{},y.success=typeof y.success=="function"?y.success:n.noop,y.error=typeof y.error=="function"?y.error:n.noop;let S=j.get(p);if(!S||!S.webrtcStuff){n.warn("Invalid handle"),y.error("Invalid handle");return}let g=S.webrtcStuff;if(!g.dtmfSender){if(g.pc){let P=g.pc.getSenders().find(function(O){return O.track&&O.track.kind==="audio"});if(!P){n.warn("Invalid DTMF configuration (no audio track)"),y.error("Invalid DTMF configuration (no audio track)");return}g.dtmfSender=P.dtmf,g.dtmfSender&&(n.log("Created DTMF Sender"),g.dtmfSender.ontonechange=function(O){n.debug("Sent DTMF tone: "+O.tone)})}if(!g.dtmfSender){n.warn("Invalid DTMF configuration"),y.error("Invalid DTMF configuration");return}}let A=y.dtmf;if(!A){n.warn("Invalid DTMF parameters"),y.error("Invalid DTMF parameters");return}let w=A.tones;if(!w){n.warn("Invalid DTMF string"),y.error("Invalid DTMF string");return}let b=typeof A.duration=="number"?A.duration:500,N=typeof A.gap=="number"?A.gap:50;n.debug("Sending DTMF string "+w+" (duration "+b+"ms, gap "+N+"ms)"),g.dtmfSender.insertDTMF(w,b,N),y.success()}function Un(p,y){y=y||{},y.success=typeof y.success=="function"?y.success:n.noop,y.error=typeof y.error=="function"?y.error:n.noop;let S=y.noRequest===!0;n.log("Destroying handle "+p+" (only-locally="+S+")"),Et(p);let g=j.get(p);if(!g||g.detached){j.delete(p),y.success();return}if(g.detached=!0,S){j.delete(p),y.success();return}if(!ge){n.warn("Is the server down? (connected=false)"),y.error("Is the server down? (connected=false)");return}let A={janus:"detach",transaction:n.randomString(12)};if(g.token&&(A.token=g.token),pe&&(A.apisecret=pe),u){A.session_id=V,A.handle_id=p,c.send(JSON.stringify(A)),j.delete(p),y.success();return}n.httpAPICall(R+"/"+V+"/"+p,{verb:"POST",withCredentials:Z,body:A,success:function(w){n.log("Destroyed handle:"),n.debug(w),w.janus!=="success"&&n.error("Ooops: "+w.error.code+" "+w.error.reason),j.delete(p),y.success()},error:function(w,b){n.error(w+":",b),j.delete(p),y.success()}})}function ui(p,y){let S=j.get(p);if(!S||!S.webrtcStuff)throw n.warn("Invalid handle"),"Invalid handle";let g=S.webrtcStuff;if(g.pc)return;let A={iceServers:M,iceTransportPolicy:B,bundlePolicy:z};A.sdpSemantics="unified-plan";let w=!1;if(y.tracks){for(let b of y.tracks)if(b.transforms&&(b.transforms.sender||b.transforms.receiver)){w=!0;break}}y.externalEncryption&&(w=!0,g.externalEncryption=!0),RTCRtpSender&&(RTCRtpSender.prototype.createEncodedStreams||RTCRtpSender.prototype.createEncodedAudioStreams&&RTCRtpSender.prototype.createEncodedVideoStreams)&&w&&(g.insertableStreams=!0,A.forceEncodedAudioInsertableStreams=!0,A.forceEncodedVideoInsertableStreams=!0,A.encodedInsertableStreams=!0),n.log("Creating PeerConnection"),g.pc=new RTCPeerConnection(A),n.debug(g.pc),g.pc.getStats&&(g.volume={},g.bitrate.value="0 kbits/sec"),n.log("Preparing local SDP and gathering candidates (trickle="+g.trickle+")"),g.pc.onconnectionstatechange=function(){g.pc&&S.connectionState(g.pc.connectionState)},g.pc.oniceconnectionstatechange=function(){g.pc&&S.iceState(g.pc.iceConnectionState)},g.pc.onicecandidate=function(b){if(!b.candidate||b.candidate.candidate&&b.candidate.candidate.indexOf("endOfCandidates")>0)n.log("End of candidates."),g.iceDone=!0,g.trickle===!0?ir(p,{completed:!0}):en(p,y);else{let N={candidate:b.candidate.candidate,sdpMid:b.candidate.sdpMid,sdpMLineIndex:b.candidate.sdpMLineIndex};g.trickle===!0&&ir(p,N)}},g.pc.ontrack=function(b){if(n.log("Handling Remote Track",b),!b.streams||!b.track)return;let N=b.transceiver?b.transceiver.mid:b.track.id;try{b.transceiver&&b.transceiver.mid&&b.track.id&&(S.mids||(S.mids={}),S.mids[b.track.id]=b.transceiver.mid),S.onremotetrack(b.track,N,!0,{reason:"created"})}catch(P){n.error("Error calling onremotetrack",P)}if(b.track.onended)return;let F=null;n.log("Adding onended callback to track:",b.track),b.track.onended=function(P){n.log("Remote track removed:",P),clearTimeout(F);let O=g.pc?g.pc.getTransceivers():null,G=O?O.find(le=>le.receiver.track===P.target):null,te=G?G.mid:P.target.id;te===P.target.id&&S.mids&&S.mids[b.track.id]&&(te=S.mids[b.track.id]);try{S.onremotetrack(P.target,te,!1,{reason:"ended"})}catch(le){n.error("Error calling onremotetrack on removal",le)}delete S.mids[b.track.id]},b.track.onmute=function(P){n.log("Remote track muted:",P),F||(F=setTimeout(function(){n.log("Removing remote track");let O=g.pc?g.pc.getTransceivers():null,G=O?O.find(le=>le.receiver.track===P.target):null,te=G?G.mid:P.target.id;te===P.target.id&&S.mids&&S.mids[b.track.id]&&(te=S.mids[b.track.id]);try{S.onremotetrack(P.target,te,!1,{reason:"mute"})}catch(le){n.error("Error calling onremotetrack on mute",le)}F=null},3*840))},b.track.onunmute=function(P){if(n.log("Remote track flowing again:",P),F!=null)clearTimeout(F),F=null;else try{let O=g.pc?g.pc.getTransceivers():null,G=O?O.find(le=>le.receiver.track===P.target):null,te=G?G.mid:P.target.id;S.onremotetrack(P.target,te,!0,{reason:"unmute"})}catch(O){n.error("Error calling onremotetrack on unmute",O)}}}}async function lt(p,y,S){S=S||{},S.success=typeof S.success=="function"?S.success:n.noop,S.error=typeof S.error=="function"?S.error:ar;let g=S.jsep;if(y&&g){n.error("Provided a JSEP to a createOffer"),S.error("Provided a JSEP to a createOffer");return}else if(!y&&(!g||!g.type||!g.sdp)){n.error("A valid JSEP is required for createAnswer"),S.error("A valid JSEP is required for createAnswer");return}if(S.media&&!S.tracks){if(S.tracks=n.mediaToTracks(S.media),S.simulcast===!0||S.simulcast2===!0||S.svc){for(let b of S.tracks)if(b.type==="video"){S.simulcast===!0||S.simulcast2===!0?b.simulcast=!0:S.svc&&(b.svc=S.svc);break}}n.warn("Deprecated media object passed, use tracks instead. Automatically translated to:",S.tracks)}if(S.tracks&&!Array.isArray(S.tracks)){n.error("Tracks must be an array"),S.error("Tracks must be an array");return}let A=j.get(p);if(!A||!A.webrtcStuff){n.warn("Invalid handle"),S.error("Invalid handle");return}let w=A.webrtcStuff;w.trickle=Ve(S.trickle);try{if(ui(p,S),y&&await Gt(p,S),g){if(await w.pc.setRemoteDescription(g),n.log("Remote description accepted!"),w.remoteSdp=g.sdp,w.candidates&&w.candidates.length>0){for(let N=0;N<w.candidates.length;N++){let F=w.candidates[N];n.debug("Adding remote candidate:",F),!F||F.completed===!0?w.pc.addIceCandidate(n.endOfCandidates):w.pc.addIceCandidate(F)}w.candidates=[]}await Gt(p,S);let b=await Qt(p,S);S.success(b)}else{let b=await ci(p,S);S.success(b)}}catch(b){n.error(b),S.error(b)}}function Xt(p,y){y=y||{},y.success=typeof y.success=="function"?y.success:n.noop,y.error=typeof y.error=="function"?y.error:ar,y.customizeSdp=typeof y.customizeSdp=="function"?y.customizeSdp:n.noop;let S=y.jsep,g=j.get(p);if(!g||!g.webrtcStuff){n.warn("Invalid handle"),y.error("Invalid handle");return}let A=g.webrtcStuff;if(S){if(!A.pc){n.warn("Wait, no PeerConnection?? if this is an answer, use createAnswer and not handleRemoteJsep"),y.error("No PeerConnection: if this is an answer, use createAnswer and not handleRemoteJsep");return}y.customizeSdp(S),A.pc.setRemoteDescription(S).then(function(){if(n.log("Remote description accepted!"),A.remoteSdp=S.sdp,A.candidates&&A.candidates.length>0){for(let w=0;w<A.candidates.length;w++){let b=A.candidates[w];n.debug("Adding remote candidate:",b),!b||b.completed===!0?A.pc.addIceCandidate(n.endOfCandidates):A.pc.addIceCandidate(b)}A.candidates=[]}y.success()},y.error)}else y.error("Invalid JSEP")}async function ci(p,y){y=y||{},y.customizeSdp=typeof y.customizeSdp=="function"?y.customizeSdp:n.noop;let S=j.get(p);if(!S||!S.webrtcStuff)throw n.warn("Invalid handle"),"Invalid handle";let g=S.webrtcStuff;n.log("Creating offer (iceDone="+g.iceDone+")");let A={};y.iceRestart===!0&&(A.iceRestart=!0),n.debug(A);let b=await g.pc.createOffer(A);n.debug(b);let N={type:"offer",sdp:b.sdp};return y.customizeSdp(N),b.sdp=N.sdp,n.log("Setting local description"),g.mySdp={type:"offer",sdp:b.sdp},await g.pc.setLocalDescription(b),g.mediaConstraints=A,!g.iceDone&&!g.trickle?(n.log("Waiting for all candidates..."),null):((g.insertableStreams||g.externalEncryption)&&(b.e2ee=!0),b)}async function Qt(p,y){y=y||{},y.customizeSdp=typeof y.customizeSdp=="function"?y.customizeSdp:n.noop;let S=j.get(p);if(!S||!S.webrtcStuff)throw n.warn("Invalid handle"),"Invalid handle";let g=S.webrtcStuff;n.log("Creating answer (iceDone="+g.iceDone+")");let A=await g.pc.createAnswer();n.debug(A);let w={type:"answer",sdp:A.sdp};return y.customizeSdp(w),A.sdp=w.sdp,n.log("Setting local description"),g.mySdp={type:"answer",sdp:A.sdp},await g.pc.setLocalDescription(A),!g.iceDone&&!g.trickle?(n.log("Waiting for all candidates..."),null):((g.insertableStreams||g.externalEncryption)&&(A.e2ee=!0),A)}function en(p,y){y=y||{},y.success=typeof y.success=="function"?y.success:n.noop,y.error=typeof y.error=="function"?y.error:n.noop;let S=j.get(p);if(!S||!S.webrtcStuff){n.warn("Invalid handle, not sending anything");return}let g=S.webrtcStuff;if(n.log("Sending offer/answer SDP..."),!g.mySdp){n.warn("Local SDP instance is invalid, not sending anything...");return}g.mySdp={type:g.pc.localDescription.type,sdp:g.pc.localDescription.sdp},g.trickle===!1&&(g.mySdp.trickle=!1),n.debug(y),g.sdpSent=!0,y.success(g.mySdp)}async function sr(p,y){if(y=y||{},y.success=typeof y.success=="function"?y.success:n.noop,y.error=typeof y.error=="function"?y.error:n.noop,y.tracks&&!Array.isArray(y.tracks)){n.error("Tracks must be an array"),y.error("Tracks must be an array");return}for(let S of y.tracks)(S.add||!S.replace&&!S.remove)&&(S.replace=!0);try{await Gt(p,y),y.success()}catch(S){n.error(S),y.error(S)}}async function Gt(p,y){let S=j.get(p);if(!S||!S.webrtcStuff)throw n.warn("Invalid handle, not sending anything"),"Invalid handle";let g=S.webrtcStuff;if(!g.pc)throw n.warn("Invalid PeerConnection"),"Invalid PeerConnection";let A=y.tracks;if(!A||!Array.isArray(A)||A.length===0)return;let w=!1,b={};for(let P of A){if(delete P.gumGroup,!P.type||!["audio","video"].includes(P.type)||!P.capture||P.capture instanceof MediaStreamTrack)continue;let O=P.group?P.group:"default";b[O]||(b[O]={}),!b[O][P.type]&&(P.gumGroup=O,b[O][P.type]=P)}let N=Object.keys(b);for(let P of N){let O=b[P];(!O.audio||!O.video)&&(O.audio&&delete O.audio.gumGroup,O.video&&delete O.video.gumGroup,delete b[P])}let F=!!y.jsep;for(let P of A){if(!P.type){n.warn("Missing track type:",P);continue}if(P.type==="data"){if(g.pc.ondatachannel){n.warn("Data channel exists already, not creating another one");continue}n.log("Creating default data channel"),Wt(p,n.dataChanDefaultLabel,null,!1),g.pc.ondatachannel=function(k){n.log("Data channel created by Janus:",k),Wt(p,k.channel.label,k.channel.protocol,k.channel)};continue}if((typeof P.add>"u"||P.add===null)&&(typeof P.remove>"u"||P.remove===null)&&(typeof P.replace>"u"||P.replace===null)&&(P.add=!0),P.add&&P.remove||P.add&&P.remove&&P.replace){n.warn("Conflicting actions for track, ignoring:",P);continue}P.add&&P.replace?(n.warn("Both add and replace provided, falling back to replace:",P),delete P.add):P.remove&&P.replace&&(n.warn("Both remove and replace provided, falling back to remove:",P),delete P.replace);let O=P.type;P.type==="screen"&&(O="video");let G=null,te=null;if(P.mid?G=g.pc.getTransceivers().find(k=>k.mid===P.mid&&k.receiver.track.kind===O):P.add||(G=g.pc.getTransceivers().find(k=>k.receiver.track.kind===O)),P.replace||P.remove){if(!G){n.warn("Couldn't find a transceiver for track:",P);continue}if(!G.sender){n.warn("No sender in the transceiver for track:",P);continue}te=G.sender}if(F&&!G&&(G=g.pc.getTransceivers().find(k=>k.receiver.track.kind===O),!G)){n.warn("Couldn't find a transceiver for track:",P);continue}let le=null,dt=null;if((P.remove||P.replace)&&(n.log("Removing track from PeerConnection",P),dt=te.track?te.track.id:null,await te.replaceTrack(null),dt&&g.myStream)){let k=null;if(O==="audio"&&g.myStream.getAudioTracks()&&g.myStream.getAudioTracks().length)for(let se of g.myStream.getAudioTracks())se.id===dt&&(k=se,n.log("Removing audio track:",k));else if(O==="video"&&g.myStream.getVideoTracks()&&g.myStream.getVideoTracks().length)for(let se of g.myStream.getVideoTracks())se.id===dt&&(k=se,n.log("Removing video track:",k));if(k){try{g.myStream.removeTrack(k),S.onlocaltrack(k,!1)}catch(se){n.error("Error calling onlocaltrack on removal for renegotiation",se)}if(k.dontStop!==!0)try{k.stop()}catch{}}}if(P.capture){if(P.gumGroup&&b[P.gumGroup]&&b[P.gumGroup].stream){let k=b[P.gumGroup].stream;le=P.type==="audio"?k.getAudioTracks()[0]:k.getVideoTracks()[0],delete b[P.gumGroup].stream,delete b[P.gumGroup],delete P.gumGroup}else if(P.capture instanceof MediaStreamTrack)le=P.capture;else{w||(w=!0,S.consentDialog(!0));let k=n.trackConstraints(P),se=null;if(P.type==="audio"||P.type==="video"){if(P.gumGroup){let Ee=P.type==="audio"?"video":"audio";if(b[P.gumGroup]&&b[P.gumGroup][Ee]){let Bt=b[P.gumGroup][Ee],ur=n.trackConstraints(Bt);k[Ee]=ur[Ee]}}se=await navigator.mediaDevices.getUserMedia(k),P.gumGroup&&k.audio&&k.video&&(b[P.gumGroup].stream=se,delete P.gumGroup)}else se=await navigator.mediaDevices.getDisplayMedia(k);le=P.type==="audio"?se.getAudioTracks()[0]:se.getVideoTracks()[0]}if(P.replace){await te.replaceTrack(le);let k="sendrecv";(P.recv===!1||G.direction==="inactive"||G.direction==="sendonly")&&(k="sendonly"),G.setDirection?G.setDirection(k):G.direction=k}else{if(g.myStream||(g.myStream=new MediaStream),O==="audio"||!P.simulcast&&!P.svc)te=g.pc.addTrack(le,g.myStream),G=g.pc.getTransceivers().find(k=>k.sender===te);else if(P.simulcast){n.log("Enabling rid-based simulcasting:",le);let k=Pt(P.simulcastMaxBitrates);G=g.pc.addTransceiver(le,{direction:"sendrecv",streams:[g.myStream],sendEncodings:P.sendEncodings||[{rid:"h",active:!0,scalabilityMode:"L1T2",maxBitrate:k.high},{rid:"m",active:!0,scalabilityMode:"L1T2",maxBitrate:k.medium,scaleResolutionDownBy:2},{rid:"l",active:!0,scalabilityMode:"L1T2",maxBitrate:k.low,scaleResolutionDownBy:4}]})}else n.log("Enabling SVC ("+P.svc+"):",le),G=g.pc.addTransceiver(le,{direction:"sendrecv",streams:[g.myStream],sendEncodings:[{scalabilityMode:P.svc}]});if(te||(te=G?G.sender:null),P.codec)if(n.webRTCAdapter.browserDetails.browser==="firefox")n.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",P);else if(typeof P.codec!="string")n.warn("Invalid codec value, ignoring for track:",P);else{let k=O+"/"+P.codec.toLowerCase(),se=RTCRtpReceiver.getCapabilities(O).codecs.filter(function(Ee){return Ee.mimeType.toLowerCase()===k});if(!se||se.length===0)n.warn("Codec not supported in this browser for this track, ignoring:",P);else if(G)try{G.setCodecPreferences(se)}catch(Ee){n.warn("Failed enforcing codec for this "+O+" track:",Ee)}}if(P.bitrate){if(P.simulcast||P.svc)n.warn("Ignoring bitrate for simulcast/SVC track, use sendEncodings for that");else if(isNaN(P.bitrate)||P.bitrate<0)n.warn("Ignoring invalid bitrate for track:",P);else if(te){let k=te.getParameters();!k||!k.encodings||k.encodings.length===0?n.warn("No encodings in the sender parameters, ignoring bitrate for track:",P):(k.encodings[0].maxBitrate=P.bitrate,await te.setParameters(k))}}if(O==="video"&&P.framerate){if(P.simulcast||P.svc)n.warn("Ignoring framerate for simulcast/SVC track, use sendEncodings for that");else if(isNaN(P.framerate)||P.framerate<0)n.warn("Ignoring invalid framerate for track:",P);else if(te){let k=te.getParameters();!k||!k.encodings||k.encodings.length===0?n.warn("No encodings in the sender parameters, ignoring framerate for track:",P):(k.encodings[0].maxFramerate=P.framerate,await te.setParameters(k))}}if(P.transforms){if(te&&P.transforms.sender){let k=null;RTCRtpSender.prototype.createEncodedStreams?k=te.createEncodedStreams():(RTCRtpSender.prototype.createAudioEncodedStreams||RTCRtpSender.prototype.createEncodedVideoStreams)&&(O==="audio"?k=te.createEncodedAudioStreams():O==="video"&&(k=te.createEncodedVideoStreams())),k&&(console.log("Insertable Streams sender transform:",k),k.readableStream&&k.writableStream?k.readableStream.pipeThrough(P.transforms.sender).pipeTo(k.writableStream):k.readable&&k.writable&&k.readable.pipeThrough(P.transforms.sender).pipeTo(k.writable))}if(G&&G.receiver&&P.transforms.receiver){let k=null;RTCRtpReceiver.prototype.createEncodedStreams?k=G.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&(O==="audio"?k=G.receiver.createEncodedAudioStreams():O==="video"&&(k=G.receiver.createEncodedVideoStreams())),k&&(console.log("Insertable Streams receiver transform:",k),k.readableStream&&k.writableStream?k.readableStream.pipeThrough(P.transforms.receiver).pipeTo(k.writableStream):k.readable&&k.writable&&k.readable.pipeThrough(P.transforms.receiver).pipeTo(k.writable))}}}le&&P.dontStop===!0&&(le.dontStop=!0)}else if(P.recv&&(G||(G=g.pc.addTransceiver(O)),G)){if(P.codec)if(n.webRTCAdapter.browserDetails.browser==="firefox")n.warn("setCodecPreferences not supported in Firefox, ignoring codec for track:",P);else if(typeof P.codec!="string")n.warn("Invalid codec value, ignoring for track:",P);else{let k=O+"/"+P.codec.toLowerCase(),se=RTCRtpReceiver.getCapabilities(O).codecs.filter(function(Ee){return Ee.mimeType.toLowerCase()===k});if(!se||se.length===0)n.warn("Codec not supported in this browser for this track, ignoring:",P);else try{G.setCodecPreferences(se)}catch(Ee){n.warn("Failed enforcing codec for this "+O+" track:",Ee)}}if(G.receiver&&P.transforms&&P.transforms.receiver){let k=null;RTCRtpReceiver.prototype.createEncodedStreams?k=G.receiver.createEncodedStreams():(RTCRtpReceiver.prototype.createAudioEncodedStreams||RTCRtpReceiver.prototype.createEncodedVideoStreams)&&(O==="audio"?k=G.receiver.createEncodedAudioStreams():O==="video"&&(k=G.receiver.createEncodedVideoStreams())),k&&(console.log("Insertable Streams receiver transform:",k),k.readableStream&&k.writableStream?k.readableStream.pipeThrough(P.transforms.receiver).pipeTo(k.writableStream):k.readable&&k.writable&&k.readable.pipeThrough(P.transforms.receiver).pipeTo(k.writable))}}if(le){g.myStream.addTrack(le),le.onended=function(k){n.log("Local track removed:",k);try{S.onlocaltrack(k.target,!1)}catch(se){n.error("Error calling onlocaltrack following end",se)}};try{S.onlocaltrack(le,!0)}catch(k){n.error("Error calling onlocaltrack for track add",k)}}if(G){let k=G.direction,se=null,Ee=le&&G.sender.track,Bt=P.recv!==!1&&G.receiver.track;Ee&&Bt?se="sendrecv":Ee&&!Bt?se="sendonly":!Ee&&Bt?se="recvonly":!Ee&&!Bt&&(se="inactive"),se&&se!==k&&(n.warn("Changing direction of transceiver to "+se+" (was "+k+")",P),G.setDirection?G.setDirection(se):G.direction=se)}}w&&S.consentDialog(!1)}function tn(p){let y=j.get(p);if(!y||!y.webrtcStuff)return n.warn("Invalid handle"),null;let S=y.webrtcStuff;if(!S.pc)return n.warn("Invalid PeerConnection"),null;let g=[],A=S.pc.getTransceivers();for(let w of A){let b=null;w.sender&&w.sender.track&&(b={mid:w.mid},b.type=w.sender.track.kind,b.id=w.sender.track.id,b.label=w.sender.track.label),b&&g.push(b)}return g}function Fn(p){let y=j.get(p);if(!y||!y.webrtcStuff)return n.warn("Invalid handle"),null;let S=y.webrtcStuff;if(!S.pc)return n.warn("Invalid PeerConnection"),null;let g=[],A=S.pc.getTransceivers();for(let w of A){let b=null;w.receiver&&w.receiver.track&&(b={mid:w.mid},b.type=w.receiver.track.kind,b.id=w.receiver.track.id,b.label=w.receiver.track.label),b&&g.push(b)}return g}function Oe(p,y,S,g){g=typeof g=="function"?g:n.noop;let A=j.get(p);if(!A||!A.webrtcStuff){n.warn("Invalid handle"),g(0);return}let w=S?"remote":"local",b=A.webrtcStuff;if(b.volume[w]||(b.volume[w]={value:0}),b.pc&&b.pc.getStats&&(n.webRTCAdapter.browserDetails.browser==="chrome"||n.webRTCAdapter.browserDetails.browser==="safari")){let N=b.pc;if(y){let F=b.pc.getTransceivers().find(P=>P.mid===y&&P.receiver.track.kind==="audio");if(!F){n.warn("No audio transceiver with mid "+y),g(0);return}if(S&&!F.receiver){n.warn("Remote transceiver track unavailable"),g(0);return}else if(!S&&!F.sender){n.warn("Local transceiver track unavailable"),g(0);return}N=S?F.receiver:F.sender}return N.getStats().then(function(F){F.forEach(function(P){!P||P.kind!=="audio"||S&&!P.remoteSource||!S&&P.type!=="media-source"||g(P.audioLevel?P.audioLevel:0)})}),b.volume[w].value}else{n.warn("Getting the "+w+" volume unsupported by browser"),g(0);return}}function St(p,y,S){let g=j.get(p);if(!g||!g.webrtcStuff)return n.warn("Invalid handle"),!0;let A=g.webrtcStuff;if(!A.pc)return n.warn("Invalid PeerConnection"),!0;if(!A.myStream)return n.warn("Invalid local MediaStream"),!0;if(S){if(!A.myStream.getVideoTracks()||A.myStream.getVideoTracks().length===0)return n.warn("No video track"),!0;if(y){let w=A.pc.getTransceivers().find(b=>b.mid===y&&b.receiver.track.kind==="video");return w?!w.sender||!w.sender.track?(n.warn("No video sender with mid "+y),!0):!w.sender.track.enabled:(n.warn("No video transceiver with mid "+y),!0)}else return!A.myStream.getVideoTracks()[0].enabled}else{if(!A.myStream.getAudioTracks()||A.myStream.getAudioTracks().length===0)return n.warn("No audio track"),!0;if(y){let w=A.pc.getTransceivers().find(b=>b.mid===y&&b.receiver.track.kind==="audio");return w?!w.sender||!w.sender.track?(n.warn("No audio sender with mid "+y),!0):!w.sender.track.enabled:(n.warn("No audio transceiver with mid "+y),!0)}else return!A.myStream.getAudioTracks()[0].enabled}}function _t(p,y,S,g){let A=j.get(p);if(!A||!A.webrtcStuff)return n.warn("Invalid handle"),!1;let w=A.webrtcStuff;if(!w.pc)return n.warn("Invalid PeerConnection"),!1;if(!w.myStream)return n.warn("Invalid local MediaStream"),!1;if(S){if(!w.myStream.getVideoTracks()||w.myStream.getVideoTracks().length===0)return n.warn("No video track"),!1;if(y){let b=w.pc.getTransceivers().find(N=>N.mid===y&&N.receiver.track.kind==="video");if(!b)return n.warn("No video transceiver with mid "+y),!1;if(!b.sender||!b.sender.track)return n.warn("No video sender with mid "+y),!1;b.sender.track.enabled=!g}else for(const b of w.myStream.getVideoTracks())b.enabled=!g}else{if(!w.myStream.getAudioTracks()||w.myStream.getAudioTracks().length===0)return n.warn("No audio track"),!1;if(y){let b=w.pc.getTransceivers().find(N=>N.mid===y&&N.receiver.track.kind==="audio");if(!b)return n.warn("No audio transceiver with mid "+y),!1;if(!b.sender||!b.sender.track)return n.warn("No audio sender with mid "+y),!1;b.sender.track.enabled=!g}else for(const b of w.myStream.getAudioTracks())b.enabled=!g}return!0}function tt(p,y){let S=j.get(p);if(!S||!S.webrtcStuff)return n.warn("Invalid handle"),"Invalid handle";let g=S.webrtcStuff;if(!g.pc)return"Invalid PeerConnection";if(g.pc.getStats){let A=g.pc,w=y||"default";if(y){let b=g.pc.getTransceivers().find(N=>N.mid===y&&N.receiver.track.kind==="video");if(!b)return n.warn("No video transceiver with mid "+y),"No video transceiver with mid "+y;if(!b.receiver)return n.warn("No video receiver with mid "+y),"No video receiver with mid "+y;A=b.receiver}return g.bitrate[w]||(g.bitrate[w]={timer:null,bsnow:null,bsbefore:null,tsnow:null,tsbefore:null,value:"0 kbits/sec"}),g.bitrate[w].timer?g.bitrate[w].value:(n.log("Starting bitrate timer"+(y?" for mid "+y:"")+" (via getStats)"),g.bitrate[w].timer=setInterval(function(){A.getStats().then(function(b){b.forEach(function(N){if(!N)return;let F=!1;if(((N.mediaType==="video"||N.kind==="video"||N.id.toLowerCase().indexOf("video")>-1)&&N.type==="inbound-rtp"&&N.id.indexOf("rtcp")<0||N.type=="ssrc"&&N.bytesReceived&&(N.googCodecName==="VP8"||N.googCodecName===""))&&(F=!0),F)if(g.bitrate[w].bsnow=N.bytesReceived,g.bitrate[w].tsnow=N.timestamp,g.bitrate[w].bsbefore===null||g.bitrate[w].tsbefore===null)g.bitrate[w].bsbefore=g.bitrate[w].bsnow,g.bitrate[w].tsbefore=g.bitrate[w].tsnow;else{let P=g.bitrate[w].tsnow-g.bitrate[w].tsbefore;n.webRTCAdapter.browserDetails.browser==="safari"&&(P=P/1e3);let O=Math.round((g.bitrate[w].bsnow-g.bitrate[w].bsbefore)*8/P);n.webRTCAdapter.browserDetails.browser==="safari"&&(O=parseInt(O/1e3)),g.bitrate[w].value=O+" kbits/sec",g.bitrate[w].bsbefore=g.bitrate[w].bsnow,g.bitrate[w].tsbefore=g.bitrate[w].tsnow}})})},1e3),"0 kbits/sec")}else return n.warn("Getting the video bitrate unsupported by browser"),"Feature unsupported by browser"}function kn(p,y,S){let g=j.get(p);if(!g||!g.webrtcStuff){n.warn("Invalid handle");return}let A=g.webrtcStuff;if(!A.pc){n.warn("Invalid PeerConnection");return}let w=A.pc.getTransceivers().find(N=>N.mid===y);if(!w){n.warn("No transceiver with mid",y);return}if(!w.sender){n.warn("No sender for transceiver with mid",y);return}let b=w.sender.getParameters();!b||!b.encodings||b.encodings.length===0?n.warn("No parameters encodings"):b.encodings.length>1?n.warn("Ignoring bitrate for simulcast track, use sendEncodings for that"):isNaN(S)||S<0?n.warn("Invalid bitrate (must be a positive integer)"):(b.encodings[0].maxBitrate=S,w.sender.setParameters(b))}function ar(p){n.error("WebRTC error:",p)}function Et(p,y){n.log("Cleaning WebRTC stuff");let S=j.get(p);if(!S)return;let g=S.webrtcStuff;if(g){if(y===!0){let A={janus:"hangup",transaction:n.randomString(12)};S.token&&(A.token=S.token),pe&&(A.apisecret=pe),n.debug("Sending hangup request (handle="+p+"):"),n.debug(A),u?(A.session_id=V,A.handle_id=p,c.send(JSON.stringify(A))):n.httpAPICall(R+"/"+V+"/"+p,{verb:"POST",withCredentials:Z,body:A})}g.volume&&(g.volume.local&&g.volume.local.timer&&clearInterval(g.volume.local.timer),g.volume.remote&&g.volume.remote.timer&&clearInterval(g.volume.remote.timer));for(let A in g.bitrate)g.bitrate[A].timer&&clearInterval(g.bitrate[A].timer);g.bitrate={},!g.streamExternal&&g.myStream&&(n.log("Stopping local stream tracks"),n.stopAllTracks(g.myStream)),g.streamExternal=!1,g.myStream=null;try{g.pc.close()}catch{}g.pc=null,g.candidates=null,g.mySdp=null,g.remoteSdp=null,g.iceDone=!1,g.dataChannel={},g.dtmfSender=null,g.insertableStreams=!1,g.externalEncryption=!1}S.oncleanup()}function Ve(p){return n.debug("isTrickleEnabled:",p),p!==!1}}return n})}(Ro)),Ro.exports}var tv=ev(),Qe=No(tv);let Ou=!0,Iu=!0;function Qn(o,s,n){const i=o.match(s);return i&&i.length>=n&&parseFloat(i[n],10)}function gn(o,s,n){if(!o.RTCPeerConnection)return;const i=o.RTCPeerConnection.prototype,u=i.addEventListener;i.addEventListener=function(d,m){if(d!==s)return u.apply(this,arguments);const _=T=>{const R=n(T);R&&(m.handleEvent?m.handleEvent(R):m(R))};return this._eventMap=this._eventMap||{},this._eventMap[s]||(this._eventMap[s]=new Map),this._eventMap[s].set(m,_),u.apply(this,[d,_])};const c=i.removeEventListener;i.removeEventListener=function(d,m){if(d!==s||!this._eventMap||!this._eventMap[s])return c.apply(this,arguments);if(!this._eventMap[s].has(m))return c.apply(this,arguments);const _=this._eventMap[s].get(m);return this._eventMap[s].delete(m),this._eventMap[s].size===0&&delete this._eventMap[s],Object.keys(this._eventMap).length===0&&delete this._eventMap,c.apply(this,[d,_])},Object.defineProperty(i,"on"+s,{get(){return this["_on"+s]},set(d){this["_on"+s]&&(this.removeEventListener(s,this["_on"+s]),delete this["_on"+s]),d&&this.addEventListener(s,this["_on"+s]=d)},enumerable:!0,configurable:!0})}function nv(o){return typeof o!="boolean"?new Error("Argument type: "+typeof o+". Please use a boolean."):(Ou=o,o?"adapter.js logging disabled":"adapter.js logging enabled")}function rv(o){return typeof o!="boolean"?new Error("Argument type: "+typeof o+". Please use a boolean."):(Iu=!o,"adapter.js deprecation warnings "+(o?"disabled":"enabled"))}function Du(){if(typeof window=="object"){if(Ou)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Wo(o,s){Iu&&console.warn(o+" is deprecated, please use "+s+" instead.")}function iv(o){const s={browser:null,version:null};if(typeof o>"u"||!o.navigator||!o.navigator.userAgent)return s.browser="Not a browser.",s;const{navigator:n}=o;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(u=>u.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)s.browser="firefox",s.version=parseInt(Qn(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||o.isSecureContext===!1&&o.webkitRTCPeerConnection)s.browser="chrome",s.version=parseInt(Qn(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(o.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))s.browser="safari",s.version=parseInt(Qn(n.userAgent,/AppleWebKit\/(\d+)\./,1)),s.supportsUnifiedPlan=o.RTCRtpTransceiver&&"currentDirection"in o.RTCRtpTransceiver.prototype,s._safariVersion=Qn(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return s.browser="Not a supported browser.",s;return s}function gu(o){return Object.prototype.toString.call(o)==="[object Object]"}function Mu(o){return gu(o)?Object.keys(o).reduce(function(s,n){const i=gu(o[n]),u=i?Mu(o[n]):o[n],c=i&&!Object.keys(u).length;return u===void 0||c?s:Object.assign(s,{[n]:u})},{}):o}function wo(o,s,n){!s||n.has(s.id)||(n.set(s.id,s),Object.keys(s).forEach(i=>{i.endsWith("Id")?wo(o,o.get(s[i]),n):i.endsWith("Ids")&&s[i].forEach(u=>{wo(o,o.get(u),n)})}))}function mu(o,s,n){const i=n?"outbound-rtp":"inbound-rtp",u=new Map;if(s===null)return u;const c=[];return o.forEach(d=>{d.type==="track"&&d.trackIdentifier===s.id&&c.push(d)}),c.forEach(d=>{o.forEach(m=>{m.type===i&&m.trackId===d.id&&wo(o,m,u)})}),u}const vu=Du;function Lu(o,s){const n=o&&o.navigator;if(!n.mediaDevices)return;const i=function(m){if(typeof m!="object"||m.mandatory||m.optional)return m;const _={};return Object.keys(m).forEach(T=>{if(T==="require"||T==="advanced"||T==="mediaSource")return;const R=typeof m[T]=="object"?m[T]:{ideal:m[T]};R.exact!==void 0&&typeof R.exact=="number"&&(R.min=R.max=R.exact);const M=function(B,z){return B?B+z.charAt(0).toUpperCase()+z.slice(1):z==="deviceId"?"sourceId":z};if(R.ideal!==void 0){_.optional=_.optional||[];let B={};typeof R.ideal=="number"?(B[M("min",T)]=R.ideal,_.optional.push(B),B={},B[M("max",T)]=R.ideal,_.optional.push(B)):(B[M("",T)]=R.ideal,_.optional.push(B))}R.exact!==void 0&&typeof R.exact!="number"?(_.mandatory=_.mandatory||{},_.mandatory[M("",T)]=R.exact):["min","max"].forEach(B=>{R[B]!==void 0&&(_.mandatory=_.mandatory||{},_.mandatory[M(B,T)]=R[B])})}),m.advanced&&(_.optional=(_.optional||[]).concat(m.advanced)),_},u=function(m,_){if(s.version>=61)return _(m);if(m=JSON.parse(JSON.stringify(m)),m&&typeof m.audio=="object"){const T=function(R,M,B){M in R&&!(B in R)&&(R[B]=R[M],delete R[M])};m=JSON.parse(JSON.stringify(m)),T(m.audio,"autoGainControl","googAutoGainControl"),T(m.audio,"noiseSuppression","googNoiseSuppression"),m.audio=i(m.audio)}if(m&&typeof m.video=="object"){let T=m.video.facingMode;T=T&&(typeof T=="object"?T:{ideal:T});const R=s.version<66;if(T&&(T.exact==="user"||T.exact==="environment"||T.ideal==="user"||T.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!R)){delete m.video.facingMode;let M;if(T.exact==="environment"||T.ideal==="environment"?M=["back","rear"]:(T.exact==="user"||T.ideal==="user")&&(M=["front"]),M)return n.mediaDevices.enumerateDevices().then(B=>{B=B.filter(Z=>Z.kind==="videoinput");let z=B.find(Z=>M.some(ee=>Z.label.toLowerCase().includes(ee)));return!z&&B.length&&M.includes("back")&&(z=B[B.length-1]),z&&(m.video.deviceId=T.exact?{exact:z.deviceId}:{ideal:z.deviceId}),m.video=i(m.video),vu("chrome: "+JSON.stringify(m)),_(m)})}m.video=i(m.video)}return vu("chrome: "+JSON.stringify(m)),_(m)},c=function(m){return s.version>=64?m:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[m.name]||m.name,message:m.message,constraint:m.constraint||m.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},d=function(m,_,T){u(m,R=>{n.webkitGetUserMedia(R,_,M=>{T&&T(c(M))})})};if(n.getUserMedia=d.bind(n),n.mediaDevices.getUserMedia){const m=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(_){return u(_,T=>m(T).then(R=>{if(T.audio&&!R.getAudioTracks().length||T.video&&!R.getVideoTracks().length)throw R.getTracks().forEach(M=>{M.stop()}),new DOMException("","NotFoundError");return R},R=>Promise.reject(c(R))))}}}function Uu(o){o.MediaStream=o.MediaStream||o.webkitMediaStream}function Fu(o){if(typeof o=="object"&&o.RTCPeerConnection&&!("ontrack"in o.RTCPeerConnection.prototype)){Object.defineProperty(o.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const s=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",u=>{let c;o.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(m=>m.track&&m.track.id===u.track.id):c={track:u.track};const d=new Event("track");d.track=u.track,d.receiver=c,d.transceiver={receiver:c},d.streams=[i.stream],this.dispatchEvent(d)}),i.stream.getTracks().forEach(u=>{let c;o.RTCPeerConnection.prototype.getReceivers?c=this.getReceivers().find(m=>m.track&&m.track.id===u.id):c={track:u};const d=new Event("track");d.track=u,d.receiver=c,d.transceiver={receiver:c},d.streams=[i.stream],this.dispatchEvent(d)})},this.addEventListener("addstream",this._ontrackpoly)),s.apply(this,arguments)}}else gn(o,"track",s=>(s.transceiver||Object.defineProperty(s,"transceiver",{value:{receiver:s.receiver}}),s))}function ku(o){if(typeof o=="object"&&o.RTCPeerConnection&&!("getSenders"in o.RTCPeerConnection.prototype)&&"createDTMFSender"in o.RTCPeerConnection.prototype){const s=function(u,c){return{track:c,get dtmf(){return this._dtmf===void 0&&(c.kind==="audio"?this._dtmf=u.createDTMFSender(c):this._dtmf=null),this._dtmf},_pc:u}};if(!o.RTCPeerConnection.prototype.getSenders){o.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const u=o.RTCPeerConnection.prototype.addTrack;o.RTCPeerConnection.prototype.addTrack=function(m,_){let T=u.apply(this,arguments);return T||(T=s(this,m),this._senders.push(T)),T};const c=o.RTCPeerConnection.prototype.removeTrack;o.RTCPeerConnection.prototype.removeTrack=function(m){c.apply(this,arguments);const _=this._senders.indexOf(m);_!==-1&&this._senders.splice(_,1)}}const n=o.RTCPeerConnection.prototype.addStream;o.RTCPeerConnection.prototype.addStream=function(c){this._senders=this._senders||[],n.apply(this,[c]),c.getTracks().forEach(d=>{this._senders.push(s(this,d))})};const i=o.RTCPeerConnection.prototype.removeStream;o.RTCPeerConnection.prototype.removeStream=function(c){this._senders=this._senders||[],i.apply(this,[c]),c.getTracks().forEach(d=>{const m=this._senders.find(_=>_.track===d);m&&this._senders.splice(this._senders.indexOf(m),1)})}}else if(typeof o=="object"&&o.RTCPeerConnection&&"getSenders"in o.RTCPeerConnection.prototype&&"createDTMFSender"in o.RTCPeerConnection.prototype&&o.RTCRtpSender&&!("dtmf"in o.RTCRtpSender.prototype)){const s=o.RTCPeerConnection.prototype.getSenders;o.RTCPeerConnection.prototype.getSenders=function(){const i=s.apply(this,[]);return i.forEach(u=>u._pc=this),i},Object.defineProperty(o.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Nu(o){if(!(typeof o=="object"&&o.RTCPeerConnection&&o.RTCRtpSender&&o.RTCRtpReceiver))return;if(!("getStats"in o.RTCRtpSender.prototype)){const n=o.RTCPeerConnection.prototype.getSenders;n&&(o.RTCPeerConnection.prototype.getSenders=function(){const c=n.apply(this,[]);return c.forEach(d=>d._pc=this),c});const i=o.RTCPeerConnection.prototype.addTrack;i&&(o.RTCPeerConnection.prototype.addTrack=function(){const c=i.apply(this,arguments);return c._pc=this,c}),o.RTCRtpSender.prototype.getStats=function(){const c=this;return this._pc.getStats().then(d=>mu(d,c.track,!0))}}if(!("getStats"in o.RTCRtpReceiver.prototype)){const n=o.RTCPeerConnection.prototype.getReceivers;n&&(o.RTCPeerConnection.prototype.getReceivers=function(){const u=n.apply(this,[]);return u.forEach(c=>c._pc=this),u}),gn(o,"track",i=>(i.receiver._pc=i.srcElement,i)),o.RTCRtpReceiver.prototype.getStats=function(){const u=this;return this._pc.getStats().then(c=>mu(c,u.track,!1))}}if(!("getStats"in o.RTCRtpSender.prototype&&"getStats"in o.RTCRtpReceiver.prototype))return;const s=o.RTCPeerConnection.prototype.getStats;o.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof o.MediaStreamTrack){const i=arguments[0];let u,c,d;return this.getSenders().forEach(m=>{m.track===i&&(u?d=!0:u=m)}),this.getReceivers().forEach(m=>(m.track===i&&(c?d=!0:c=m),m.track===i)),d||u&&c?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):u?u.getStats():c?c.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return s.apply(this,arguments)}}function Wu(o){o.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(d=>this._shimmedLocalStreams[d][0])};const s=o.RTCPeerConnection.prototype.addTrack;o.RTCPeerConnection.prototype.addTrack=function(d,m){if(!m)return s.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const _=s.apply(this,arguments);return this._shimmedLocalStreams[m.id]?this._shimmedLocalStreams[m.id].indexOf(_)===-1&&this._shimmedLocalStreams[m.id].push(_):this._shimmedLocalStreams[m.id]=[m,_],_};const n=o.RTCPeerConnection.prototype.addStream;o.RTCPeerConnection.prototype.addStream=function(d){this._shimmedLocalStreams=this._shimmedLocalStreams||{},d.getTracks().forEach(T=>{if(this.getSenders().find(M=>M.track===T))throw new DOMException("Track already exists.","InvalidAccessError")});const m=this.getSenders();n.apply(this,arguments);const _=this.getSenders().filter(T=>m.indexOf(T)===-1);this._shimmedLocalStreams[d.id]=[d].concat(_)};const i=o.RTCPeerConnection.prototype.removeStream;o.RTCPeerConnection.prototype.removeStream=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[d.id],i.apply(this,arguments)};const u=o.RTCPeerConnection.prototype.removeTrack;o.RTCPeerConnection.prototype.removeTrack=function(d){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},d&&Object.keys(this._shimmedLocalStreams).forEach(m=>{const _=this._shimmedLocalStreams[m].indexOf(d);_!==-1&&this._shimmedLocalStreams[m].splice(_,1),this._shimmedLocalStreams[m].length===1&&delete this._shimmedLocalStreams[m]}),u.apply(this,arguments)}}function Gu(o,s){if(!o.RTCPeerConnection)return;if(o.RTCPeerConnection.prototype.addTrack&&s.version>=65)return Wu(o);const n=o.RTCPeerConnection.prototype.getLocalStreams;o.RTCPeerConnection.prototype.getLocalStreams=function(){const R=n.apply(this);return this._reverseStreams=this._reverseStreams||{},R.map(M=>this._reverseStreams[M.id])};const i=o.RTCPeerConnection.prototype.addStream;o.RTCPeerConnection.prototype.addStream=function(R){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},R.getTracks().forEach(M=>{if(this.getSenders().find(z=>z.track===M))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[R.id]){const M=new o.MediaStream(R.getTracks());this._streams[R.id]=M,this._reverseStreams[M.id]=R,R=M}i.apply(this,[R])};const u=o.RTCPeerConnection.prototype.removeStream;o.RTCPeerConnection.prototype.removeStream=function(R){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.apply(this,[this._streams[R.id]||R]),delete this._reverseStreams[this._streams[R.id]?this._streams[R.id].id:R.id],delete this._streams[R.id]},o.RTCPeerConnection.prototype.addTrack=function(R,M){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const B=[].slice.call(arguments,1);if(B.length!==1||!B[0].getTracks().find(ee=>ee===R))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(ee=>ee.track===R))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const Z=this._streams[M.id];if(Z)Z.addTrack(R),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const ee=new o.MediaStream([R]);this._streams[M.id]=ee,this._reverseStreams[ee.id]=M,this.addStream(ee)}return this.getSenders().find(ee=>ee.track===R)};function c(T,R){let M=R.sdp;return Object.keys(T._reverseStreams||[]).forEach(B=>{const z=T._reverseStreams[B],Z=T._streams[z.id];M=M.replace(new RegExp(Z.id,"g"),z.id)}),new RTCSessionDescription({type:R.type,sdp:M})}function d(T,R){let M=R.sdp;return Object.keys(T._reverseStreams||[]).forEach(B=>{const z=T._reverseStreams[B],Z=T._streams[z.id];M=M.replace(new RegExp(z.id,"g"),Z.id)}),new RTCSessionDescription({type:R.type,sdp:M})}["createOffer","createAnswer"].forEach(function(T){const R=o.RTCPeerConnection.prototype[T],M={[T](){const B=arguments;return arguments.length&&typeof arguments[0]=="function"?R.apply(this,[Z=>{const ee=c(this,Z);B[0].apply(null,[ee])},Z=>{B[1]&&B[1].apply(null,Z)},arguments[2]]):R.apply(this,arguments).then(Z=>c(this,Z))}};o.RTCPeerConnection.prototype[T]=M[T]});const m=o.RTCPeerConnection.prototype.setLocalDescription;o.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?m.apply(this,arguments):(arguments[0]=d(this,arguments[0]),m.apply(this,arguments))};const _=Object.getOwnPropertyDescriptor(o.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(o.RTCPeerConnection.prototype,"localDescription",{get(){const T=_.get.apply(this);return T.type===""?T:c(this,T)}}),o.RTCPeerConnection.prototype.removeTrack=function(R){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!R._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(R._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let B;Object.keys(this._streams).forEach(z=>{this._streams[z].getTracks().find(ee=>R.track===ee)&&(B=this._streams[z])}),B&&(B.getTracks().length===1?this.removeStream(this._reverseStreams[B.id]):B.removeTrack(R.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Oo(o,s){!o.RTCPeerConnection&&o.webkitRTCPeerConnection&&(o.RTCPeerConnection=o.webkitRTCPeerConnection),o.RTCPeerConnection&&s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=o.RTCPeerConnection.prototype[n],u={[n](){return arguments[0]=new(n==="addIceCandidate"?o.RTCIceCandidate:o.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};o.RTCPeerConnection.prototype[n]=u[n]})}function Bu(o,s){gn(o,"negotiationneeded",n=>{const i=n.target;if(!((s.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var yu=Object.freeze({__proto__:null,fixNegotiationNeeded:Bu,shimAddTrackRemoveTrack:Gu,shimAddTrackRemoveTrackWithNative:Wu,shimGetSendersWithDtmf:ku,shimGetUserMedia:Lu,shimMediaStream:Uu,shimOnTrack:Fu,shimPeerConnection:Oo,shimSenderReceiverGetStats:Nu});function qu(o,s){const n=o&&o.navigator,i=o&&o.MediaStreamTrack;if(n.getUserMedia=function(u,c,d){Wo("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(u).then(c,d)},!(s.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const u=function(d,m,_){m in d&&!(_ in d)&&(d[_]=d[m],delete d[m])},c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(d){return typeof d=="object"&&typeof d.audio=="object"&&(d=JSON.parse(JSON.stringify(d)),u(d.audio,"autoGainControl","mozAutoGainControl"),u(d.audio,"noiseSuppression","mozNoiseSuppression")),c(d)},i&&i.prototype.getSettings){const d=i.prototype.getSettings;i.prototype.getSettings=function(){const m=d.apply(this,arguments);return u(m,"mozAutoGainControl","autoGainControl"),u(m,"mozNoiseSuppression","noiseSuppression"),m}}if(i&&i.prototype.applyConstraints){const d=i.prototype.applyConstraints;i.prototype.applyConstraints=function(m){return this.kind==="audio"&&typeof m=="object"&&(m=JSON.parse(JSON.stringify(m)),u(m,"autoGainControl","mozAutoGainControl"),u(m,"noiseSuppression","mozNoiseSuppression")),d.apply(this,[m])}}}}function ov(o,s){o.navigator.mediaDevices&&"getDisplayMedia"in o.navigator.mediaDevices||o.navigator.mediaDevices&&(o.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const u=new DOMException("getDisplayMedia without video constraints is undefined");return u.name="NotFoundError",u.code=8,Promise.reject(u)}return i.video===!0?i.video={mediaSource:s}:i.video.mediaSource=s,o.navigator.mediaDevices.getUserMedia(i)})}function Hu(o){typeof o=="object"&&o.RTCTrackEvent&&"receiver"in o.RTCTrackEvent.prototype&&!("transceiver"in o.RTCTrackEvent.prototype)&&Object.defineProperty(o.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Io(o,s){if(typeof o!="object"||!(o.RTCPeerConnection||o.mozRTCPeerConnection))return;!o.RTCPeerConnection&&o.mozRTCPeerConnection&&(o.RTCPeerConnection=o.mozRTCPeerConnection),s.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(u){const c=o.RTCPeerConnection.prototype[u],d={[u](){return arguments[0]=new(u==="addIceCandidate"?o.RTCIceCandidate:o.RTCSessionDescription)(arguments[0]),c.apply(this,arguments)}};o.RTCPeerConnection.prototype[u]=d[u]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=o.RTCPeerConnection.prototype.getStats;o.RTCPeerConnection.prototype.getStats=function(){const[c,d,m]=arguments;return i.apply(this,[c||null]).then(_=>{if(s.version<53&&!d)try{_.forEach(T=>{T.type=n[T.type]||T.type})}catch(T){if(T.name!=="TypeError")throw T;_.forEach((R,M)=>{_.set(M,Object.assign({},R,{type:n[R.type]||R.type}))})}return _}).then(d,m)}}function Ju(o){if(!(typeof o=="object"&&o.RTCPeerConnection&&o.RTCRtpSender)||o.RTCRtpSender&&"getStats"in o.RTCRtpSender.prototype)return;const s=o.RTCPeerConnection.prototype.getSenders;s&&(o.RTCPeerConnection.prototype.getSenders=function(){const u=s.apply(this,[]);return u.forEach(c=>c._pc=this),u});const n=o.RTCPeerConnection.prototype.addTrack;n&&(o.RTCPeerConnection.prototype.addTrack=function(){const u=n.apply(this,arguments);return u._pc=this,u}),o.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function zu(o){if(!(typeof o=="object"&&o.RTCPeerConnection&&o.RTCRtpSender)||o.RTCRtpSender&&"getStats"in o.RTCRtpReceiver.prototype)return;const s=o.RTCPeerConnection.prototype.getReceivers;s&&(o.RTCPeerConnection.prototype.getReceivers=function(){const i=s.apply(this,[]);return i.forEach(u=>u._pc=this),i}),gn(o,"track",n=>(n.receiver._pc=n.srcElement,n)),o.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Vu(o){!o.RTCPeerConnection||"removeStream"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.removeStream=function(n){Wo("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function Ku(o){o.DataChannel&&!o.RTCDataChannel&&(o.RTCDataChannel=o.DataChannel)}function $u(o){if(!(typeof o=="object"&&o.RTCPeerConnection))return;const s=o.RTCPeerConnection.prototype.addTransceiver;s&&(o.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const u=i.length>0;u&&i.forEach(d=>{if("rid"in d&&!/^[a-z0-9]{0,16}$/i.test(d.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in d&&!(parseFloat(d.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in d&&!(parseFloat(d.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const c=s.apply(this,arguments);if(u){const{sender:d}=c,m=d.getParameters();(!("encodings"in m)||m.encodings.length===1&&Object.keys(m.encodings[0]).length===0)&&(m.encodings=i,d.sendEncodings=i,this.setParametersPromises.push(d.setParameters(m).then(()=>{delete d.sendEncodings}).catch(()=>{delete d.sendEncodings})))}return c})}function Yu(o){if(!(typeof o=="object"&&o.RTCRtpSender))return;const s=o.RTCRtpSender.prototype.getParameters;s&&(o.RTCRtpSender.prototype.getParameters=function(){const i=s.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function ju(o){if(!(typeof o=="object"&&o.RTCPeerConnection))return;const s=o.RTCPeerConnection.prototype.createOffer;o.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}function Zu(o){if(!(typeof o=="object"&&o.RTCPeerConnection))return;const s=o.RTCPeerConnection.prototype.createAnswer;o.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>s.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):s.apply(this,arguments)}}var Su=Object.freeze({__proto__:null,shimAddTransceiver:$u,shimCreateAnswer:Zu,shimCreateOffer:ju,shimGetDisplayMedia:ov,shimGetParameters:Yu,shimGetUserMedia:qu,shimOnTrack:Hu,shimPeerConnection:Io,shimRTCDataChannel:Ku,shimReceiverGetStats:zu,shimRemoveStream:Vu,shimSenderGetStats:Ju});function Xu(o){if(!(typeof o!="object"||!o.RTCPeerConnection)){if("getLocalStreams"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in o.RTCPeerConnection.prototype)){const s=o.RTCPeerConnection.prototype.addTrack;o.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(u=>s.call(this,u,i)),i.getVideoTracks().forEach(u=>s.call(this,u,i))},o.RTCPeerConnection.prototype.addTrack=function(i,...u){return u&&u.forEach(c=>{this._localStreams?this._localStreams.includes(c)||this._localStreams.push(c):this._localStreams=[c]}),s.apply(this,arguments)}}"removeStream"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const u=n.getTracks();this.getSenders().forEach(c=>{u.includes(c.track)&&this.removeTrack(c)})})}}function Qu(o){if(!(typeof o!="object"||!o.RTCPeerConnection)&&("getRemoteStreams"in o.RTCPeerConnection.prototype||(o.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in o.RTCPeerConnection.prototype))){Object.defineProperty(o.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(u=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(u))return;this._remoteStreams.push(u);const c=new Event("addstream");c.stream=u,this.dispatchEvent(c)})})}});const s=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(u){u.streams.forEach(c=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(c)>=0)return;i._remoteStreams.push(c);const d=new Event("addstream");d.stream=c,i.dispatchEvent(d)})}),s.apply(i,arguments)}}}function ec(o){if(typeof o!="object"||!o.RTCPeerConnection)return;const s=o.RTCPeerConnection.prototype,n=s.createOffer,i=s.createAnswer,u=s.setLocalDescription,c=s.setRemoteDescription,d=s.addIceCandidate;s.createOffer=function(T,R){const M=arguments.length>=2?arguments[2]:arguments[0],B=n.apply(this,[M]);return R?(B.then(T,R),Promise.resolve()):B},s.createAnswer=function(T,R){const M=arguments.length>=2?arguments[2]:arguments[0],B=i.apply(this,[M]);return R?(B.then(T,R),Promise.resolve()):B};let m=function(_,T,R){const M=u.apply(this,[_]);return R?(M.then(T,R),Promise.resolve()):M};s.setLocalDescription=m,m=function(_,T,R){const M=c.apply(this,[_]);return R?(M.then(T,R),Promise.resolve()):M},s.setRemoteDescription=m,m=function(_,T,R){const M=d.apply(this,[_]);return R?(M.then(T,R),Promise.resolve()):M},s.addIceCandidate=m}function tc(o){const s=o&&o.navigator;if(s.mediaDevices&&s.mediaDevices.getUserMedia){const n=s.mediaDevices,i=n.getUserMedia.bind(n);s.mediaDevices.getUserMedia=u=>i(nc(u))}!s.getUserMedia&&s.mediaDevices&&s.mediaDevices.getUserMedia&&(s.getUserMedia=(function(i,u,c){s.mediaDevices.getUserMedia(i).then(u,c)}).bind(s))}function nc(o){return o&&o.video!==void 0?Object.assign({},o,{video:Mu(o.video)}):o}function rc(o){if(!o.RTCPeerConnection)return;const s=o.RTCPeerConnection;o.RTCPeerConnection=function(i,u){if(i&&i.iceServers){const c=[];for(let d=0;d<i.iceServers.length;d++){let m=i.iceServers[d];m.urls===void 0&&m.url?(Wo("RTCIceServer.url","RTCIceServer.urls"),m=JSON.parse(JSON.stringify(m)),m.urls=m.url,delete m.url,c.push(m)):c.push(i.iceServers[d])}i.iceServers=c}return new s(i,u)},o.RTCPeerConnection.prototype=s.prototype,"generateCertificate"in s&&Object.defineProperty(o.RTCPeerConnection,"generateCertificate",{get(){return s.generateCertificate}})}function ic(o){typeof o=="object"&&o.RTCTrackEvent&&"receiver"in o.RTCTrackEvent.prototype&&!("transceiver"in o.RTCTrackEvent.prototype)&&Object.defineProperty(o.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function oc(o){const s=o.RTCPeerConnection.prototype.createOffer;o.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const u=this.getTransceivers().find(d=>d.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&u?u.direction==="sendrecv"?u.setDirection?u.setDirection("sendonly"):u.direction="sendonly":u.direction==="recvonly"&&(u.setDirection?u.setDirection("inactive"):u.direction="inactive"):i.offerToReceiveAudio===!0&&!u&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const c=this.getTransceivers().find(d=>d.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&c?c.direction==="sendrecv"?c.setDirection?c.setDirection("sendonly"):c.direction="sendonly":c.direction==="recvonly"&&(c.setDirection?c.setDirection("inactive"):c.direction="inactive"):i.offerToReceiveVideo===!0&&!c&&this.addTransceiver("video",{direction:"recvonly"})}return s.apply(this,arguments)}}function sc(o){typeof o!="object"||o.AudioContext||(o.AudioContext=o.webkitAudioContext)}var _u=Object.freeze({__proto__:null,shimAudioContext:sc,shimCallbacksAPI:ec,shimConstraints:nc,shimCreateOfferLegacy:oc,shimGetUserMedia:tc,shimLocalStreamsAPI:Xu,shimRTCIceServerUrls:rc,shimRemoteStreamsAPI:Qu,shimTrackEventTransceiver:ic}),bo={exports:{}},Cu;function sv(){return Cu||(Cu=1,function(o){const s={};s.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},s.localCName=s.generateIdentifier(),s.splitLines=function(n){return n.trim().split("\n").map(i=>i.trim())},s.splitSections=function(n){return n.split("\nm=").map((u,c)=>(c>0?"m="+u:u).trim()+"\r\n")},s.getDescription=function(n){const i=s.splitSections(n);return i&&i[0]},s.getMediaSections=function(n){const i=s.splitSections(n);return i.shift(),i},s.matchPrefix=function(n,i){return s.splitLines(n).filter(u=>u.indexOf(i)===0)},s.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const u={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let c=8;c<i.length;c+=2)switch(i[c]){case"raddr":u.relatedAddress=i[c+1];break;case"rport":u.relatedPort=parseInt(i[c+1],10);break;case"tcptype":u.tcpType=i[c+1];break;case"ufrag":u.ufrag=i[c+1],u.usernameFragment=i[c+1];break;default:u[i[c]]===void 0&&(u[i[c]]=i[c+1]);break}return u},s.writeCandidate=function(n){const i=[];i.push(n.foundation);const u=n.component;u==="rtp"?i.push(1):u==="rtcp"?i.push(2):i.push(u),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const c=n.type;return i.push("typ"),i.push(c),c!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},s.parseIceOptions=function(n){return n.substring(14).split(" ")},s.parseRtpMap=function(n){let i=n.substring(9).split(" ");const u={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),u.name=i[0],u.clockRate=parseInt(i[1],10),u.channels=i.length===3?parseInt(i[2],10):1,u.numChannels=u.channels,u},s.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const u=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(u!==1?"/"+u:"")+"\r\n"},s.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},s.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+"\r\n"},s.parseFmtp=function(n){const i={};let u;const c=n.substring(n.indexOf(" ")+1).split(";");for(let d=0;d<c.length;d++)u=c[d].trim().split("="),i[u[0].trim()]=u[1];return i},s.writeFmtp=function(n){let i="",u=n.payloadType;if(n.preferredPayloadType!==void 0&&(u=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const c=[];Object.keys(n.parameters).forEach(d=>{n.parameters[d]!==void 0?c.push(d+"="+n.parameters[d]):c.push(d)}),i+="a=fmtp:"+u+" "+c.join(";")+"\r\n"}return i},s.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},s.writeRtcpFb=function(n){let i="",u=n.payloadType;return n.preferredPayloadType!==void 0&&(u=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(c=>{i+="a=rtcp-fb:"+u+" "+c.type+(c.parameter&&c.parameter.length?" "+c.parameter:"")+"\r\n"}),i},s.parseSsrcMedia=function(n){const i=n.indexOf(" "),u={ssrc:parseInt(n.substring(7,i),10)},c=n.indexOf(":",i);return c>-1?(u.attribute=n.substring(i+1,c),u.value=n.substring(c+1)):u.attribute=n.substring(i+1),u},s.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(u=>parseInt(u,10))}},s.getMid=function(n){const i=s.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},s.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},s.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:s.matchPrefix(n+i,"a=fingerprint:").map(s.parseFingerprint)}},s.writeDtlsParameters=function(n,i){let u="a=setup:"+i+"\r\n";return n.fingerprints.forEach(c=>{u+="a=fingerprint:"+c.algorithm+" "+c.value+"\r\n"}),u},s.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},s.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?s.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+"\r\n"},s.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},s.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},s.getCryptoParameters=function(n,i){return s.matchPrefix(n+i,"a=crypto:").map(s.parseCryptoLine)},s.getIceParameters=function(n,i){const u=s.matchPrefix(n+i,"a=ice-ufrag:")[0],c=s.matchPrefix(n+i,"a=ice-pwd:")[0];return u&&c?{usernameFragment:u.substring(12),password:c.substring(10)}:null},s.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+"\r\na=ice-pwd:"+n.password+"\r\n";return n.iceLite&&(i+="a=ice-lite\r\n"),i},s.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},c=s.splitLines(n)[0].split(" ");i.profile=c[2];for(let m=3;m<c.length;m++){const _=c[m],T=s.matchPrefix(n,"a=rtpmap:"+_+" ")[0];if(T){const R=s.parseRtpMap(T),M=s.matchPrefix(n,"a=fmtp:"+_+" ");switch(R.parameters=M.length?s.parseFmtp(M[0]):{},R.rtcpFeedback=s.matchPrefix(n,"a=rtcp-fb:"+_+" ").map(s.parseRtcpFb),i.codecs.push(R),R.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(R.name.toUpperCase());break}}}s.matchPrefix(n,"a=extmap:").forEach(m=>{i.headerExtensions.push(s.parseExtmap(m))});const d=s.matchPrefix(n,"a=rtcp-fb:* ").map(s.parseRtcpFb);return i.codecs.forEach(m=>{d.forEach(_=>{m.rtcpFeedback.find(R=>R.type===_.type&&R.parameter===_.parameter)||m.rtcpFeedback.push(_)})}),i},s.writeRtpDescription=function(n,i){let u="";u+="m="+n+" ",u+=i.codecs.length>0?"9":"0",u+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",u+=i.codecs.map(d=>d.preferredPayloadType!==void 0?d.preferredPayloadType:d.payloadType).join(" ")+"\r\n",u+="c=IN IP4 0.0.0.0\r\n",u+="a=rtcp:9 IN IP4 0.0.0.0\r\n",i.codecs.forEach(d=>{u+=s.writeRtpMap(d),u+=s.writeFmtp(d),u+=s.writeRtcpFb(d)});let c=0;return i.codecs.forEach(d=>{d.maxptime>c&&(c=d.maxptime)}),c>0&&(u+="a=maxptime:"+c+"\r\n"),i.headerExtensions&&i.headerExtensions.forEach(d=>{u+=s.writeExtmap(d)}),u},s.parseRtpEncodingParameters=function(n){const i=[],u=s.parseRtpParameters(n),c=u.fecMechanisms.indexOf("RED")!==-1,d=u.fecMechanisms.indexOf("ULPFEC")!==-1,m=s.matchPrefix(n,"a=ssrc:").map(B=>s.parseSsrcMedia(B)).filter(B=>B.attribute==="cname"),_=m.length>0&&m[0].ssrc;let T;const R=s.matchPrefix(n,"a=ssrc-group:FID").map(B=>B.substring(17).split(" ").map(Z=>parseInt(Z,10)));R.length>0&&R[0].length>1&&R[0][0]===_&&(T=R[0][1]),u.codecs.forEach(B=>{if(B.name.toUpperCase()==="RTX"&&B.parameters.apt){let z={ssrc:_,codecPayloadType:parseInt(B.parameters.apt,10)};_&&T&&(z.rtx={ssrc:T}),i.push(z),c&&(z=JSON.parse(JSON.stringify(z)),z.fec={ssrc:_,mechanism:d?"red+ulpfec":"red"},i.push(z))}}),i.length===0&&_&&i.push({ssrc:_});let M=s.matchPrefix(n,"b=");return M.length&&(M[0].indexOf("b=TIAS:")===0?M=parseInt(M[0].substring(7),10):M[0].indexOf("b=AS:")===0?M=parseInt(M[0].substring(5),10)*1e3*.95-50*40*8:M=void 0,i.forEach(B=>{B.maxBitrate=M})),i},s.parseRtcpParameters=function(n){const i={},u=s.matchPrefix(n,"a=ssrc:").map(m=>s.parseSsrcMedia(m)).filter(m=>m.attribute==="cname")[0];u&&(i.cname=u.value,i.ssrc=u.ssrc);const c=s.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=c.length>0,i.compound=c.length===0;const d=s.matchPrefix(n,"a=rtcp-mux");return i.mux=d.length>0,i},s.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+="a=rtcp-rsize\r\n"),n.mux&&(i+="a=rtcp-mux\r\n"),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+"\r\n"),i},s.parseMsid=function(n){let i;const u=s.matchPrefix(n,"a=msid:");if(u.length===1)return i=u[0].substring(7).split(" "),{stream:i[0],track:i[1]};const c=s.matchPrefix(n,"a=ssrc:").map(d=>s.parseSsrcMedia(d)).filter(d=>d.attribute==="msid");if(c.length>0)return i=c[0].value.split(" "),{stream:i[0],track:i[1]}},s.parseSctpDescription=function(n){const i=s.parseMLine(n),u=s.matchPrefix(n,"a=max-message-size:");let c;u.length>0&&(c=parseInt(u[0].substring(19),10)),isNaN(c)&&(c=65536);const d=s.matchPrefix(n,"a=sctp-port:");if(d.length>0)return{port:parseInt(d[0].substring(12),10),protocol:i.fmt,maxMessageSize:c};const m=s.matchPrefix(n,"a=sctpmap:");if(m.length>0){const _=m[0].substring(10).split(" ");return{port:parseInt(_[0],10),protocol:_[1],maxMessageSize:c}}},s.writeSctpDescription=function(n,i){let u=[];return n.protocol!=="DTLS/SCTP"?u=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+i.port+"\r\n"]:u=["m="+n.kind+" 9 "+n.protocol+" "+i.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+i.port+" "+i.protocol+" 65535\r\n"],i.maxMessageSize!==void 0&&u.push("a=max-message-size:"+i.maxMessageSize+"\r\n"),u.join("")},s.generateSessionId=function(){return Math.random().toString().substr(2,22)},s.writeSessionBoilerplate=function(n,i,u){let c;const d=i!==void 0?i:2;return n?c=n:c=s.generateSessionId(),"v=0\r\no="+(u||"thisisadapterortc")+" "+c+" "+d+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},s.getDirection=function(n,i){const u=s.splitLines(n);for(let c=0;c<u.length;c++)switch(u[c]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return u[c].substring(2)}return i?s.getDirection(i):"sendrecv"},s.getKind=function(n){return s.splitLines(n)[0].split(" ")[0].substring(2)},s.isRejected=function(n){return n.split(" ",2)[1]==="0"},s.parseMLine=function(n){const u=s.splitLines(n)[0].substring(2).split(" ");return{kind:u[0],port:parseInt(u[1],10),protocol:u[2],fmt:u.slice(3).join(" ")}},s.parseOLine=function(n){const u=s.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:u[0],sessionId:u[1],sessionVersion:parseInt(u[2],10),netType:u[3],addressType:u[4],address:u[5]}},s.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=s.splitLines(n);for(let u=0;u<i.length;u++)if(i[u].length<2||i[u].charAt(1)!=="=")return!1;return!0},o.exports=s}(bo)),bo.exports}var ac=sv(),On=No(ac),av=Qm({__proto__:null,default:On},[ac]);function Qr(o){if(!o.RTCIceCandidate||o.RTCIceCandidate&&"foundation"in o.RTCIceCandidate.prototype)return;const s=o.RTCIceCandidate;o.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const u=new s(i),c=On.parseCandidate(i.candidate);for(const d in c)d in u||Object.defineProperty(u,d,{value:c[d]});return u.toJSON=function(){return{candidate:u.candidate,sdpMid:u.sdpMid,sdpMLineIndex:u.sdpMLineIndex,usernameFragment:u.usernameFragment}},u}return new s(i)},o.RTCIceCandidate.prototype=s.prototype,gn(o,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new o.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Do(o){!o.RTCIceCandidate||o.RTCIceCandidate&&"relayProtocol"in o.RTCIceCandidate.prototype||gn(o,"icecandidate",s=>{if(s.candidate){const n=On.parseCandidate(s.candidate.candidate);n.type==="relay"&&(s.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return s})}function ei(o,s){if(!o.RTCPeerConnection)return;"sctp"in o.RTCPeerConnection.prototype||Object.defineProperty(o.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(m){if(!m||!m.sdp)return!1;const _=On.splitSections(m.sdp);return _.shift(),_.some(T=>{const R=On.parseMLine(T);return R&&R.kind==="application"&&R.protocol.indexOf("SCTP")!==-1})},i=function(m){const _=m.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(_===null||_.length<2)return-1;const T=parseInt(_[1],10);return T!==T?-1:T},u=function(m){let _=65536;return s.browser==="firefox"&&(s.version<57?m===-1?_=16384:_=2147483637:s.version<60?_=s.version===57?65535:65536:_=2147483637),_},c=function(m,_){let T=65536;s.browser==="firefox"&&s.version===57&&(T=65535);const R=On.matchPrefix(m.sdp,"a=max-message-size:");return R.length>0?T=parseInt(R[0].substring(19),10):s.browser==="firefox"&&_!==-1&&(T=2147483637),T},d=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,s.browser==="chrome"&&s.version>=76){const{sdpSemantics:_}=this.getConfiguration();_==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const _=i(arguments[0]),T=u(_),R=c(arguments[0],_);let M;T===0&&R===0?M=Number.POSITIVE_INFINITY:T===0||R===0?M=Math.max(T,R):M=Math.min(T,R);const B={};Object.defineProperty(B,"maxMessageSize",{get(){return M}}),this._sctp=B}return d.apply(this,arguments)}}function ti(o){if(!(o.RTCPeerConnection&&"createDataChannel"in o.RTCPeerConnection.prototype))return;function s(i,u){const c=i.send;i.send=function(){const m=arguments[0],_=m.length||m.size||m.byteLength;if(i.readyState==="open"&&u.sctp&&_>u.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+u.sctp.maxMessageSize+" bytes)");return c.apply(i,arguments)}}const n=o.RTCPeerConnection.prototype.createDataChannel;o.RTCPeerConnection.prototype.createDataChannel=function(){const u=n.apply(this,arguments);return s(u,this),u},gn(o,"datachannel",i=>(s(i.channel,i.target),i))}function Mo(o){if(!o.RTCPeerConnection||"connectionState"in o.RTCPeerConnection.prototype)return;const s=o.RTCPeerConnection.prototype;Object.defineProperty(s,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(s,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=s[n];s[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=u=>{const c=u.target;if(c._lastConnectionState!==c.connectionState){c._lastConnectionState=c.connectionState;const d=new Event("connectionstatechange",u);c.dispatchEvent(d)}return u},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function Lo(o,s){if(!o.RTCPeerConnection||s.browser==="chrome"&&s.version>=71||s.browser==="safari"&&s._safariVersion>=13.1)return;const n=o.RTCPeerConnection.prototype.setRemoteDescription;o.RTCPeerConnection.prototype.setRemoteDescription=function(u){if(u&&u.sdp&&u.sdp.indexOf("\na=extmap-allow-mixed")!==-1){const c=u.sdp.split("\n").filter(d=>d.trim()!=="a=extmap-allow-mixed").join("\n");o.RTCSessionDescription&&u instanceof o.RTCSessionDescription?arguments[0]=new o.RTCSessionDescription({type:u.type,sdp:c}):u.sdp=c}return n.apply(this,arguments)}}function ni(o,s){if(!(o.RTCPeerConnection&&o.RTCPeerConnection.prototype))return;const n=o.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(o.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(s.browser==="chrome"&&s.version<78||s.browser==="firefox"&&s.version<68||s.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function ri(o,s){if(!(o.RTCPeerConnection&&o.RTCPeerConnection.prototype))return;const n=o.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(o.RTCPeerConnection.prototype.setLocalDescription=function(){let u=arguments[0]||{};if(typeof u!="object"||u.type&&u.sdp)return n.apply(this,arguments);if(u={type:u.type,sdp:u.sdp},!u.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":u.type="offer";break;default:u.type="answer";break}return u.sdp||u.type!=="offer"&&u.type!=="answer"?n.apply(this,[u]):(u.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(d=>n.apply(this,[d]))})}var uv=Object.freeze({__proto__:null,removeExtmapAllowMixed:Lo,shimAddIceCandidateNullOrEmpty:ni,shimConnectionState:Mo,shimMaxMessageSize:ei,shimParameterlessSetLocalDescription:ri,shimRTCIceCandidate:Qr,shimRTCIceCandidateRelayProtocol:Do,shimSendThrowTypeError:ti});function cv({window:o}={},s={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Du,i=iv(o),u={browserDetails:i,commonShim:uv,extractVersion:Qn,disableLog:nv,disableWarnings:rv,sdp:av};switch(i.browser){case"chrome":if(!yu||!Oo||!s.shimChrome)return n("Chrome shim is not included in this adapter release."),u;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),u;n("adapter.js shimming chrome."),u.browserShim=yu,ni(o,i),ri(o),Lu(o,i),Uu(o),Oo(o,i),Fu(o),Gu(o,i),ku(o),Nu(o),Bu(o,i),Qr(o),Do(o),Mo(o),ei(o,i),ti(o),Lo(o,i);break;case"firefox":if(!Su||!Io||!s.shimFirefox)return n("Firefox shim is not included in this adapter release."),u;n("adapter.js shimming firefox."),u.browserShim=Su,ni(o,i),ri(o),qu(o,i),Io(o,i),Hu(o),Vu(o),Ju(o),zu(o),Ku(o),$u(o),Yu(o),ju(o),Zu(o),Qr(o),Mo(o),ei(o,i),ti(o);break;case"safari":if(!_u||!s.shimSafari)return n("Safari shim is not included in this adapter release."),u;n("adapter.js shimming safari."),u.browserShim=_u,ni(o,i),ri(o),rc(o),oc(o),ec(o),Xu(o),Qu(o),ic(o),tc(o),sc(o),Qr(o),Do(o),ei(o,i),ti(o),Lo(o,i);break;default:n("Unsupported browser!");break}return u}const Tu=cv({window:typeof window>"u"?void 0:window});function kt(o){return typeof o=="function"}function uc(o){var s=function(i){Error.call(i),i.stack=new Error().stack},n=o(s);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Po=uc(function(o){return function(n){o(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map(function(i,u){return u+1+") "+i.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n}});function Uo(o,s){if(o){var n=o.indexOf(s);0<=n&&o.splice(n,1)}}var oi=function(){function o(s){this.initialTeardown=s,this.closed=!1,this._parentage=null,this._finalizers=null}return o.prototype.unsubscribe=function(){var s,n,i,u,c;if(!this.closed){this.closed=!0;var d=this._parentage;if(d)if(this._parentage=null,Array.isArray(d))try{for(var m=Eo(d),_=m.next();!_.done;_=m.next()){var T=_.value;T.remove(this)}}catch(ee){s={error:ee}}finally{try{_&&!_.done&&(n=m.return)&&n.call(m)}finally{if(s)throw s.error}}else d.remove(this);var R=this.initialTeardown;if(kt(R))try{R()}catch(ee){c=ee instanceof Po?ee.errors:[ee]}var M=this._finalizers;if(M){this._finalizers=null;try{for(var B=Eo(M),z=B.next();!z.done;z=B.next()){var Z=z.value;try{Ru(Z)}catch(ee){c=c!=null?c:[],ee instanceof Po?c=tr(tr([],Ao(c)),Ao(ee.errors)):c.push(ee)}}}catch(ee){i={error:ee}}finally{try{z&&!z.done&&(u=B.return)&&u.call(B)}finally{if(i)throw i.error}}}if(c)throw new Po(c)}},o.prototype.add=function(s){var n;if(s&&s!==this)if(this.closed)Ru(s);else{if(s instanceof o){if(s.closed||s._hasParent(this))return;s._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(s)}},o.prototype._hasParent=function(s){var n=this._parentage;return n===s||Array.isArray(n)&&n.includes(s)},o.prototype._addParent=function(s){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(s),n):n?[n,s]:s},o.prototype._removeParent=function(s){var n=this._parentage;n===s?this._parentage=null:Array.isArray(n)&&Uo(n,s)},o.prototype.remove=function(s){var n=this._finalizers;n&&Uo(n,s),s instanceof o&&s._removeParent(this)},o.EMPTY=function(){var s=new o;return s.closed=!0,s}(),o}(),cc=oi.EMPTY;function fc(o){return o instanceof oi||o&&"closed"in o&&kt(o.remove)&&kt(o.add)&&kt(o.unsubscribe)}function Ru(o){kt(o)?o():o.unsubscribe()}var fv={Promise:void 0},lv={setTimeout:function(o,s){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,tr([o,s],Ao(n)))},clearTimeout:function(o){return clearTimeout(o)},delegate:void 0};function dv(o){lv.setTimeout(function(){throw o})}function bu(){}function ii(o){o()}var lc=function(o){vt(s,o);function s(n){var i=o.call(this)||this;return i.isStopped=!1,n?(i.destination=n,fc(n)&&n.add(i)):i.destination=gv,i}return s.create=function(n,i,u){return new Fo(n,i,u)},s.prototype.next=function(n){this.isStopped||this._next(n)},s.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},s.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},s.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,o.prototype.unsubscribe.call(this),this.destination=null)},s.prototype._next=function(n){this.destination.next(n)},s.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},s.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},s}(oi),pv=function(){function o(s){this.partialObserver=s}return o.prototype.next=function(s){var n=this.partialObserver;if(n.next)try{n.next(s)}catch(i){Xr(i)}},o.prototype.error=function(s){var n=this.partialObserver;if(n.error)try{n.error(s)}catch(i){Xr(i)}else Xr(s)},o.prototype.complete=function(){var s=this.partialObserver;if(s.complete)try{s.complete()}catch(n){Xr(n)}},o}(),Fo=function(o){vt(s,o);function s(n,i,u){var c=o.call(this)||this,d;return kt(n)||!n?d={next:n!=null?n:void 0,error:i!=null?i:void 0,complete:u!=null?u:void 0}:d=n,c.destination=new pv(d),c}return s}(lc);function Xr(o){dv(o)}function hv(o){throw o}var gv={closed:!0,next:bu,error:hv,complete:bu},mv=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function vv(o){return o}function yv(o){return o.length===0?vv:o.length===1?o[0]:function(n){return o.reduce(function(i,u){return u(i)},n)}}var Pu=function(){function o(s){s&&(this._subscribe=s)}return o.prototype.lift=function(s){var n=new o;return n.source=this,n.operator=s,n},o.prototype.subscribe=function(s,n,i){var u=this,c=_v(s)?s:new Fo(s,n,i);return ii(function(){var d=u,m=d.operator,_=d.source;c.add(m?m.call(c,_):_?u._subscribe(c):u._trySubscribe(c))}),c},o.prototype._trySubscribe=function(s){try{return this._subscribe(s)}catch(n){s.error(n)}},o.prototype.forEach=function(s,n){var i=this;return n=xu(n),new n(function(u,c){var d=new Fo({next:function(m){try{s(m)}catch(_){c(_),d.unsubscribe()}},error:c,complete:u});i.subscribe(d)})},o.prototype._subscribe=function(s){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(s)},o.prototype[mv]=function(){return this},o.prototype.pipe=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];return yv(s)(this)},o.prototype.toPromise=function(s){var n=this;return s=xu(s),new s(function(i,u){var c;n.subscribe(function(d){return c=d},function(d){return u(d)},function(){return i(c)})})},o.create=function(s){return new o(s)},o}();function xu(o){var s;return(s=o!=null?o:fv.Promise)!==null&&s!==void 0?s:Promise}function Sv(o){return o&&kt(o.next)&&kt(o.error)&&kt(o.complete)}function _v(o){return o&&o instanceof lc||Sv(o)&&fc(o)}var Cv=uc(function(o){return function(){o(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),dn=function(o){vt(s,o);function s(){var n=o.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return s.prototype.lift=function(n){var i=new Eu(this,this);return i.operator=n,i},s.prototype._throwIfClosed=function(){if(this.closed)throw new Cv},s.prototype.next=function(n){var i=this;ii(function(){var u,c;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var d=Eo(i.currentObservers),m=d.next();!m.done;m=d.next()){var _=m.value;_.next(n)}}catch(T){u={error:T}}finally{try{m&&!m.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}}})},s.prototype.error=function(n){var i=this;ii(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=n;for(var u=i.observers;u.length;)u.shift().error(n)}})},s.prototype.complete=function(){var n=this;ii(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var i=n.observers;i.length;)i.shift().complete()}})},s.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(s.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),s.prototype._trySubscribe=function(n){return this._throwIfClosed(),o.prototype._trySubscribe.call(this,n)},s.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},s.prototype._innerSubscribe=function(n){var i=this,u=this,c=u.hasError,d=u.isStopped,m=u.observers;return c||d?cc:(this.currentObservers=null,m.push(n),new oi(function(){i.currentObservers=null,Uo(m,n)}))},s.prototype._checkFinalizedStatuses=function(n){var i=this,u=i.hasError,c=i.thrownError,d=i.isStopped;u?n.error(c):d&&n.complete()},s.prototype.asObservable=function(){var n=new Pu;return n.source=this,n},s.create=function(n,i){return new Eu(n,i)},s}(Pu),Eu=function(o){vt(s,o);function s(n,i){var u=o.call(this)||this;return u.destination=n,u.source=i,u}return s.prototype.next=function(n){var i,u;(u=(i=this.destination)===null||i===void 0?void 0:i.next)===null||u===void 0||u.call(i,n)},s.prototype.error=function(n){var i,u;(u=(i=this.destination)===null||i===void 0?void 0:i.error)===null||u===void 0||u.call(i,n)},s.prototype.complete=function(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)},s.prototype._subscribe=function(n){var i,u;return(u=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&u!==void 0?u:cc},s}(dn),bt=function(o){vt(s,o);function s(n){var i=o.call(this)||this;return i._value=n,i}return Object.defineProperty(s.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),s.prototype._subscribe=function(n){var i=o.prototype._subscribe.call(this,n);return!i.closed&&n.next(this._value),i},s.prototype.getValue=function(){var n=this,i=n.hasError,u=n.thrownError,c=n._value;if(i)throw u;return this._throwIfClosed(),c},s.prototype.next=function(n){o.prototype.next.call(this,this._value=n)},s}(dn),er={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var Tv=er.exports,Au;function Rv(){return Au||(Au=1,function(o,s){(function(){var n,i="4.17.21",u=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",m="Invalid `variable` option passed into `_.template`",_="__lodash_hash_undefined__",T=500,R="__lodash_placeholder__",M=1,B=2,z=4,Z=1,ee=2,ye=1,pe=2,yt=4,Le=8,Pt=16,ge=32,V=64,j=128,et=256,Nt=512,Ge=30,Mn="...",Ln=800,rr=16,Zt=1,si=2,ai=3,xt=1/0,ft=9007199254740991,ir=17976931348623157e292,Wt=NaN,ze=4294967295,or=ze-1,Un=ze>>>1,ui=[["ary",j],["bind",ye],["bindKey",pe],["curry",Le],["curryRight",Pt],["flip",Nt],["partial",ge],["partialRight",V],["rearg",et]],lt="[object Arguments]",Xt="[object Array]",ci="[object AsyncFunction]",Qt="[object Boolean]",en="[object Date]",sr="[object DOMException]",Gt="[object Error]",tn="[object Function]",Fn="[object GeneratorFunction]",Oe="[object Map]",St="[object Number]",_t="[object Null]",tt="[object Object]",kn="[object Promise]",ar="[object Proxy]",Et="[object RegExp]",Ve="[object Set]",p="[object String]",y="[object Symbol]",S="[object Undefined]",g="[object WeakMap]",A="[object WeakSet]",w="[object ArrayBuffer]",b="[object DataView]",N="[object Float32Array]",F="[object Float64Array]",P="[object Int8Array]",O="[object Int16Array]",G="[object Int32Array]",te="[object Uint8Array]",le="[object Uint8ClampedArray]",dt="[object Uint16Array]",k="[object Uint32Array]",se=/\b__p \+= '';/g,Ee=/\b(__p \+=) '' \+/g,Bt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ur=/&(?:amp|lt|gt|quot|#39);/g,Go=/[&<>"']/g,dc=RegExp(ur.source),pc=RegExp(Go.source),hc=/<%-([\s\S]+?)%>/g,gc=/<%([\s\S]+?)%>/g,Bo=/<%=([\s\S]+?)%>/g,mc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vc=/^\w*$/,yc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fi=/[\\^$.*+?()[\]{}|]/g,Sc=RegExp(fi.source),li=/^\s+/,_c=/\s/,Cc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Tc=/\{\n\/\* \[wrapped with (.+)\] \*/,Rc=/,? & /,bc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pc=/[()=,{}\[\]\/\s]/,xc=/\\(\\)?/g,Ec=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qo=/\w*$/,Ac=/^[-+]0x[0-9a-f]+$/i,wc=/^0b[01]+$/i,Oc=/^\[object .+?Constructor\]$/,Ic=/^0o[0-7]+$/i,Dc=/^(?:0|[1-9]\d*)$/,Mc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,cr=/($^)/,Lc=/['\n\r\u2028\u2029\\]/g,fr="\\ud800-\\udfff",Uc="\\u0300-\\u036f",Fc="\\ufe20-\\ufe2f",kc="\\u20d0-\\u20ff",Ho=Uc+Fc+kc,Jo="\\u2700-\\u27bf",zo="a-z\\xdf-\\xf6\\xf8-\\xff",Nc="\\xac\\xb1\\xd7\\xf7",Wc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Gc="\\u2000-\\u206f",Bc=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Vo="A-Z\\xc0-\\xd6\\xd8-\\xde",Ko="\\ufe0e\\ufe0f",$o=Nc+Wc+Gc+Bc,di="[']",qc="["+fr+"]",Yo="["+$o+"]",lr="["+Ho+"]",jo="\\d+",Hc="["+Jo+"]",Zo="["+zo+"]",Xo="[^"+fr+$o+jo+Jo+zo+Vo+"]",pi="\\ud83c[\\udffb-\\udfff]",Jc="(?:"+lr+"|"+pi+")",Qo="[^"+fr+"]",hi="(?:\\ud83c[\\udde6-\\uddff]){2}",gi="[\\ud800-\\udbff][\\udc00-\\udfff]",mn="["+Vo+"]",es="\\u200d",ts="(?:"+Zo+"|"+Xo+")",zc="(?:"+mn+"|"+Xo+")",ns="(?:"+di+"(?:d|ll|m|re|s|t|ve))?",rs="(?:"+di+"(?:D|LL|M|RE|S|T|VE))?",is=Jc+"?",os="["+Ko+"]?",Vc="(?:"+es+"(?:"+[Qo,hi,gi].join("|")+")"+os+is+")*",Kc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$c="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ss=os+is+Vc,Yc="(?:"+[Hc,hi,gi].join("|")+")"+ss,jc="(?:"+[Qo+lr+"?",lr,hi,gi,qc].join("|")+")",Zc=RegExp(di,"g"),Xc=RegExp(lr,"g"),mi=RegExp(pi+"(?="+pi+")|"+jc+ss,"g"),Qc=RegExp([mn+"?"+Zo+"+"+ns+"(?="+[Yo,mn,"$"].join("|")+")",zc+"+"+rs+"(?="+[Yo,mn+ts,"$"].join("|")+")",mn+"?"+ts+"+"+ns,mn+"+"+rs,$c,Kc,jo,Yc].join("|"),"g"),ef=RegExp("["+es+fr+Ho+Ko+"]"),tf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],rf=-1,Ce={};Ce[N]=Ce[F]=Ce[P]=Ce[O]=Ce[G]=Ce[te]=Ce[le]=Ce[dt]=Ce[k]=!0,Ce[lt]=Ce[Xt]=Ce[w]=Ce[Qt]=Ce[b]=Ce[en]=Ce[Gt]=Ce[tn]=Ce[Oe]=Ce[St]=Ce[tt]=Ce[Et]=Ce[Ve]=Ce[p]=Ce[g]=!1;var _e={};_e[lt]=_e[Xt]=_e[w]=_e[b]=_e[Qt]=_e[en]=_e[N]=_e[F]=_e[P]=_e[O]=_e[G]=_e[Oe]=_e[St]=_e[tt]=_e[Et]=_e[Ve]=_e[p]=_e[y]=_e[te]=_e[le]=_e[dt]=_e[k]=!0,_e[Gt]=_e[tn]=_e[g]=!1;var of={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},sf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},af={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},uf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cf=parseFloat,ff=parseInt,as=typeof Zr=="object"&&Zr&&Zr.Object===Object&&Zr,lf=typeof self=="object"&&self&&self.Object===Object&&self,De=as||lf||Function("return this")(),vi=s&&!s.nodeType&&s,nn=vi&&!0&&o&&!o.nodeType&&o,us=nn&&nn.exports===vi,yi=us&&as.process,nt=function(){try{var x=nn&&nn.require&&nn.require("util").types;return x||yi&&yi.binding&&yi.binding("util")}catch{}}(),cs=nt&&nt.isArrayBuffer,fs=nt&&nt.isDate,ls=nt&&nt.isMap,ds=nt&&nt.isRegExp,ps=nt&&nt.isSet,hs=nt&&nt.isTypedArray;function Ke(x,D,I){switch(I.length){case 0:return x.call(D);case 1:return x.call(D,I[0]);case 2:return x.call(D,I[0],I[1]);case 3:return x.call(D,I[0],I[1],I[2])}return x.apply(D,I)}function df(x,D,I,H){for(var X=-1,he=x==null?0:x.length;++X<he;){var Ae=x[X];D(H,Ae,I(Ae),x)}return H}function rt(x,D){for(var I=-1,H=x==null?0:x.length;++I<H&&D(x[I],I,x)!==!1;);return x}function pf(x,D){for(var I=x==null?0:x.length;I--&&D(x[I],I,x)!==!1;);return x}function gs(x,D){for(var I=-1,H=x==null?0:x.length;++I<H;)if(!D(x[I],I,x))return!1;return!0}function qt(x,D){for(var I=-1,H=x==null?0:x.length,X=0,he=[];++I<H;){var Ae=x[I];D(Ae,I,x)&&(he[X++]=Ae)}return he}function dr(x,D){var I=x==null?0:x.length;return!!I&&vn(x,D,0)>-1}function Si(x,D,I){for(var H=-1,X=x==null?0:x.length;++H<X;)if(I(D,x[H]))return!0;return!1}function Te(x,D){for(var I=-1,H=x==null?0:x.length,X=Array(H);++I<H;)X[I]=D(x[I],I,x);return X}function Ht(x,D){for(var I=-1,H=D.length,X=x.length;++I<H;)x[X+I]=D[I];return x}function _i(x,D,I,H){var X=-1,he=x==null?0:x.length;for(H&&he&&(I=x[++X]);++X<he;)I=D(I,x[X],X,x);return I}function hf(x,D,I,H){var X=x==null?0:x.length;for(H&&X&&(I=x[--X]);X--;)I=D(I,x[X],X,x);return I}function Ci(x,D){for(var I=-1,H=x==null?0:x.length;++I<H;)if(D(x[I],I,x))return!0;return!1}var gf=Ti("length");function mf(x){return x.split("")}function vf(x){return x.match(bc)||[]}function ms(x,D,I){var H;return I(x,function(X,he,Ae){if(D(X,he,Ae))return H=he,!1}),H}function pr(x,D,I,H){for(var X=x.length,he=I+(H?1:-1);H?he--:++he<X;)if(D(x[he],he,x))return he;return-1}function vn(x,D,I){return D===D?wf(x,D,I):pr(x,vs,I)}function yf(x,D,I,H){for(var X=I-1,he=x.length;++X<he;)if(H(x[X],D))return X;return-1}function vs(x){return x!==x}function ys(x,D){var I=x==null?0:x.length;return I?bi(x,D)/I:Wt}function Ti(x){return function(D){return D==null?n:D[x]}}function Ri(x){return function(D){return x==null?n:x[D]}}function Ss(x,D,I,H,X){return X(x,function(he,Ae,Se){I=H?(H=!1,he):D(I,he,Ae,Se)}),I}function Sf(x,D){var I=x.length;for(x.sort(D);I--;)x[I]=x[I].value;return x}function bi(x,D){for(var I,H=-1,X=x.length;++H<X;){var he=D(x[H]);he!==n&&(I=I===n?he:I+he)}return I}function Pi(x,D){for(var I=-1,H=Array(x);++I<x;)H[I]=D(I);return H}function _f(x,D){return Te(D,function(I){return[I,x[I]]})}function _s(x){return x&&x.slice(0,bs(x)+1).replace(li,"")}function $e(x){return function(D){return x(D)}}function xi(x,D){return Te(D,function(I){return x[I]})}function Nn(x,D){return x.has(D)}function Cs(x,D){for(var I=-1,H=x.length;++I<H&&vn(D,x[I],0)>-1;);return I}function Ts(x,D){for(var I=x.length;I--&&vn(D,x[I],0)>-1;);return I}function Cf(x,D){for(var I=x.length,H=0;I--;)x[I]===D&&++H;return H}var Tf=Ri(of),Rf=Ri(sf);function bf(x){return"\\"+uf[x]}function Pf(x,D){return x==null?n:x[D]}function yn(x){return ef.test(x)}function xf(x){return tf.test(x)}function Ef(x){for(var D,I=[];!(D=x.next()).done;)I.push(D.value);return I}function Ei(x){var D=-1,I=Array(x.size);return x.forEach(function(H,X){I[++D]=[X,H]}),I}function Rs(x,D){return function(I){return x(D(I))}}function Jt(x,D){for(var I=-1,H=x.length,X=0,he=[];++I<H;){var Ae=x[I];(Ae===D||Ae===R)&&(x[I]=R,he[X++]=I)}return he}function hr(x){var D=-1,I=Array(x.size);return x.forEach(function(H){I[++D]=H}),I}function Af(x){var D=-1,I=Array(x.size);return x.forEach(function(H){I[++D]=[H,H]}),I}function wf(x,D,I){for(var H=I-1,X=x.length;++H<X;)if(x[H]===D)return H;return-1}function Of(x,D,I){for(var H=I+1;H--;)if(x[H]===D)return H;return H}function Sn(x){return yn(x)?Df(x):gf(x)}function pt(x){return yn(x)?Mf(x):mf(x)}function bs(x){for(var D=x.length;D--&&_c.test(x.charAt(D)););return D}var If=Ri(af);function Df(x){for(var D=mi.lastIndex=0;mi.test(x);)++D;return D}function Mf(x){return x.match(mi)||[]}function Lf(x){return x.match(Qc)||[]}var Uf=function x(D){D=D==null?De:_n.defaults(De.Object(),D,_n.pick(De,nf));var I=D.Array,H=D.Date,X=D.Error,he=D.Function,Ae=D.Math,Se=D.Object,Ai=D.RegExp,Ff=D.String,it=D.TypeError,gr=I.prototype,kf=he.prototype,Cn=Se.prototype,mr=D["__core-js_shared__"],vr=kf.toString,ve=Cn.hasOwnProperty,Nf=0,Ps=function(){var e=/[^.]+$/.exec(mr&&mr.keys&&mr.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),yr=Cn.toString,Wf=vr.call(Se),Gf=De._,Bf=Ai("^"+vr.call(ve).replace(fi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Sr=us?D.Buffer:n,zt=D.Symbol,_r=D.Uint8Array,xs=Sr?Sr.allocUnsafe:n,Cr=Rs(Se.getPrototypeOf,Se),Es=Se.create,As=Cn.propertyIsEnumerable,Tr=gr.splice,ws=zt?zt.isConcatSpreadable:n,Wn=zt?zt.iterator:n,rn=zt?zt.toStringTag:n,Rr=function(){try{var e=cn(Se,"defineProperty");return e({},"",{}),e}catch{}}(),qf=D.clearTimeout!==De.clearTimeout&&D.clearTimeout,Hf=H&&H.now!==De.Date.now&&H.now,Jf=D.setTimeout!==De.setTimeout&&D.setTimeout,br=Ae.ceil,Pr=Ae.floor,wi=Se.getOwnPropertySymbols,zf=Sr?Sr.isBuffer:n,Os=D.isFinite,Vf=gr.join,Kf=Rs(Se.keys,Se),we=Ae.max,Ue=Ae.min,$f=H.now,Yf=D.parseInt,Is=Ae.random,jf=gr.reverse,Oi=cn(D,"DataView"),Gn=cn(D,"Map"),Ii=cn(D,"Promise"),Tn=cn(D,"Set"),Bn=cn(D,"WeakMap"),qn=cn(Se,"create"),xr=Bn&&new Bn,Rn={},Zf=fn(Oi),Xf=fn(Gn),Qf=fn(Ii),el=fn(Tn),tl=fn(Bn),Er=zt?zt.prototype:n,Hn=Er?Er.valueOf:n,Ds=Er?Er.toString:n;function l(e){if(be(e)&&!Q(e)&&!(e instanceof ae)){if(e instanceof ot)return e;if(ve.call(e,"__wrapped__"))return Ma(e)}return new ot(e)}var bn=function(){function e(){}return function(t){if(!Re(t))return{};if(Es)return Es(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function Ar(){}function ot(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}l.templateSettings={escape:hc,evaluate:gc,interpolate:Bo,variable:"",imports:{_:l}},l.prototype=Ar.prototype,l.prototype.constructor=l,ot.prototype=bn(Ar.prototype),ot.prototype.constructor=ot;function ae(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ze,this.__views__=[]}function nl(){var e=new ae(this.__wrapped__);return e.__actions__=Be(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Be(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Be(this.__views__),e}function rl(){if(this.__filtered__){var e=new ae(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function il(){var e=this.__wrapped__.value(),t=this.__dir__,r=Q(e),a=t<0,f=r?e.length:0,h=md(0,f,this.__views__),v=h.start,C=h.end,E=C-v,L=a?C:v-1,U=this.__iteratees__,W=U.length,q=0,J=Ue(E,this.__takeCount__);if(!r||!a&&f==E&&J==E)return na(e,this.__actions__);var $=[];e:for(;E--&&q<J;){L+=t;for(var re=-1,Y=e[L];++re<W;){var oe=U[re],ue=oe.iteratee,Ze=oe.type,We=ue(Y);if(Ze==si)Y=We;else if(!We){if(Ze==Zt)continue e;break e}}$[q++]=Y}return $}ae.prototype=bn(Ar.prototype),ae.prototype.constructor=ae;function on(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function ol(){this.__data__=qn?qn(null):{},this.size=0}function sl(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function al(e){var t=this.__data__;if(qn){var r=t[e];return r===_?n:r}return ve.call(t,e)?t[e]:n}function ul(e){var t=this.__data__;return qn?t[e]!==n:ve.call(t,e)}function cl(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=qn&&t===n?_:t,this}on.prototype.clear=ol,on.prototype.delete=sl,on.prototype.get=al,on.prototype.has=ul,on.prototype.set=cl;function At(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function fl(){this.__data__=[],this.size=0}function ll(e){var t=this.__data__,r=wr(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():Tr.call(t,r,1),--this.size,!0}function dl(e){var t=this.__data__,r=wr(t,e);return r<0?n:t[r][1]}function pl(e){return wr(this.__data__,e)>-1}function hl(e,t){var r=this.__data__,a=wr(r,e);return a<0?(++this.size,r.push([e,t])):r[a][1]=t,this}At.prototype.clear=fl,At.prototype.delete=ll,At.prototype.get=dl,At.prototype.has=pl,At.prototype.set=hl;function wt(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function gl(){this.size=0,this.__data__={hash:new on,map:new(Gn||At),string:new on}}function ml(e){var t=Br(this,e).delete(e);return this.size-=t?1:0,t}function vl(e){return Br(this,e).get(e)}function yl(e){return Br(this,e).has(e)}function Sl(e,t){var r=Br(this,e),a=r.size;return r.set(e,t),this.size+=r.size==a?0:1,this}wt.prototype.clear=gl,wt.prototype.delete=ml,wt.prototype.get=vl,wt.prototype.has=yl,wt.prototype.set=Sl;function sn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new wt;++t<r;)this.add(e[t])}function _l(e){return this.__data__.set(e,_),this}function Cl(e){return this.__data__.has(e)}sn.prototype.add=sn.prototype.push=_l,sn.prototype.has=Cl;function ht(e){var t=this.__data__=new At(e);this.size=t.size}function Tl(){this.__data__=new At,this.size=0}function Rl(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function bl(e){return this.__data__.get(e)}function Pl(e){return this.__data__.has(e)}function xl(e,t){var r=this.__data__;if(r instanceof At){var a=r.__data__;if(!Gn||a.length<u-1)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new wt(a)}return r.set(e,t),this.size=r.size,this}ht.prototype.clear=Tl,ht.prototype.delete=Rl,ht.prototype.get=bl,ht.prototype.has=Pl,ht.prototype.set=xl;function Ms(e,t){var r=Q(e),a=!r&&ln(e),f=!r&&!a&&jt(e),h=!r&&!a&&!f&&An(e),v=r||a||f||h,C=v?Pi(e.length,Ff):[],E=C.length;for(var L in e)(t||ve.call(e,L))&&!(v&&(L=="length"||f&&(L=="offset"||L=="parent")||h&&(L=="buffer"||L=="byteLength"||L=="byteOffset")||Mt(L,E)))&&C.push(L);return C}function Ls(e){var t=e.length;return t?e[qi(0,t-1)]:n}function El(e,t){return qr(Be(e),an(t,0,e.length))}function Al(e){return qr(Be(e))}function Di(e,t,r){(r!==n&&!gt(e[t],r)||r===n&&!(t in e))&&Ot(e,t,r)}function Jn(e,t,r){var a=e[t];(!(ve.call(e,t)&&gt(a,r))||r===n&&!(t in e))&&Ot(e,t,r)}function wr(e,t){for(var r=e.length;r--;)if(gt(e[r][0],t))return r;return-1}function wl(e,t,r,a){return Vt(e,function(f,h,v){t(a,f,r(f),v)}),a}function Us(e,t){return e&&Tt(t,Ie(t),e)}function Ol(e,t){return e&&Tt(t,He(t),e)}function Ot(e,t,r){t=="__proto__"&&Rr?Rr(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Mi(e,t){for(var r=-1,a=t.length,f=I(a),h=e==null;++r<a;)f[r]=h?n:ho(e,t[r]);return f}function an(e,t,r){return e===e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function st(e,t,r,a,f,h){var v,C=t&M,E=t&B,L=t&z;if(r&&(v=f?r(e,a,f,h):r(e)),v!==n)return v;if(!Re(e))return e;var U=Q(e);if(U){if(v=yd(e),!C)return Be(e,v)}else{var W=Fe(e),q=W==tn||W==Fn;if(jt(e))return oa(e,C);if(W==tt||W==lt||q&&!f){if(v=E||q?{}:ba(e),!C)return E?ad(e,Ol(v,e)):sd(e,Us(v,e))}else{if(!_e[W])return f?e:{};v=Sd(e,W,C)}}h||(h=new ht);var J=h.get(e);if(J)return J;h.set(e,v),Qa(e)?e.forEach(function(Y){v.add(st(Y,t,r,Y,e,h))}):Za(e)&&e.forEach(function(Y,oe){v.set(oe,st(Y,t,r,oe,e,h))});var $=L?E?Qi:Xi:E?He:Ie,re=U?n:$(e);return rt(re||e,function(Y,oe){re&&(oe=Y,Y=e[oe]),Jn(v,oe,st(Y,t,r,oe,e,h))}),v}function Il(e){var t=Ie(e);return function(r){return Fs(r,e,t)}}function Fs(e,t,r){var a=r.length;if(e==null)return!a;for(e=Se(e);a--;){var f=r[a],h=t[f],v=e[f];if(v===n&&!(f in e)||!h(v))return!1}return!0}function ks(e,t,r){if(typeof e!="function")throw new it(d);return Zn(function(){e.apply(n,r)},t)}function zn(e,t,r,a){var f=-1,h=dr,v=!0,C=e.length,E=[],L=t.length;if(!C)return E;r&&(t=Te(t,$e(r))),a?(h=Si,v=!1):t.length>=u&&(h=Nn,v=!1,t=new sn(t));e:for(;++f<C;){var U=e[f],W=r==null?U:r(U);if(U=a||U!==0?U:0,v&&W===W){for(var q=L;q--;)if(t[q]===W)continue e;E.push(U)}else h(t,W,a)||E.push(U)}return E}var Vt=fa(Ct),Ns=fa(Ui,!0);function Dl(e,t){var r=!0;return Vt(e,function(a,f,h){return r=!!t(a,f,h),r}),r}function Or(e,t,r){for(var a=-1,f=e.length;++a<f;){var h=e[a],v=t(h);if(v!=null&&(C===n?v===v&&!je(v):r(v,C)))var C=v,E=h}return E}function Ml(e,t,r,a){var f=e.length;for(r=ne(r),r<0&&(r=-r>f?0:f+r),a=a===n||a>f?f:ne(a),a<0&&(a+=f),a=r>a?0:tu(a);r<a;)e[r++]=t;return e}function Ws(e,t){var r=[];return Vt(e,function(a,f,h){t(a,f,h)&&r.push(a)}),r}function Me(e,t,r,a,f){var h=-1,v=e.length;for(r||(r=Cd),f||(f=[]);++h<v;){var C=e[h];t>0&&r(C)?t>1?Me(C,t-1,r,a,f):Ht(f,C):a||(f[f.length]=C)}return f}var Li=la(),Gs=la(!0);function Ct(e,t){return e&&Li(e,t,Ie)}function Ui(e,t){return e&&Gs(e,t,Ie)}function Ir(e,t){return qt(t,function(r){return Lt(e[r])})}function un(e,t){t=$t(t,e);for(var r=0,a=t.length;e!=null&&r<a;)e=e[Rt(t[r++])];return r&&r==a?e:n}function Bs(e,t,r){var a=t(e);return Q(e)?a:Ht(a,r(e))}function ke(e){return e==null?e===n?S:_t:rn&&rn in Se(e)?gd(e):Ad(e)}function Fi(e,t){return e>t}function Ll(e,t){return e!=null&&ve.call(e,t)}function Ul(e,t){return e!=null&&t in Se(e)}function Fl(e,t,r){return e>=Ue(t,r)&&e<we(t,r)}function ki(e,t,r){for(var a=r?Si:dr,f=e[0].length,h=e.length,v=h,C=I(h),E=1/0,L=[];v--;){var U=e[v];v&&t&&(U=Te(U,$e(t))),E=Ue(U.length,E),C[v]=!r&&(t||f>=120&&U.length>=120)?new sn(v&&U):n}U=e[0];var W=-1,q=C[0];e:for(;++W<f&&L.length<E;){var J=U[W],$=t?t(J):J;if(J=r||J!==0?J:0,!(q?Nn(q,$):a(L,$,r))){for(v=h;--v;){var re=C[v];if(!(re?Nn(re,$):a(e[v],$,r)))continue e}q&&q.push($),L.push(J)}}return L}function kl(e,t,r,a){return Ct(e,function(f,h,v){t(a,r(f),h,v)}),a}function Vn(e,t,r){t=$t(t,e),e=Aa(e,t);var a=e==null?e:e[Rt(ut(t))];return a==null?n:Ke(a,e,r)}function qs(e){return be(e)&&ke(e)==lt}function Nl(e){return be(e)&&ke(e)==w}function Wl(e){return be(e)&&ke(e)==en}function Kn(e,t,r,a,f){return e===t?!0:e==null||t==null||!be(e)&&!be(t)?e!==e&&t!==t:Gl(e,t,r,a,Kn,f)}function Gl(e,t,r,a,f,h){var v=Q(e),C=Q(t),E=v?Xt:Fe(e),L=C?Xt:Fe(t);E=E==lt?tt:E,L=L==lt?tt:L;var U=E==tt,W=L==tt,q=E==L;if(q&&jt(e)){if(!jt(t))return!1;v=!0,U=!1}if(q&&!U)return h||(h=new ht),v||An(e)?Ca(e,t,r,a,f,h):pd(e,t,E,r,a,f,h);if(!(r&Z)){var J=U&&ve.call(e,"__wrapped__"),$=W&&ve.call(t,"__wrapped__");if(J||$){var re=J?e.value():e,Y=$?t.value():t;return h||(h=new ht),f(re,Y,r,a,h)}}return q?(h||(h=new ht),hd(e,t,r,a,f,h)):!1}function Bl(e){return be(e)&&Fe(e)==Oe}function Ni(e,t,r,a){var f=r.length,h=f,v=!a;if(e==null)return!h;for(e=Se(e);f--;){var C=r[f];if(v&&C[2]?C[1]!==e[C[0]]:!(C[0]in e))return!1}for(;++f<h;){C=r[f];var E=C[0],L=e[E],U=C[1];if(v&&C[2]){if(L===n&&!(E in e))return!1}else{var W=new ht;if(a)var q=a(L,U,E,e,t,W);if(!(q===n?Kn(U,L,Z|ee,a,W):q))return!1}}return!0}function Hs(e){if(!Re(e)||Rd(e))return!1;var t=Lt(e)?Bf:Oc;return t.test(fn(e))}function ql(e){return be(e)&&ke(e)==Et}function Hl(e){return be(e)&&Fe(e)==Ve}function Jl(e){return be(e)&&$r(e.length)&&!!Ce[ke(e)]}function Js(e){return typeof e=="function"?e:e==null?Je:typeof e=="object"?Q(e)?Ks(e[0],e[1]):Vs(e):du(e)}function Wi(e){if(!jn(e))return Kf(e);var t=[];for(var r in Se(e))ve.call(e,r)&&r!="constructor"&&t.push(r);return t}function zl(e){if(!Re(e))return Ed(e);var t=jn(e),r=[];for(var a in e)a=="constructor"&&(t||!ve.call(e,a))||r.push(a);return r}function Gi(e,t){return e<t}function zs(e,t){var r=-1,a=qe(e)?I(e.length):[];return Vt(e,function(f,h,v){a[++r]=t(f,h,v)}),a}function Vs(e){var t=to(e);return t.length==1&&t[0][2]?xa(t[0][0],t[0][1]):function(r){return r===e||Ni(r,e,t)}}function Ks(e,t){return ro(e)&&Pa(t)?xa(Rt(e),t):function(r){var a=ho(r,e);return a===n&&a===t?go(r,e):Kn(t,a,Z|ee)}}function Dr(e,t,r,a,f){e!==t&&Li(t,function(h,v){if(f||(f=new ht),Re(h))Vl(e,t,v,r,Dr,a,f);else{var C=a?a(oo(e,v),h,v+"",e,t,f):n;C===n&&(C=h),Di(e,v,C)}},He)}function Vl(e,t,r,a,f,h,v){var C=oo(e,r),E=oo(t,r),L=v.get(E);if(L){Di(e,r,L);return}var U=h?h(C,E,r+"",e,t,v):n,W=U===n;if(W){var q=Q(E),J=!q&&jt(E),$=!q&&!J&&An(E);U=E,q||J||$?Q(C)?U=C:Pe(C)?U=Be(C):J?(W=!1,U=oa(E,!0)):$?(W=!1,U=sa(E,!0)):U=[]:Xn(E)||ln(E)?(U=C,ln(C)?U=nu(C):(!Re(C)||Lt(C))&&(U=ba(E))):W=!1}W&&(v.set(E,U),f(U,E,a,h,v),v.delete(E)),Di(e,r,U)}function $s(e,t){var r=e.length;if(r)return t+=t<0?r:0,Mt(t,r)?e[t]:n}function Ys(e,t,r){t.length?t=Te(t,function(h){return Q(h)?function(v){return un(v,h.length===1?h[0]:h)}:h}):t=[Je];var a=-1;t=Te(t,$e(K()));var f=zs(e,function(h,v,C){var E=Te(t,function(L){return L(h)});return{criteria:E,index:++a,value:h}});return Sf(f,function(h,v){return od(h,v,r)})}function Kl(e,t){return js(e,t,function(r,a){return go(e,a)})}function js(e,t,r){for(var a=-1,f=t.length,h={};++a<f;){var v=t[a],C=un(e,v);r(C,v)&&$n(h,$t(v,e),C)}return h}function $l(e){return function(t){return un(t,e)}}function Bi(e,t,r,a){var f=a?yf:vn,h=-1,v=t.length,C=e;for(e===t&&(t=Be(t)),r&&(C=Te(e,$e(r)));++h<v;)for(var E=0,L=t[h],U=r?r(L):L;(E=f(C,U,E,a))>-1;)C!==e&&Tr.call(C,E,1),Tr.call(e,E,1);return e}function Zs(e,t){for(var r=e?t.length:0,a=r-1;r--;){var f=t[r];if(r==a||f!==h){var h=f;Mt(f)?Tr.call(e,f,1):zi(e,f)}}return e}function qi(e,t){return e+Pr(Is()*(t-e+1))}function Yl(e,t,r,a){for(var f=-1,h=we(br((t-e)/(r||1)),0),v=I(h);h--;)v[a?h:++f]=e,e+=r;return v}function Hi(e,t){var r="";if(!e||t<1||t>ft)return r;do t%2&&(r+=e),t=Pr(t/2),t&&(e+=e);while(t);return r}function ie(e,t){return so(Ea(e,t,Je),e+"")}function jl(e){return Ls(wn(e))}function Zl(e,t){var r=wn(e);return qr(r,an(t,0,r.length))}function $n(e,t,r,a){if(!Re(e))return e;t=$t(t,e);for(var f=-1,h=t.length,v=h-1,C=e;C!=null&&++f<h;){var E=Rt(t[f]),L=r;if(E==="__proto__"||E==="constructor"||E==="prototype")return e;if(f!=v){var U=C[E];L=a?a(U,E,C):n,L===n&&(L=Re(U)?U:Mt(t[f+1])?[]:{})}Jn(C,E,L),C=C[E]}return e}var Xs=xr?function(e,t){return xr.set(e,t),e}:Je,Xl=Rr?function(e,t){return Rr(e,"toString",{configurable:!0,enumerable:!1,value:vo(t),writable:!0})}:Je;function Ql(e){return qr(wn(e))}function at(e,t,r){var a=-1,f=e.length;t<0&&(t=-t>f?0:f+t),r=r>f?f:r,r<0&&(r+=f),f=t>r?0:r-t>>>0,t>>>=0;for(var h=I(f);++a<f;)h[a]=e[a+t];return h}function ed(e,t){var r;return Vt(e,function(a,f,h){return r=t(a,f,h),!r}),!!r}function Mr(e,t,r){var a=0,f=e==null?a:e.length;if(typeof t=="number"&&t===t&&f<=Un){for(;a<f;){var h=a+f>>>1,v=e[h];v!==null&&!je(v)&&(r?v<=t:v<t)?a=h+1:f=h}return f}return Ji(e,t,Je,r)}function Ji(e,t,r,a){var f=0,h=e==null?0:e.length;if(h===0)return 0;t=r(t);for(var v=t!==t,C=t===null,E=je(t),L=t===n;f<h;){var U=Pr((f+h)/2),W=r(e[U]),q=W!==n,J=W===null,$=W===W,re=je(W);if(v)var Y=a||$;else L?Y=$&&(a||q):C?Y=$&&q&&(a||!J):E?Y=$&&q&&!J&&(a||!re):J||re?Y=!1:Y=a?W<=t:W<t;Y?f=U+1:h=U}return Ue(h,or)}function Qs(e,t){for(var r=-1,a=e.length,f=0,h=[];++r<a;){var v=e[r],C=t?t(v):v;if(!r||!gt(C,E)){var E=C;h[f++]=v===0?0:v}}return h}function ea(e){return typeof e=="number"?e:je(e)?Wt:+e}function Ye(e){if(typeof e=="string")return e;if(Q(e))return Te(e,Ye)+"";if(je(e))return Ds?Ds.call(e):"";var t=e+"";return t=="0"&&1/e==-xt?"-0":t}function Kt(e,t,r){var a=-1,f=dr,h=e.length,v=!0,C=[],E=C;if(r)v=!1,f=Si;else if(h>=u){var L=t?null:ld(e);if(L)return hr(L);v=!1,f=Nn,E=new sn}else E=t?[]:C;e:for(;++a<h;){var U=e[a],W=t?t(U):U;if(U=r||U!==0?U:0,v&&W===W){for(var q=E.length;q--;)if(E[q]===W)continue e;t&&E.push(W),C.push(U)}else f(E,W,r)||(E!==C&&E.push(W),C.push(U))}return C}function zi(e,t){return t=$t(t,e),e=Aa(e,t),e==null||delete e[Rt(ut(t))]}function ta(e,t,r,a){return $n(e,t,r(un(e,t)),a)}function Lr(e,t,r,a){for(var f=e.length,h=a?f:-1;(a?h--:++h<f)&&t(e[h],h,e););return r?at(e,a?0:h,a?h+1:f):at(e,a?h+1:0,a?f:h)}function na(e,t){var r=e;return r instanceof ae&&(r=r.value()),_i(t,function(a,f){return f.func.apply(f.thisArg,Ht([a],f.args))},r)}function Vi(e,t,r){var a=e.length;if(a<2)return a?Kt(e[0]):[];for(var f=-1,h=I(a);++f<a;)for(var v=e[f],C=-1;++C<a;)C!=f&&(h[f]=zn(h[f]||v,e[C],t,r));return Kt(Me(h,1),t,r)}function ra(e,t,r){for(var a=-1,f=e.length,h=t.length,v={};++a<f;){var C=a<h?t[a]:n;r(v,e[a],C)}return v}function Ki(e){return Pe(e)?e:[]}function $i(e){return typeof e=="function"?e:Je}function $t(e,t){return Q(e)?e:ro(e,t)?[e]:Da(me(e))}var td=ie;function Yt(e,t,r){var a=e.length;return r=r===n?a:r,!t&&r>=a?e:at(e,t,r)}var ia=qf||function(e){return De.clearTimeout(e)};function oa(e,t){if(t)return e.slice();var r=e.length,a=xs?xs(r):new e.constructor(r);return e.copy(a),a}function Yi(e){var t=new e.constructor(e.byteLength);return new _r(t).set(new _r(e)),t}function nd(e,t){var r=t?Yi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function rd(e){var t=new e.constructor(e.source,qo.exec(e));return t.lastIndex=e.lastIndex,t}function id(e){return Hn?Se(Hn.call(e)):{}}function sa(e,t){var r=t?Yi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function aa(e,t){if(e!==t){var r=e!==n,a=e===null,f=e===e,h=je(e),v=t!==n,C=t===null,E=t===t,L=je(t);if(!C&&!L&&!h&&e>t||h&&v&&E&&!C&&!L||a&&v&&E||!r&&E||!f)return 1;if(!a&&!h&&!L&&e<t||L&&r&&f&&!a&&!h||C&&r&&f||!v&&f||!E)return-1}return 0}function od(e,t,r){for(var a=-1,f=e.criteria,h=t.criteria,v=f.length,C=r.length;++a<v;){var E=aa(f[a],h[a]);if(E){if(a>=C)return E;var L=r[a];return E*(L=="desc"?-1:1)}}return e.index-t.index}function ua(e,t,r,a){for(var f=-1,h=e.length,v=r.length,C=-1,E=t.length,L=we(h-v,0),U=I(E+L),W=!a;++C<E;)U[C]=t[C];for(;++f<v;)(W||f<h)&&(U[r[f]]=e[f]);for(;L--;)U[C++]=e[f++];return U}function ca(e,t,r,a){for(var f=-1,h=e.length,v=-1,C=r.length,E=-1,L=t.length,U=we(h-C,0),W=I(U+L),q=!a;++f<U;)W[f]=e[f];for(var J=f;++E<L;)W[J+E]=t[E];for(;++v<C;)(q||f<h)&&(W[J+r[v]]=e[f++]);return W}function Be(e,t){var r=-1,a=e.length;for(t||(t=I(a));++r<a;)t[r]=e[r];return t}function Tt(e,t,r,a){var f=!r;r||(r={});for(var h=-1,v=t.length;++h<v;){var C=t[h],E=a?a(r[C],e[C],C,r,e):n;E===n&&(E=e[C]),f?Ot(r,C,E):Jn(r,C,E)}return r}function sd(e,t){return Tt(e,no(e),t)}function ad(e,t){return Tt(e,Ta(e),t)}function Ur(e,t){return function(r,a){var f=Q(r)?df:wl,h=t?t():{};return f(r,e,K(a,2),h)}}function Pn(e){return ie(function(t,r){var a=-1,f=r.length,h=f>1?r[f-1]:n,v=f>2?r[2]:n;for(h=e.length>3&&typeof h=="function"?(f--,h):n,v&&Ne(r[0],r[1],v)&&(h=f<3?n:h,f=1),t=Se(t);++a<f;){var C=r[a];C&&e(t,C,a,h)}return t})}function fa(e,t){return function(r,a){if(r==null)return r;if(!qe(r))return e(r,a);for(var f=r.length,h=t?f:-1,v=Se(r);(t?h--:++h<f)&&a(v[h],h,v)!==!1;);return r}}function la(e){return function(t,r,a){for(var f=-1,h=Se(t),v=a(t),C=v.length;C--;){var E=v[e?C:++f];if(r(h[E],E,h)===!1)break}return t}}function ud(e,t,r){var a=t&ye,f=Yn(e);function h(){var v=this&&this!==De&&this instanceof h?f:e;return v.apply(a?r:this,arguments)}return h}function da(e){return function(t){t=me(t);var r=yn(t)?pt(t):n,a=r?r[0]:t.charAt(0),f=r?Yt(r,1).join(""):t.slice(1);return a[e]()+f}}function xn(e){return function(t){return _i(fu(cu(t).replace(Zc,"")),e,"")}}function Yn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=bn(e.prototype),a=e.apply(r,t);return Re(a)?a:r}}function cd(e,t,r){var a=Yn(e);function f(){for(var h=arguments.length,v=I(h),C=h,E=En(f);C--;)v[C]=arguments[C];var L=h<3&&v[0]!==E&&v[h-1]!==E?[]:Jt(v,E);if(h-=L.length,h<r)return va(e,t,Fr,f.placeholder,n,v,L,n,n,r-h);var U=this&&this!==De&&this instanceof f?a:e;return Ke(U,this,v)}return f}function pa(e){return function(t,r,a){var f=Se(t);if(!qe(t)){var h=K(r,3);t=Ie(t),r=function(C){return h(f[C],C,f)}}var v=e(t,r,a);return v>-1?f[h?t[v]:v]:n}}function ha(e){return Dt(function(t){var r=t.length,a=r,f=ot.prototype.thru;for(e&&t.reverse();a--;){var h=t[a];if(typeof h!="function")throw new it(d);if(f&&!v&&Gr(h)=="wrapper")var v=new ot([],!0)}for(a=v?a:r;++a<r;){h=t[a];var C=Gr(h),E=C=="wrapper"?eo(h):n;E&&io(E[0])&&E[1]==(j|Le|ge|et)&&!E[4].length&&E[9]==1?v=v[Gr(E[0])].apply(v,E[3]):v=h.length==1&&io(h)?v[C]():v.thru(h)}return function(){var L=arguments,U=L[0];if(v&&L.length==1&&Q(U))return v.plant(U).value();for(var W=0,q=r?t[W].apply(this,L):U;++W<r;)q=t[W].call(this,q);return q}})}function Fr(e,t,r,a,f,h,v,C,E,L){var U=t&j,W=t&ye,q=t&pe,J=t&(Le|Pt),$=t&Nt,re=q?n:Yn(e);function Y(){for(var oe=arguments.length,ue=I(oe),Ze=oe;Ze--;)ue[Ze]=arguments[Ze];if(J)var We=En(Y),Xe=Cf(ue,We);if(a&&(ue=ua(ue,a,f,J)),h&&(ue=ca(ue,h,v,J)),oe-=Xe,J&&oe<L){var xe=Jt(ue,We);return va(e,t,Fr,Y.placeholder,r,ue,xe,C,E,L-oe)}var mt=W?r:this,Ft=q?mt[e]:e;return oe=ue.length,C?ue=wd(ue,C):$&&oe>1&&ue.reverse(),U&&E<oe&&(ue.length=E),this&&this!==De&&this instanceof Y&&(Ft=re||Yn(Ft)),Ft.apply(mt,ue)}return Y}function ga(e,t){return function(r,a){return kl(r,e,t(a),{})}}function kr(e,t){return function(r,a){var f;if(r===n&&a===n)return t;if(r!==n&&(f=r),a!==n){if(f===n)return a;typeof r=="string"||typeof a=="string"?(r=Ye(r),a=Ye(a)):(r=ea(r),a=ea(a)),f=e(r,a)}return f}}function ji(e){return Dt(function(t){return t=Te(t,$e(K())),ie(function(r){var a=this;return e(t,function(f){return Ke(f,a,r)})})})}function Nr(e,t){t=t===n?" ":Ye(t);var r=t.length;if(r<2)return r?Hi(t,e):t;var a=Hi(t,br(e/Sn(t)));return yn(t)?Yt(pt(a),0,e).join(""):a.slice(0,e)}function fd(e,t,r,a){var f=t&ye,h=Yn(e);function v(){for(var C=-1,E=arguments.length,L=-1,U=a.length,W=I(U+E),q=this&&this!==De&&this instanceof v?h:e;++L<U;)W[L]=a[L];for(;E--;)W[L++]=arguments[++C];return Ke(q,f?r:this,W)}return v}function ma(e){return function(t,r,a){return a&&typeof a!="number"&&Ne(t,r,a)&&(r=a=n),t=Ut(t),r===n?(r=t,t=0):r=Ut(r),a=a===n?t<r?1:-1:Ut(a),Yl(t,r,a,e)}}function Wr(e){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=ct(t),r=ct(r)),e(t,r)}}function va(e,t,r,a,f,h,v,C,E,L){var U=t&Le,W=U?v:n,q=U?n:v,J=U?h:n,$=U?n:h;t|=U?ge:V,t&=~(U?V:ge),t&yt||(t&=-4);var re=[e,t,f,J,W,$,q,C,E,L],Y=r.apply(n,re);return io(e)&&wa(Y,re),Y.placeholder=a,Oa(Y,e,t)}function Zi(e){var t=Ae[e];return function(r,a){if(r=ct(r),a=a==null?0:Ue(ne(a),292),a&&Os(r)){var f=(me(r)+"e").split("e"),h=t(f[0]+"e"+(+f[1]+a));return f=(me(h)+"e").split("e"),+(f[0]+"e"+(+f[1]-a))}return t(r)}}var ld=Tn&&1/hr(new Tn([,-0]))[1]==xt?function(e){return new Tn(e)}:_o;function ya(e){return function(t){var r=Fe(t);return r==Oe?Ei(t):r==Ve?Af(t):_f(t,e(t))}}function It(e,t,r,a,f,h,v,C){var E=t&pe;if(!E&&typeof e!="function")throw new it(d);var L=a?a.length:0;if(L||(t&=-97,a=f=n),v=v===n?v:we(ne(v),0),C=C===n?C:ne(C),L-=f?f.length:0,t&V){var U=a,W=f;a=f=n}var q=E?n:eo(e),J=[e,t,r,a,f,U,W,h,v,C];if(q&&xd(J,q),e=J[0],t=J[1],r=J[2],a=J[3],f=J[4],C=J[9]=J[9]===n?E?0:e.length:we(J[9]-L,0),!C&&t&(Le|Pt)&&(t&=-25),!t||t==ye)var $=ud(e,t,r);else t==Le||t==Pt?$=cd(e,t,C):(t==ge||t==(ye|ge))&&!f.length?$=fd(e,t,r,a):$=Fr.apply(n,J);var re=q?Xs:wa;return Oa(re($,J),e,t)}function Sa(e,t,r,a){return e===n||gt(e,Cn[r])&&!ve.call(a,r)?t:e}function _a(e,t,r,a,f,h){return Re(e)&&Re(t)&&(h.set(t,e),Dr(e,t,n,_a,h),h.delete(t)),e}function dd(e){return Xn(e)?n:e}function Ca(e,t,r,a,f,h){var v=r&Z,C=e.length,E=t.length;if(C!=E&&!(v&&E>C))return!1;var L=h.get(e),U=h.get(t);if(L&&U)return L==t&&U==e;var W=-1,q=!0,J=r&ee?new sn:n;for(h.set(e,t),h.set(t,e);++W<C;){var $=e[W],re=t[W];if(a)var Y=v?a(re,$,W,t,e,h):a($,re,W,e,t,h);if(Y!==n){if(Y)continue;q=!1;break}if(J){if(!Ci(t,function(oe,ue){if(!Nn(J,ue)&&($===oe||f($,oe,r,a,h)))return J.push(ue)})){q=!1;break}}else if(!($===re||f($,re,r,a,h))){q=!1;break}}return h.delete(e),h.delete(t),q}function pd(e,t,r,a,f,h,v){switch(r){case b:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!h(new _r(e),new _r(t)));case Qt:case en:case St:return gt(+e,+t);case Gt:return e.name==t.name&&e.message==t.message;case Et:case p:return e==t+"";case Oe:var C=Ei;case Ve:var E=a&Z;if(C||(C=hr),e.size!=t.size&&!E)return!1;var L=v.get(e);if(L)return L==t;a|=ee,v.set(e,t);var U=Ca(C(e),C(t),a,f,h,v);return v.delete(e),U;case y:if(Hn)return Hn.call(e)==Hn.call(t)}return!1}function hd(e,t,r,a,f,h){var v=r&Z,C=Xi(e),E=C.length,L=Xi(t),U=L.length;if(E!=U&&!v)return!1;for(var W=E;W--;){var q=C[W];if(!(v?q in t:ve.call(t,q)))return!1}var J=h.get(e),$=h.get(t);if(J&&$)return J==t&&$==e;var re=!0;h.set(e,t),h.set(t,e);for(var Y=v;++W<E;){q=C[W];var oe=e[q],ue=t[q];if(a)var Ze=v?a(ue,oe,q,t,e,h):a(oe,ue,q,e,t,h);if(!(Ze===n?oe===ue||f(oe,ue,r,a,h):Ze)){re=!1;break}Y||(Y=q=="constructor")}if(re&&!Y){var We=e.constructor,Xe=t.constructor;We!=Xe&&"constructor"in e&&"constructor"in t&&!(typeof We=="function"&&We instanceof We&&typeof Xe=="function"&&Xe instanceof Xe)&&(re=!1)}return h.delete(e),h.delete(t),re}function Dt(e){return so(Ea(e,n,Fa),e+"")}function Xi(e){return Bs(e,Ie,no)}function Qi(e){return Bs(e,He,Ta)}var eo=xr?function(e){return xr.get(e)}:_o;function Gr(e){for(var t=e.name+"",r=Rn[t],a=ve.call(Rn,t)?r.length:0;a--;){var f=r[a],h=f.func;if(h==null||h==e)return f.name}return t}function En(e){var t=ve.call(l,"placeholder")?l:e;return t.placeholder}function K(){var e=l.iteratee||yo;return e=e===yo?Js:e,arguments.length?e(arguments[0],arguments[1]):e}function Br(e,t){var r=e.__data__;return Td(t)?r[typeof t=="string"?"string":"hash"]:r.map}function to(e){for(var t=Ie(e),r=t.length;r--;){var a=t[r],f=e[a];t[r]=[a,f,Pa(f)]}return t}function cn(e,t){var r=Pf(e,t);return Hs(r)?r:n}function gd(e){var t=ve.call(e,rn),r=e[rn];try{e[rn]=n;var a=!0}catch{}var f=yr.call(e);return a&&(t?e[rn]=r:delete e[rn]),f}var no=wi?function(e){return e==null?[]:(e=Se(e),qt(wi(e),function(t){return As.call(e,t)}))}:Co,Ta=wi?function(e){for(var t=[];e;)Ht(t,no(e)),e=Cr(e);return t}:Co,Fe=ke;(Oi&&Fe(new Oi(new ArrayBuffer(1)))!=b||Gn&&Fe(new Gn)!=Oe||Ii&&Fe(Ii.resolve())!=kn||Tn&&Fe(new Tn)!=Ve||Bn&&Fe(new Bn)!=g)&&(Fe=function(e){var t=ke(e),r=t==tt?e.constructor:n,a=r?fn(r):"";if(a)switch(a){case Zf:return b;case Xf:return Oe;case Qf:return kn;case el:return Ve;case tl:return g}return t});function md(e,t,r){for(var a=-1,f=r.length;++a<f;){var h=r[a],v=h.size;switch(h.type){case"drop":e+=v;break;case"dropRight":t-=v;break;case"take":t=Ue(t,e+v);break;case"takeRight":e=we(e,t-v);break}}return{start:e,end:t}}function vd(e){var t=e.match(Tc);return t?t[1].split(Rc):[]}function Ra(e,t,r){t=$t(t,e);for(var a=-1,f=t.length,h=!1;++a<f;){var v=Rt(t[a]);if(!(h=e!=null&&r(e,v)))break;e=e[v]}return h||++a!=f?h:(f=e==null?0:e.length,!!f&&$r(f)&&Mt(v,f)&&(Q(e)||ln(e)))}function yd(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&ve.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function ba(e){return typeof e.constructor=="function"&&!jn(e)?bn(Cr(e)):{}}function Sd(e,t,r){var a=e.constructor;switch(t){case w:return Yi(e);case Qt:case en:return new a(+e);case b:return nd(e,r);case N:case F:case P:case O:case G:case te:case le:case dt:case k:return sa(e,r);case Oe:return new a;case St:case p:return new a(e);case Et:return rd(e);case Ve:return new a;case y:return id(e)}}function _d(e,t){var r=t.length;if(!r)return e;var a=r-1;return t[a]=(r>1?"& ":"")+t[a],t=t.join(r>2?", ":" "),e.replace(Cc,"{\n/* [wrapped with "+t+"] */\n")}function Cd(e){return Q(e)||ln(e)||!!(ws&&e&&e[ws])}function Mt(e,t){var r=typeof e;return t=t==null?ft:t,!!t&&(r=="number"||r!="symbol"&&Dc.test(e))&&e>-1&&e%1==0&&e<t}function Ne(e,t,r){if(!Re(r))return!1;var a=typeof t;return(a=="number"?qe(r)&&Mt(t,r.length):a=="string"&&t in r)?gt(r[t],e):!1}function ro(e,t){if(Q(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||je(e)?!0:vc.test(e)||!mc.test(e)||t!=null&&e in Se(t)}function Td(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function io(e){var t=Gr(e),r=l[t];if(typeof r!="function"||!(t in ae.prototype))return!1;if(e===r)return!0;var a=eo(r);return!!a&&e===a[0]}function Rd(e){return!!Ps&&Ps in e}var bd=mr?Lt:To;function jn(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Cn;return e===r}function Pa(e){return e===e&&!Re(e)}function xa(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==n||e in Se(r))}}function Pd(e){var t=Vr(e,function(a){return r.size===T&&r.clear(),a}),r=t.cache;return t}function xd(e,t){var r=e[1],a=t[1],f=r|a,h=f<(ye|pe|j),v=a==j&&r==Le||a==j&&r==et&&e[7].length<=t[8]||a==(j|et)&&t[7].length<=t[8]&&r==Le;if(!(h||v))return e;a&ye&&(e[2]=t[2],f|=r&ye?0:yt);var C=t[3];if(C){var E=e[3];e[3]=E?ua(E,C,t[4]):C,e[4]=E?Jt(e[3],R):t[4]}return C=t[5],C&&(E=e[5],e[5]=E?ca(E,C,t[6]):C,e[6]=E?Jt(e[5],R):t[6]),C=t[7],C&&(e[7]=C),a&j&&(e[8]=e[8]==null?t[8]:Ue(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=f,e}function Ed(e){var t=[];if(e!=null)for(var r in Se(e))t.push(r);return t}function Ad(e){return yr.call(e)}function Ea(e,t,r){return t=we(t===n?e.length-1:t,0),function(){for(var a=arguments,f=-1,h=we(a.length-t,0),v=I(h);++f<h;)v[f]=a[t+f];f=-1;for(var C=I(t+1);++f<t;)C[f]=a[f];return C[t]=r(v),Ke(e,this,C)}}function Aa(e,t){return t.length<2?e:un(e,at(t,0,-1))}function wd(e,t){for(var r=e.length,a=Ue(t.length,r),f=Be(e);a--;){var h=t[a];e[a]=Mt(h,r)?f[h]:n}return e}function oo(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var wa=Ia(Xs),Zn=Jf||function(e,t){return De.setTimeout(e,t)},so=Ia(Xl);function Oa(e,t,r){var a=t+"";return so(e,_d(a,Od(vd(a),r)))}function Ia(e){var t=0,r=0;return function(){var a=$f(),f=rr-(a-r);if(r=a,f>0){if(++t>=Ln)return arguments[0]}else t=0;return e.apply(n,arguments)}}function qr(e,t){var r=-1,a=e.length,f=a-1;for(t=t===n?a:t;++r<t;){var h=qi(r,f),v=e[h];e[h]=e[r],e[r]=v}return e.length=t,e}var Da=Pd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(yc,function(r,a,f,h){t.push(f?h.replace(xc,"$1"):a||r)}),t});function Rt(e){if(typeof e=="string"||je(e))return e;var t=e+"";return t=="0"&&1/e==-xt?"-0":t}function fn(e){if(e!=null){try{return vr.call(e)}catch{}try{return e+""}catch{}}return""}function Od(e,t){return rt(ui,function(r){var a="_."+r[0];t&r[1]&&!dr(e,a)&&e.push(a)}),e.sort()}function Ma(e){if(e instanceof ae)return e.clone();var t=new ot(e.__wrapped__,e.__chain__);return t.__actions__=Be(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Id(e,t,r){(r?Ne(e,t,r):t===n)?t=1:t=we(ne(t),0);var a=e==null?0:e.length;if(!a||t<1)return[];for(var f=0,h=0,v=I(br(a/t));f<a;)v[h++]=at(e,f,f+=t);return v}function Dd(e){for(var t=-1,r=e==null?0:e.length,a=0,f=[];++t<r;){var h=e[t];h&&(f[a++]=h)}return f}function Md(){var e=arguments.length;if(!e)return[];for(var t=I(e-1),r=arguments[0],a=e;a--;)t[a-1]=arguments[a];return Ht(Q(r)?Be(r):[r],Me(t,1))}var Ld=ie(function(e,t){return Pe(e)?zn(e,Me(t,1,Pe,!0)):[]}),Ud=ie(function(e,t){var r=ut(t);return Pe(r)&&(r=n),Pe(e)?zn(e,Me(t,1,Pe,!0),K(r,2)):[]}),Fd=ie(function(e,t){var r=ut(t);return Pe(r)&&(r=n),Pe(e)?zn(e,Me(t,1,Pe,!0),n,r):[]});function kd(e,t,r){var a=e==null?0:e.length;return a?(t=r||t===n?1:ne(t),at(e,t<0?0:t,a)):[]}function Nd(e,t,r){var a=e==null?0:e.length;return a?(t=r||t===n?1:ne(t),t=a-t,at(e,0,t<0?0:t)):[]}function Wd(e,t){return e&&e.length?Lr(e,K(t,3),!0,!0):[]}function Gd(e,t){return e&&e.length?Lr(e,K(t,3),!0):[]}function Bd(e,t,r,a){var f=e==null?0:e.length;return f?(r&&typeof r!="number"&&Ne(e,t,r)&&(r=0,a=f),Ml(e,t,r,a)):[]}function La(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var f=r==null?0:ne(r);return f<0&&(f=we(a+f,0)),pr(e,K(t,3),f)}function Ua(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var f=a-1;return r!==n&&(f=ne(r),f=r<0?we(a+f,0):Ue(f,a-1)),pr(e,K(t,3),f,!0)}function Fa(e){var t=e==null?0:e.length;return t?Me(e,1):[]}function qd(e){var t=e==null?0:e.length;return t?Me(e,xt):[]}function Hd(e,t){var r=e==null?0:e.length;return r?(t=t===n?1:ne(t),Me(e,t)):[]}function Jd(e){for(var t=-1,r=e==null?0:e.length,a={};++t<r;){var f=e[t];a[f[0]]=f[1]}return a}function ka(e){return e&&e.length?e[0]:n}function zd(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var f=r==null?0:ne(r);return f<0&&(f=we(a+f,0)),vn(e,t,f)}function Vd(e){var t=e==null?0:e.length;return t?at(e,0,-1):[]}var Kd=ie(function(e){var t=Te(e,Ki);return t.length&&t[0]===e[0]?ki(t):[]}),$d=ie(function(e){var t=ut(e),r=Te(e,Ki);return t===ut(r)?t=n:r.pop(),r.length&&r[0]===e[0]?ki(r,K(t,2)):[]}),Yd=ie(function(e){var t=ut(e),r=Te(e,Ki);return t=typeof t=="function"?t:n,t&&r.pop(),r.length&&r[0]===e[0]?ki(r,n,t):[]});function jd(e,t){return e==null?"":Vf.call(e,t)}function ut(e){var t=e==null?0:e.length;return t?e[t-1]:n}function Zd(e,t,r){var a=e==null?0:e.length;if(!a)return-1;var f=a;return r!==n&&(f=ne(r),f=f<0?we(a+f,0):Ue(f,a-1)),t===t?Of(e,t,f):pr(e,vs,f,!0)}function Xd(e,t){return e&&e.length?$s(e,ne(t)):n}var Qd=ie(Na);function Na(e,t){return e&&e.length&&t&&t.length?Bi(e,t):e}function ep(e,t,r){return e&&e.length&&t&&t.length?Bi(e,t,K(r,2)):e}function tp(e,t,r){return e&&e.length&&t&&t.length?Bi(e,t,n,r):e}var np=Dt(function(e,t){var r=e==null?0:e.length,a=Mi(e,t);return Zs(e,Te(t,function(f){return Mt(f,r)?+f:f}).sort(aa)),a});function rp(e,t){var r=[];if(!(e&&e.length))return r;var a=-1,f=[],h=e.length;for(t=K(t,3);++a<h;){var v=e[a];t(v,a,e)&&(r.push(v),f.push(a))}return Zs(e,f),r}function ao(e){return e==null?e:jf.call(e)}function ip(e,t,r){var a=e==null?0:e.length;return a?(r&&typeof r!="number"&&Ne(e,t,r)?(t=0,r=a):(t=t==null?0:ne(t),r=r===n?a:ne(r)),at(e,t,r)):[]}function op(e,t){return Mr(e,t)}function sp(e,t,r){return Ji(e,t,K(r,2))}function ap(e,t){var r=e==null?0:e.length;if(r){var a=Mr(e,t);if(a<r&&gt(e[a],t))return a}return-1}function up(e,t){return Mr(e,t,!0)}function cp(e,t,r){return Ji(e,t,K(r,2),!0)}function fp(e,t){var r=e==null?0:e.length;if(r){var a=Mr(e,t,!0)-1;if(gt(e[a],t))return a}return-1}function lp(e){return e&&e.length?Qs(e):[]}function dp(e,t){return e&&e.length?Qs(e,K(t,2)):[]}function pp(e){var t=e==null?0:e.length;return t?at(e,1,t):[]}function hp(e,t,r){return e&&e.length?(t=r||t===n?1:ne(t),at(e,0,t<0?0:t)):[]}function gp(e,t,r){var a=e==null?0:e.length;return a?(t=r||t===n?1:ne(t),t=a-t,at(e,t<0?0:t,a)):[]}function mp(e,t){return e&&e.length?Lr(e,K(t,3),!1,!0):[]}function vp(e,t){return e&&e.length?Lr(e,K(t,3)):[]}var yp=ie(function(e){return Kt(Me(e,1,Pe,!0))}),Sp=ie(function(e){var t=ut(e);return Pe(t)&&(t=n),Kt(Me(e,1,Pe,!0),K(t,2))}),_p=ie(function(e){var t=ut(e);return t=typeof t=="function"?t:n,Kt(Me(e,1,Pe,!0),n,t)});function Cp(e){return e&&e.length?Kt(e):[]}function Tp(e,t){return e&&e.length?Kt(e,K(t,2)):[]}function Rp(e,t){return t=typeof t=="function"?t:n,e&&e.length?Kt(e,n,t):[]}function uo(e){if(!(e&&e.length))return[];var t=0;return e=qt(e,function(r){if(Pe(r))return t=we(r.length,t),!0}),Pi(t,function(r){return Te(e,Ti(r))})}function Wa(e,t){if(!(e&&e.length))return[];var r=uo(e);return t==null?r:Te(r,function(a){return Ke(t,n,a)})}var bp=ie(function(e,t){return Pe(e)?zn(e,t):[]}),Pp=ie(function(e){return Vi(qt(e,Pe))}),xp=ie(function(e){var t=ut(e);return Pe(t)&&(t=n),Vi(qt(e,Pe),K(t,2))}),Ep=ie(function(e){var t=ut(e);return t=typeof t=="function"?t:n,Vi(qt(e,Pe),n,t)}),Ap=ie(uo);function wp(e,t){return ra(e||[],t||[],Jn)}function Op(e,t){return ra(e||[],t||[],$n)}var Ip=ie(function(e){var t=e.length,r=t>1?e[t-1]:n;return r=typeof r=="function"?(e.pop(),r):n,Wa(e,r)});function Ga(e){var t=l(e);return t.__chain__=!0,t}function Dp(e,t){return t(e),e}function Hr(e,t){return t(e)}var Mp=Dt(function(e){var t=e.length,r=t?e[0]:0,a=this.__wrapped__,f=function(h){return Mi(h,e)};return t>1||this.__actions__.length||!(a instanceof ae)||!Mt(r)?this.thru(f):(a=a.slice(r,+r+(t?1:0)),a.__actions__.push({func:Hr,args:[f],thisArg:n}),new ot(a,this.__chain__).thru(function(h){return t&&!h.length&&h.push(n),h}))});function Lp(){return Ga(this)}function Up(){return new ot(this.value(),this.__chain__)}function Fp(){this.__values__===n&&(this.__values__=eu(this.value()));var e=this.__index__>=this.__values__.length,t=e?n:this.__values__[this.__index__++];return{done:e,value:t}}function kp(){return this}function Np(e){for(var t,r=this;r instanceof Ar;){var a=Ma(r);a.__index__=0,a.__values__=n,t?f.__wrapped__=a:t=a;var f=a;r=r.__wrapped__}return f.__wrapped__=e,t}function Wp(){var e=this.__wrapped__;if(e instanceof ae){var t=e;return this.__actions__.length&&(t=new ae(this)),t=t.reverse(),t.__actions__.push({func:Hr,args:[ao],thisArg:n}),new ot(t,this.__chain__)}return this.thru(ao)}function Gp(){return na(this.__wrapped__,this.__actions__)}var Bp=Ur(function(e,t,r){ve.call(e,r)?++e[r]:Ot(e,r,1)});function qp(e,t,r){var a=Q(e)?gs:Dl;return r&&Ne(e,t,r)&&(t=n),a(e,K(t,3))}function Hp(e,t){var r=Q(e)?qt:Ws;return r(e,K(t,3))}var Jp=pa(La),zp=pa(Ua);function Vp(e,t){return Me(Jr(e,t),1)}function Kp(e,t){return Me(Jr(e,t),xt)}function $p(e,t,r){return r=r===n?1:ne(r),Me(Jr(e,t),r)}function Ba(e,t){var r=Q(e)?rt:Vt;return r(e,K(t,3))}function qa(e,t){var r=Q(e)?pf:Ns;return r(e,K(t,3))}var Yp=Ur(function(e,t,r){ve.call(e,r)?e[r].push(t):Ot(e,r,[t])});function jp(e,t,r,a){e=qe(e)?e:wn(e),r=r&&!a?ne(r):0;var f=e.length;return r<0&&(r=we(f+r,0)),Yr(e)?r<=f&&e.indexOf(t,r)>-1:!!f&&vn(e,t,r)>-1}var Zp=ie(function(e,t,r){var a=-1,f=typeof t=="function",h=qe(e)?I(e.length):[];return Vt(e,function(v){h[++a]=f?Ke(t,v,r):Vn(v,t,r)}),h}),Xp=Ur(function(e,t,r){Ot(e,r,t)});function Jr(e,t){var r=Q(e)?Te:zs;return r(e,K(t,3))}function Qp(e,t,r,a){return e==null?[]:(Q(t)||(t=t==null?[]:[t]),r=a?n:r,Q(r)||(r=r==null?[]:[r]),Ys(e,t,r))}var eh=Ur(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]});function th(e,t,r){var a=Q(e)?_i:Ss,f=arguments.length<3;return a(e,K(t,4),r,f,Vt)}function nh(e,t,r){var a=Q(e)?hf:Ss,f=arguments.length<3;return a(e,K(t,4),r,f,Ns)}function rh(e,t){var r=Q(e)?qt:Ws;return r(e,Kr(K(t,3)))}function ih(e){var t=Q(e)?Ls:jl;return t(e)}function oh(e,t,r){(r?Ne(e,t,r):t===n)?t=1:t=ne(t);var a=Q(e)?El:Zl;return a(e,t)}function sh(e){var t=Q(e)?Al:Ql;return t(e)}function ah(e){if(e==null)return 0;if(qe(e))return Yr(e)?Sn(e):e.length;var t=Fe(e);return t==Oe||t==Ve?e.size:Wi(e).length}function uh(e,t,r){var a=Q(e)?Ci:ed;return r&&Ne(e,t,r)&&(t=n),a(e,K(t,3))}var ch=ie(function(e,t){if(e==null)return[];var r=t.length;return r>1&&Ne(e,t[0],t[1])?t=[]:r>2&&Ne(t[0],t[1],t[2])&&(t=[t[0]]),Ys(e,Me(t,1),[])}),zr=Hf||function(){return De.Date.now()};function fh(e,t){if(typeof t!="function")throw new it(d);return e=ne(e),function(){if(--e<1)return t.apply(this,arguments)}}function Ha(e,t,r){return t=r?n:t,t=e&&t==null?e.length:t,It(e,j,n,n,n,n,t)}function Ja(e,t){var r;if(typeof t!="function")throw new it(d);return e=ne(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=n),r}}var co=ie(function(e,t,r){var a=ye;if(r.length){var f=Jt(r,En(co));a|=ge}return It(e,a,t,r,f)}),za=ie(function(e,t,r){var a=ye|pe;if(r.length){var f=Jt(r,En(za));a|=ge}return It(t,a,e,r,f)});function Va(e,t,r){t=r?n:t;var a=It(e,Le,n,n,n,n,n,t);return a.placeholder=Va.placeholder,a}function Ka(e,t,r){t=r?n:t;var a=It(e,Pt,n,n,n,n,n,t);return a.placeholder=Ka.placeholder,a}function $a(e,t,r){var a,f,h,v,C,E,L=0,U=!1,W=!1,q=!0;if(typeof e!="function")throw new it(d);t=ct(t)||0,Re(r)&&(U=!!r.leading,W="maxWait"in r,h=W?we(ct(r.maxWait)||0,t):h,q="trailing"in r?!!r.trailing:q);function J(xe){var mt=a,Ft=f;return a=f=n,L=xe,v=e.apply(Ft,mt),v}function $(xe){return L=xe,C=Zn(oe,t),U?J(xe):v}function re(xe){var mt=xe-E,Ft=xe-L,pu=t-mt;return W?Ue(pu,h-Ft):pu}function Y(xe){var mt=xe-E,Ft=xe-L;return E===n||mt>=t||mt<0||W&&Ft>=h}function oe(){var xe=zr();if(Y(xe))return ue(xe);C=Zn(oe,re(xe))}function ue(xe){return C=n,q&&a?J(xe):(a=f=n,v)}function Ze(){C!==n&&ia(C),L=0,a=E=f=C=n}function We(){return C===n?v:ue(zr())}function Xe(){var xe=zr(),mt=Y(xe);if(a=arguments,f=this,E=xe,mt){if(C===n)return $(E);if(W)return ia(C),C=Zn(oe,t),J(E)}return C===n&&(C=Zn(oe,t)),v}return Xe.cancel=Ze,Xe.flush=We,Xe}var lh=ie(function(e,t){return ks(e,1,t)}),dh=ie(function(e,t,r){return ks(e,ct(t)||0,r)});function ph(e){return It(e,Nt)}function Vr(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new it(d);var r=function(){var a=arguments,f=t?t.apply(this,a):a[0],h=r.cache;if(h.has(f))return h.get(f);var v=e.apply(this,a);return r.cache=h.set(f,v)||h,v};return r.cache=new(Vr.Cache||wt),r}Vr.Cache=wt;function Kr(e){if(typeof e!="function")throw new it(d);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function hh(e){return Ja(2,e)}var gh=td(function(e,t){t=t.length==1&&Q(t[0])?Te(t[0],$e(K())):Te(Me(t,1),$e(K()));var r=t.length;return ie(function(a){for(var f=-1,h=Ue(a.length,r);++f<h;)a[f]=t[f].call(this,a[f]);return Ke(e,this,a)})}),fo=ie(function(e,t){var r=Jt(t,En(fo));return It(e,ge,n,t,r)}),Ya=ie(function(e,t){var r=Jt(t,En(Ya));return It(e,V,n,t,r)}),mh=Dt(function(e,t){return It(e,et,n,n,n,t)});function vh(e,t){if(typeof e!="function")throw new it(d);return t=t===n?t:ne(t),ie(e,t)}function yh(e,t){if(typeof e!="function")throw new it(d);return t=t==null?0:we(ne(t),0),ie(function(r){var a=r[t],f=Yt(r,0,t);return a&&Ht(f,a),Ke(e,this,f)})}function Sh(e,t,r){var a=!0,f=!0;if(typeof e!="function")throw new it(d);return Re(r)&&(a="leading"in r?!!r.leading:a,f="trailing"in r?!!r.trailing:f),$a(e,t,{leading:a,maxWait:t,trailing:f})}function _h(e){return Ha(e,1)}function Ch(e,t){return fo($i(t),e)}function Th(){if(!arguments.length)return[];var e=arguments[0];return Q(e)?e:[e]}function Rh(e){return st(e,z)}function bh(e,t){return t=typeof t=="function"?t:n,st(e,z,t)}function Ph(e){return st(e,M|z)}function xh(e,t){return t=typeof t=="function"?t:n,st(e,M|z,t)}function Eh(e,t){return t==null||Fs(e,t,Ie(t))}function gt(e,t){return e===t||e!==e&&t!==t}var Ah=Wr(Fi),wh=Wr(function(e,t){return e>=t}),ln=qs(function(){return arguments}())?qs:function(e){return be(e)&&ve.call(e,"callee")&&!As.call(e,"callee")},Q=I.isArray,Oh=cs?$e(cs):Nl;function qe(e){return e!=null&&$r(e.length)&&!Lt(e)}function Pe(e){return be(e)&&qe(e)}function Ih(e){return e===!0||e===!1||be(e)&&ke(e)==Qt}var jt=zf||To,Dh=fs?$e(fs):Wl;function Mh(e){return be(e)&&e.nodeType===1&&!Xn(e)}function Lh(e){if(e==null)return!0;if(qe(e)&&(Q(e)||typeof e=="string"||typeof e.splice=="function"||jt(e)||An(e)||ln(e)))return!e.length;var t=Fe(e);if(t==Oe||t==Ve)return!e.size;if(jn(e))return!Wi(e).length;for(var r in e)if(ve.call(e,r))return!1;return!0}function Uh(e,t){return Kn(e,t)}function Fh(e,t,r){r=typeof r=="function"?r:n;var a=r?r(e,t):n;return a===n?Kn(e,t,n,r):!!a}function lo(e){if(!be(e))return!1;var t=ke(e);return t==Gt||t==sr||typeof e.message=="string"&&typeof e.name=="string"&&!Xn(e)}function kh(e){return typeof e=="number"&&Os(e)}function Lt(e){if(!Re(e))return!1;var t=ke(e);return t==tn||t==Fn||t==ci||t==ar}function ja(e){return typeof e=="number"&&e==ne(e)}function $r(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ft}function Re(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function be(e){return e!=null&&typeof e=="object"}var Za=ls?$e(ls):Bl;function Nh(e,t){return e===t||Ni(e,t,to(t))}function Wh(e,t,r){return r=typeof r=="function"?r:n,Ni(e,t,to(t),r)}function Gh(e){return Xa(e)&&e!=+e}function Bh(e){if(bd(e))throw new X(c);return Hs(e)}function qh(e){return e===null}function Hh(e){return e==null}function Xa(e){return typeof e=="number"||be(e)&&ke(e)==St}function Xn(e){if(!be(e)||ke(e)!=tt)return!1;var t=Cr(e);if(t===null)return!0;var r=ve.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&vr.call(r)==Wf}var po=ds?$e(ds):ql;function Jh(e){return ja(e)&&e>=-ft&&e<=ft}var Qa=ps?$e(ps):Hl;function Yr(e){return typeof e=="string"||!Q(e)&&be(e)&&ke(e)==p}function je(e){return typeof e=="symbol"||be(e)&&ke(e)==y}var An=hs?$e(hs):Jl;function zh(e){return e===n}function Vh(e){return be(e)&&Fe(e)==g}function Kh(e){return be(e)&&ke(e)==A}var $h=Wr(Gi),Yh=Wr(function(e,t){return e<=t});function eu(e){if(!e)return[];if(qe(e))return Yr(e)?pt(e):Be(e);if(Wn&&e[Wn])return Ef(e[Wn]());var t=Fe(e),r=t==Oe?Ei:t==Ve?hr:wn;return r(e)}function Ut(e){if(!e)return e===0?e:0;if(e=ct(e),e===xt||e===-xt){var t=e<0?-1:1;return t*ir}return e===e?e:0}function ne(e){var t=Ut(e),r=t%1;return t===t?r?t-r:t:0}function tu(e){return e?an(ne(e),0,ze):0}function ct(e){if(typeof e=="number")return e;if(je(e))return Wt;if(Re(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Re(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=_s(e);var r=wc.test(e);return r||Ic.test(e)?ff(e.slice(2),r?2:8):Ac.test(e)?Wt:+e}function nu(e){return Tt(e,He(e))}function jh(e){return e?an(ne(e),-ft,ft):e===0?e:0}function me(e){return e==null?"":Ye(e)}var Zh=Pn(function(e,t){if(jn(t)||qe(t)){Tt(t,Ie(t),e);return}for(var r in t)ve.call(t,r)&&Jn(e,r,t[r])}),ru=Pn(function(e,t){Tt(t,He(t),e)}),jr=Pn(function(e,t,r,a){Tt(t,He(t),e,a)}),Xh=Pn(function(e,t,r,a){Tt(t,Ie(t),e,a)}),Qh=Dt(Mi);function eg(e,t){var r=bn(e);return t==null?r:Us(r,t)}var tg=ie(function(e,t){e=Se(e);var r=-1,a=t.length,f=a>2?t[2]:n;for(f&&Ne(t[0],t[1],f)&&(a=1);++r<a;)for(var h=t[r],v=He(h),C=-1,E=v.length;++C<E;){var L=v[C],U=e[L];(U===n||gt(U,Cn[L])&&!ve.call(e,L))&&(e[L]=h[L])}return e}),ng=ie(function(e){return e.push(n,_a),Ke(iu,n,e)});function rg(e,t){return ms(e,K(t,3),Ct)}function ig(e,t){return ms(e,K(t,3),Ui)}function og(e,t){return e==null?e:Li(e,K(t,3),He)}function sg(e,t){return e==null?e:Gs(e,K(t,3),He)}function ag(e,t){return e&&Ct(e,K(t,3))}function ug(e,t){return e&&Ui(e,K(t,3))}function cg(e){return e==null?[]:Ir(e,Ie(e))}function fg(e){return e==null?[]:Ir(e,He(e))}function ho(e,t,r){var a=e==null?n:un(e,t);return a===n?r:a}function lg(e,t){return e!=null&&Ra(e,t,Ll)}function go(e,t){return e!=null&&Ra(e,t,Ul)}var dg=ga(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=yr.call(t)),e[t]=r},vo(Je)),pg=ga(function(e,t,r){t!=null&&typeof t.toString!="function"&&(t=yr.call(t)),ve.call(e,t)?e[t].push(r):e[t]=[r]},K),hg=ie(Vn);function Ie(e){return qe(e)?Ms(e):Wi(e)}function He(e){return qe(e)?Ms(e,!0):zl(e)}function gg(e,t){var r={};return t=K(t,3),Ct(e,function(a,f,h){Ot(r,t(a,f,h),a)}),r}function mg(e,t){var r={};return t=K(t,3),Ct(e,function(a,f,h){Ot(r,f,t(a,f,h))}),r}var vg=Pn(function(e,t,r){Dr(e,t,r)}),iu=Pn(function(e,t,r,a){Dr(e,t,r,a)}),yg=Dt(function(e,t){var r={};if(e==null)return r;var a=!1;t=Te(t,function(h){return h=$t(h,e),a||(a=h.length>1),h}),Tt(e,Qi(e),r),a&&(r=st(r,M|B|z,dd));for(var f=t.length;f--;)zi(r,t[f]);return r});function Sg(e,t){return ou(e,Kr(K(t)))}var _g=Dt(function(e,t){return e==null?{}:Kl(e,t)});function ou(e,t){if(e==null)return{};var r=Te(Qi(e),function(a){return[a]});return t=K(t),js(e,r,function(a,f){return t(a,f[0])})}function Cg(e,t,r){t=$t(t,e);var a=-1,f=t.length;for(f||(f=1,e=n);++a<f;){var h=e==null?n:e[Rt(t[a])];h===n&&(a=f,h=r),e=Lt(h)?h.call(e):h}return e}function Tg(e,t,r){return e==null?e:$n(e,t,r)}function Rg(e,t,r,a){return a=typeof a=="function"?a:n,e==null?e:$n(e,t,r,a)}var su=ya(Ie),au=ya(He);function bg(e,t,r){var a=Q(e),f=a||jt(e)||An(e);if(t=K(t,4),r==null){var h=e&&e.constructor;f?r=a?new h:[]:Re(e)?r=Lt(h)?bn(Cr(e)):{}:r={}}return(f?rt:Ct)(e,function(v,C,E){return t(r,v,C,E)}),r}function Pg(e,t){return e==null?!0:zi(e,t)}function xg(e,t,r){return e==null?e:ta(e,t,$i(r))}function Eg(e,t,r,a){return a=typeof a=="function"?a:n,e==null?e:ta(e,t,$i(r),a)}function wn(e){return e==null?[]:xi(e,Ie(e))}function Ag(e){return e==null?[]:xi(e,He(e))}function wg(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=ct(r),r=r===r?r:0),t!==n&&(t=ct(t),t=t===t?t:0),an(ct(e),t,r)}function Og(e,t,r){return t=Ut(t),r===n?(r=t,t=0):r=Ut(r),e=ct(e),Fl(e,t,r)}function Ig(e,t,r){if(r&&typeof r!="boolean"&&Ne(e,t,r)&&(t=r=n),r===n&&(typeof t=="boolean"?(r=t,t=n):typeof e=="boolean"&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=Ut(e),t===n?(t=e,e=0):t=Ut(t)),e>t){var a=e;e=t,t=a}if(r||e%1||t%1){var f=Is();return Ue(e+f*(t-e+cf("1e-"+((f+"").length-1))),t)}return qi(e,t)}var Dg=xn(function(e,t,r){return t=t.toLowerCase(),e+(r?uu(t):t)});function uu(e){return mo(me(e).toLowerCase())}function cu(e){return e=me(e),e&&e.replace(Mc,Tf).replace(Xc,"")}function Mg(e,t,r){e=me(e),t=Ye(t);var a=e.length;r=r===n?a:an(ne(r),0,a);var f=r;return r-=t.length,r>=0&&e.slice(r,f)==t}function Lg(e){return e=me(e),e&&pc.test(e)?e.replace(Go,Rf):e}function Ug(e){return e=me(e),e&&Sc.test(e)?e.replace(fi,"\\$&"):e}var Fg=xn(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),kg=xn(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),Ng=da("toLowerCase");function Wg(e,t,r){e=me(e),t=ne(t);var a=t?Sn(e):0;if(!t||a>=t)return e;var f=(t-a)/2;return Nr(Pr(f),r)+e+Nr(br(f),r)}function Gg(e,t,r){e=me(e),t=ne(t);var a=t?Sn(e):0;return t&&a<t?e+Nr(t-a,r):e}function Bg(e,t,r){e=me(e),t=ne(t);var a=t?Sn(e):0;return t&&a<t?Nr(t-a,r)+e:e}function qg(e,t,r){return r||t==null?t=0:t&&(t=+t),Yf(me(e).replace(li,""),t||0)}function Hg(e,t,r){return(r?Ne(e,t,r):t===n)?t=1:t=ne(t),Hi(me(e),t)}function Jg(){var e=arguments,t=me(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var zg=xn(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()});function Vg(e,t,r){return r&&typeof r!="number"&&Ne(e,t,r)&&(t=r=n),r=r===n?ze:r>>>0,r?(e=me(e),e&&(typeof t=="string"||t!=null&&!po(t))&&(t=Ye(t),!t&&yn(e))?Yt(pt(e),0,r):e.split(t,r)):[]}var Kg=xn(function(e,t,r){return e+(r?" ":"")+mo(t)});function $g(e,t,r){return e=me(e),r=r==null?0:an(ne(r),0,e.length),t=Ye(t),e.slice(r,r+t.length)==t}function Yg(e,t,r){var a=l.templateSettings;r&&Ne(e,t,r)&&(t=n),e=me(e),t=jr({},t,a,Sa);var f=jr({},t.imports,a.imports,Sa),h=Ie(f),v=xi(f,h),C,E,L=0,U=t.interpolate||cr,W="__p += '",q=Ai((t.escape||cr).source+"|"+U.source+"|"+(U===Bo?Ec:cr).source+"|"+(t.evaluate||cr).source+"|$","g"),J="//# sourceURL="+(ve.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++rf+"]")+"\n";e.replace(q,function(Y,oe,ue,Ze,We,Xe){return ue||(ue=Ze),W+=e.slice(L,Xe).replace(Lc,bf),oe&&(C=!0,W+="' +\n__e("+oe+") +\n'"),We&&(E=!0,W+="';\n"+We+";\n__p += '"),ue&&(W+="' +\n((__t = ("+ue+")) == null ? '' : __t) +\n'"),L=Xe+Y.length,Y}),W+="';\n";var $=ve.call(t,"variable")&&t.variable;if(!$)W="with (obj) {\n"+W+"\n}\n";else if(Pc.test($))throw new X(m);W=(E?W.replace(se,""):W).replace(Ee,"$1").replace(Bt,"$1;"),W="function("+($||"obj")+") {\n"+($?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(C?", __e = _.escape":"")+(E?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+W+"return __p\n}";var re=lu(function(){return he(h,J+"return "+W).apply(n,v)});if(re.source=W,lo(re))throw re;return re}function jg(e){return me(e).toLowerCase()}function Zg(e){return me(e).toUpperCase()}function Xg(e,t,r){if(e=me(e),e&&(r||t===n))return _s(e);if(!e||!(t=Ye(t)))return e;var a=pt(e),f=pt(t),h=Cs(a,f),v=Ts(a,f)+1;return Yt(a,h,v).join("")}function Qg(e,t,r){if(e=me(e),e&&(r||t===n))return e.slice(0,bs(e)+1);if(!e||!(t=Ye(t)))return e;var a=pt(e),f=Ts(a,pt(t))+1;return Yt(a,0,f).join("")}function em(e,t,r){if(e=me(e),e&&(r||t===n))return e.replace(li,"");if(!e||!(t=Ye(t)))return e;var a=pt(e),f=Cs(a,pt(t));return Yt(a,f).join("")}function tm(e,t){var r=Ge,a=Mn;if(Re(t)){var f="separator"in t?t.separator:f;r="length"in t?ne(t.length):r,a="omission"in t?Ye(t.omission):a}e=me(e);var h=e.length;if(yn(e)){var v=pt(e);h=v.length}if(r>=h)return e;var C=r-Sn(a);if(C<1)return a;var E=v?Yt(v,0,C).join(""):e.slice(0,C);if(f===n)return E+a;if(v&&(C+=E.length-C),po(f)){if(e.slice(C).search(f)){var L,U=E;for(f.global||(f=Ai(f.source,me(qo.exec(f))+"g")),f.lastIndex=0;L=f.exec(U);)var W=L.index;E=E.slice(0,W===n?C:W)}}else if(e.indexOf(Ye(f),C)!=C){var q=E.lastIndexOf(f);q>-1&&(E=E.slice(0,q))}return E+a}function nm(e){return e=me(e),e&&dc.test(e)?e.replace(ur,If):e}var rm=xn(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),mo=da("toUpperCase");function fu(e,t,r){return e=me(e),t=r?n:t,t===n?xf(e)?Lf(e):vf(e):e.match(t)||[]}var lu=ie(function(e,t){try{return Ke(e,n,t)}catch(r){return lo(r)?r:new X(r)}}),im=Dt(function(e,t){return rt(t,function(r){r=Rt(r),Ot(e,r,co(e[r],e))}),e});function om(e){var t=e==null?0:e.length,r=K();return e=t?Te(e,function(a){if(typeof a[1]!="function")throw new it(d);return[r(a[0]),a[1]]}):[],ie(function(a){for(var f=-1;++f<t;){var h=e[f];if(Ke(h[0],this,a))return Ke(h[1],this,a)}})}function sm(e){return Il(st(e,M))}function vo(e){return function(){return e}}function am(e,t){return e==null||e!==e?t:e}var um=ha(),cm=ha(!0);function Je(e){return e}function yo(e){return Js(typeof e=="function"?e:st(e,M))}function fm(e){return Vs(st(e,M))}function lm(e,t){return Ks(e,st(t,M))}var dm=ie(function(e,t){return function(r){return Vn(r,e,t)}}),pm=ie(function(e,t){return function(r){return Vn(e,r,t)}});function So(e,t,r){var a=Ie(t),f=Ir(t,a);r==null&&!(Re(t)&&(f.length||!a.length))&&(r=t,t=e,e=this,f=Ir(t,Ie(t)));var h=!(Re(r)&&"chain"in r)||!!r.chain,v=Lt(e);return rt(f,function(C){var E=t[C];e[C]=E,v&&(e.prototype[C]=function(){var L=this.__chain__;if(h||L){var U=e(this.__wrapped__),W=U.__actions__=Be(this.__actions__);return W.push({func:E,args:arguments,thisArg:e}),U.__chain__=L,U}return E.apply(e,Ht([this.value()],arguments))})}),e}function hm(){return De._===this&&(De._=Gf),this}function _o(){}function gm(e){return e=ne(e),ie(function(t){return $s(t,e)})}var mm=ji(Te),vm=ji(gs),ym=ji(Ci);function du(e){return ro(e)?Ti(Rt(e)):$l(e)}function Sm(e){return function(t){return e==null?n:un(e,t)}}var _m=ma(),Cm=ma(!0);function Co(){return[]}function To(){return!1}function Tm(){return{}}function Rm(){return""}function bm(){return!0}function Pm(e,t){if(e=ne(e),e<1||e>ft)return[];var r=ze,a=Ue(e,ze);t=K(t),e-=ze;for(var f=Pi(a,t);++r<e;)t(r);return f}function xm(e){return Q(e)?Te(e,Rt):je(e)?[e]:Be(Da(me(e)))}function Em(e){var t=++Nf;return me(e)+t}var Am=kr(function(e,t){return e+t},0),wm=Zi("ceil"),Om=kr(function(e,t){return e/t},1),Im=Zi("floor");function Dm(e){return e&&e.length?Or(e,Je,Fi):n}function Mm(e,t){return e&&e.length?Or(e,K(t,2),Fi):n}function Lm(e){return ys(e,Je)}function Um(e,t){return ys(e,K(t,2))}function Fm(e){return e&&e.length?Or(e,Je,Gi):n}function km(e,t){return e&&e.length?Or(e,K(t,2),Gi):n}var Nm=kr(function(e,t){return e*t},1),Wm=Zi("round"),Gm=kr(function(e,t){return e-t},0);function Bm(e){return e&&e.length?bi(e,Je):0}function qm(e,t){return e&&e.length?bi(e,K(t,2)):0}return l.after=fh,l.ary=Ha,l.assign=Zh,l.assignIn=ru,l.assignInWith=jr,l.assignWith=Xh,l.at=Qh,l.before=Ja,l.bind=co,l.bindAll=im,l.bindKey=za,l.castArray=Th,l.chain=Ga,l.chunk=Id,l.compact=Dd,l.concat=Md,l.cond=om,l.conforms=sm,l.constant=vo,l.countBy=Bp,l.create=eg,l.curry=Va,l.curryRight=Ka,l.debounce=$a,l.defaults=tg,l.defaultsDeep=ng,l.defer=lh,l.delay=dh,l.difference=Ld,l.differenceBy=Ud,l.differenceWith=Fd,l.drop=kd,l.dropRight=Nd,l.dropRightWhile=Wd,l.dropWhile=Gd,l.fill=Bd,l.filter=Hp,l.flatMap=Vp,l.flatMapDeep=Kp,l.flatMapDepth=$p,l.flatten=Fa,l.flattenDeep=qd,l.flattenDepth=Hd,l.flip=ph,l.flow=um,l.flowRight=cm,l.fromPairs=Jd,l.functions=cg,l.functionsIn=fg,l.groupBy=Yp,l.initial=Vd,l.intersection=Kd,l.intersectionBy=$d,l.intersectionWith=Yd,l.invert=dg,l.invertBy=pg,l.invokeMap=Zp,l.iteratee=yo,l.keyBy=Xp,l.keys=Ie,l.keysIn=He,l.map=Jr,l.mapKeys=gg,l.mapValues=mg,l.matches=fm,l.matchesProperty=lm,l.memoize=Vr,l.merge=vg,l.mergeWith=iu,l.method=dm,l.methodOf=pm,l.mixin=So,l.negate=Kr,l.nthArg=gm,l.omit=yg,l.omitBy=Sg,l.once=hh,l.orderBy=Qp,l.over=mm,l.overArgs=gh,l.overEvery=vm,l.overSome=ym,l.partial=fo,l.partialRight=Ya,l.partition=eh,l.pick=_g,l.pickBy=ou,l.property=du,l.propertyOf=Sm,l.pull=Qd,l.pullAll=Na,l.pullAllBy=ep,l.pullAllWith=tp,l.pullAt=np,l.range=_m,l.rangeRight=Cm,l.rearg=mh,l.reject=rh,l.remove=rp,l.rest=vh,l.reverse=ao,l.sampleSize=oh,l.set=Tg,l.setWith=Rg,l.shuffle=sh,l.slice=ip,l.sortBy=ch,l.sortedUniq=lp,l.sortedUniqBy=dp,l.split=Vg,l.spread=yh,l.tail=pp,l.take=hp,l.takeRight=gp,l.takeRightWhile=mp,l.takeWhile=vp,l.tap=Dp,l.throttle=Sh,l.thru=Hr,l.toArray=eu,l.toPairs=su,l.toPairsIn=au,l.toPath=xm,l.toPlainObject=nu,l.transform=bg,l.unary=_h,l.union=yp,l.unionBy=Sp,l.unionWith=_p,l.uniq=Cp,l.uniqBy=Tp,l.uniqWith=Rp,l.unset=Pg,l.unzip=uo,l.unzipWith=Wa,l.update=xg,l.updateWith=Eg,l.values=wn,l.valuesIn=Ag,l.without=bp,l.words=fu,l.wrap=Ch,l.xor=Pp,l.xorBy=xp,l.xorWith=Ep,l.zip=Ap,l.zipObject=wp,l.zipObjectDeep=Op,l.zipWith=Ip,l.entries=su,l.entriesIn=au,l.extend=ru,l.extendWith=jr,So(l,l),l.add=Am,l.attempt=lu,l.camelCase=Dg,l.capitalize=uu,l.ceil=wm,l.clamp=wg,l.clone=Rh,l.cloneDeep=Ph,l.cloneDeepWith=xh,l.cloneWith=bh,l.conformsTo=Eh,l.deburr=cu,l.defaultTo=am,l.divide=Om,l.endsWith=Mg,l.eq=gt,l.escape=Lg,l.escapeRegExp=Ug,l.every=qp,l.find=Jp,l.findIndex=La,l.findKey=rg,l.findLast=zp,l.findLastIndex=Ua,l.findLastKey=ig,l.floor=Im,l.forEach=Ba,l.forEachRight=qa,l.forIn=og,l.forInRight=sg,l.forOwn=ag,l.forOwnRight=ug,l.get=ho,l.gt=Ah,l.gte=wh,l.has=lg,l.hasIn=go,l.head=ka,l.identity=Je,l.includes=jp,l.indexOf=zd,l.inRange=Og,l.invoke=hg,l.isArguments=ln,l.isArray=Q,l.isArrayBuffer=Oh,l.isArrayLike=qe,l.isArrayLikeObject=Pe,l.isBoolean=Ih,l.isBuffer=jt,l.isDate=Dh,l.isElement=Mh,l.isEmpty=Lh,l.isEqual=Uh,l.isEqualWith=Fh,l.isError=lo,l.isFinite=kh,l.isFunction=Lt,l.isInteger=ja,l.isLength=$r,l.isMap=Za,l.isMatch=Nh,l.isMatchWith=Wh,l.isNaN=Gh,l.isNative=Bh,l.isNil=Hh,l.isNull=qh,l.isNumber=Xa,l.isObject=Re,l.isObjectLike=be,l.isPlainObject=Xn,l.isRegExp=po,l.isSafeInteger=Jh,l.isSet=Qa,l.isString=Yr,l.isSymbol=je,l.isTypedArray=An,l.isUndefined=zh,l.isWeakMap=Vh,l.isWeakSet=Kh,l.join=jd,l.kebabCase=Fg,l.last=ut,l.lastIndexOf=Zd,l.lowerCase=kg,l.lowerFirst=Ng,l.lt=$h,l.lte=Yh,l.max=Dm,l.maxBy=Mm,l.mean=Lm,l.meanBy=Um,l.min=Fm,l.minBy=km,l.stubArray=Co,l.stubFalse=To,l.stubObject=Tm,l.stubString=Rm,l.stubTrue=bm,l.multiply=Nm,l.nth=Xd,l.noConflict=hm,l.noop=_o,l.now=zr,l.pad=Wg,l.padEnd=Gg,l.padStart=Bg,l.parseInt=qg,l.random=Ig,l.reduce=th,l.reduceRight=nh,l.repeat=Hg,l.replace=Jg,l.result=Cg,l.round=Wm,l.runInContext=x,l.sample=ih,l.size=ah,l.snakeCase=zg,l.some=uh,l.sortedIndex=op,l.sortedIndexBy=sp,l.sortedIndexOf=ap,l.sortedLastIndex=up,l.sortedLastIndexBy=cp,l.sortedLastIndexOf=fp,l.startCase=Kg,l.startsWith=$g,l.subtract=Gm,l.sum=Bm,l.sumBy=qm,l.template=Yg,l.times=Pm,l.toFinite=Ut,l.toInteger=ne,l.toLength=tu,l.toLower=jg,l.toNumber=ct,l.toSafeInteger=jh,l.toString=me,l.toUpper=Zg,l.trim=Xg,l.trimEnd=Qg,l.trimStart=em,l.truncate=tm,l.unescape=nm,l.uniqueId=Em,l.upperCase=rm,l.upperFirst=mo,l.each=Ba,l.eachRight=qa,l.first=ka,So(l,function(){var e={};return Ct(l,function(t,r){ve.call(l.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),l.VERSION=i,rt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){l[e].placeholder=l}),rt(["drop","take"],function(e,t){ae.prototype[e]=function(r){r=r===n?1:we(ne(r),0);var a=this.__filtered__&&!t?new ae(this):this.clone();return a.__filtered__?a.__takeCount__=Ue(r,a.__takeCount__):a.__views__.push({size:Ue(r,ze),type:e+(a.__dir__<0?"Right":"")}),a},ae.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),rt(["filter","map","takeWhile"],function(e,t){var r=t+1,a=r==Zt||r==ai;ae.prototype[e]=function(f){var h=this.clone();return h.__iteratees__.push({iteratee:K(f,3),type:r}),h.__filtered__=h.__filtered__||a,h}}),rt(["head","last"],function(e,t){var r="take"+(t?"Right":"");ae.prototype[e]=function(){return this[r](1).value()[0]}}),rt(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");ae.prototype[e]=function(){return this.__filtered__?new ae(this):this[r](1)}}),ae.prototype.compact=function(){return this.filter(Je)},ae.prototype.find=function(e){return this.filter(e).head()},ae.prototype.findLast=function(e){return this.reverse().find(e)},ae.prototype.invokeMap=ie(function(e,t){return typeof e=="function"?new ae(this):this.map(function(r){return Vn(r,e,t)})}),ae.prototype.reject=function(e){return this.filter(Kr(K(e)))},ae.prototype.slice=function(e,t){e=ne(e);var r=this;return r.__filtered__&&(e>0||t<0)?new ae(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(t=ne(t),r=t<0?r.dropRight(-t):r.take(t-e)),r)},ae.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ae.prototype.toArray=function(){return this.take(ze)},Ct(ae.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),f=l[a?"take"+(t=="last"?"Right":""):t],h=a||/^find/.test(t);f&&(l.prototype[t]=function(){var v=this.__wrapped__,C=a?[1]:arguments,E=v instanceof ae,L=C[0],U=E||Q(v),W=function(oe){var ue=f.apply(l,Ht([oe],C));return a&&q?ue[0]:ue};U&&r&&typeof L=="function"&&L.length!=1&&(E=U=!1);var q=this.__chain__,J=!!this.__actions__.length,$=h&&!q,re=E&&!J;if(!h&&U){v=re?v:new ae(this);var Y=e.apply(v,C);return Y.__actions__.push({func:Hr,args:[W],thisArg:n}),new ot(Y,q)}return $&&re?e.apply(this,C):(Y=this.thru(W),$?a?Y.value()[0]:Y.value():Y)})}),rt(["pop","push","shift","sort","splice","unshift"],function(e){var t=gr[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",a=/^(?:pop|shift)$/.test(e);l.prototype[e]=function(){var f=arguments;if(a&&!this.__chain__){var h=this.value();return t.apply(Q(h)?h:[],f)}return this[r](function(v){return t.apply(Q(v)?v:[],f)})}}),Ct(ae.prototype,function(e,t){var r=l[t];if(r){var a=r.name+"";ve.call(Rn,a)||(Rn[a]=[]),Rn[a].push({name:t,func:r})}}),Rn[Fr(n,pe).name]=[{name:"wrapper",func:n}],ae.prototype.clone=nl,ae.prototype.reverse=rl,ae.prototype.value=il,l.prototype.at=Mp,l.prototype.chain=Lp,l.prototype.commit=Up,l.prototype.next=Fp,l.prototype.plant=Np,l.prototype.reverse=Wp,l.prototype.toJSON=l.prototype.valueOf=l.prototype.value=Gp,l.prototype.first=l.prototype.head,Wn&&(l.prototype[Wn]=kp),l},_n=Uf();nn?((nn.exports=_n)._=_n,vi._=_n):De._=_n}).call(Tv)}(er,er.exports)),er.exports}var bv=Rv(),pn=No(bv),Pv=function(){function o(s){this.instance=s}return o.prototype.getServer=function(){return this.instance.getServer()},o.prototype.isConnected=function(){return this.instance.isConnected()},o.prototype.getSessionId=function(){return this.instance.getSessionId()},o.prototype.getObservableControllers=function(s){var n=de({},s),i={onRecordingDataController:new dn,onStatReportsController:new dn,onMessageController:new dn,onLocalTrackController:new bt(null),onRemoteTrackController:new dn,onDataController:new bt(null),onErrorController:new bt(null),onMediaStateController:new bt(null),onIceStateController:new bt(null),onSlowLinkController:new bt(null),onWebRTCStateController:new bt(null),onCleanupController:new bt(null),onDataOpenController:new bt(null),onDetachedController:new bt(null)};return n.onmessage=function(u,c){i.onMessageController.next({message:u,jsep:c})},n.onlocaltrack=function(u,c){i.onLocalTrackController.next({on:c,track:u})},n.onremotetrack=function(u,c,d){i.onRemoteTrackController.next({on:d,track:u,mid:c})},n.ondata=function(u){i.onDataController.next(u)},n.error=function(u){i.onErrorController.next(u)},n.mediaState=function(u,c,d){i.onMediaStateController.next({medium:u,recieving:c,mid:d})},n.slowLink=function(u,c,d){i.onSlowLinkController.next({uplink:u,lost:c,mid:d})},n.webrtcState=function(u){i.onWebRTCStateController.next(u)},n.iceState=function(u){i.onIceStateController.next(u)},n.ondataopen=function(){i.onDataOpenController.next()},n.ondetached=function(){i.onDetachedController.next()},n.oncleanup=function(){i.onCleanupController.next()},{finalOptions:n,controllers:i}},o.prototype.cast=function(s){return s},o.prototype.attach=function(s,n){var i=this,u=de(de({},n),{plugin:s.identifier}),c=this.getObservableControllers(u),d=c.controllers,m=c.finalOptions;return new Promise(function(_,T){m.success=function(R){var M=new s(i.instance,i,R,d);pn.assign(M,pn.omit(R,["data","send","createAnswer","createOffer"])),_(M)},m.error=function(R){T(R)},i.instance.attach(m)})},o.prototype.reconnect=function(){return ce(this,void 0,void 0,function(){var s=this;return fe(this,function(n){return[2,new Promise(function(i,u){s.instance.reconnect({success:function(){i(!0)},error:function(c){u(c)}})})]})})},o.prototype.getInfo=function(){return ce(this,void 0,void 0,function(){var s=this;return fe(this,function(n){return[2,new Promise(function(i,u){s.instance.getInfo({success:function(c){i(c)},error:function(c){u(c)}})})]})})},o.prototype.destroy=function(s){return ce(this,void 0,void 0,function(){var n=this;return fe(this,function(i){return[2,new Promise(function(u,c){n.instance.destroy(de(de({},s),{success:function(){u()},error:function(d){c(d)}}))})]})})},o}(),ko=function(){function o(s){this.statsQueryInterval=0,console.log("JanusJs loaded"),this.options=s}return o.isWebrtcSupported=function(){return Qe.isWebrtcSupported()},o.debug=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];Qe.debug(s)},o.log=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];Qe.log(s)},o.warn=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];Qe.warn(s)},o.error=function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];Qe.error(s)},o.randomString=function(s){return Qe.randomString(s)},o.attachMediaStream=function(s,n){Qe.attachMediaStream(s,n)},o.reattachMediaStream=function(s,n){Qe.reattachMediaStream(s,n)},o.stopAllTracks=function(s){Qe.stopAllTracks(s)},o.prototype.init=function(){return ce(this,arguments,void 0,function(s){return s===void 0&&(s={debug:"all",dependencies:Qe.useDefaultDependencies({adapter:Tu})}),fe(this,function(n){switch(n.label){case 0:return s.dependencies||(s.dependencies=Qe.useDefaultDependencies({adapter:Tu})),[4,new Promise(function(i,u){Qe.init(de(de({},s),{callback:function(){i()}}))})];case 1:return n.sent(),[2]}})})},o.mix=function(s,n){var i=s.createMediaStreamDestination();return n.forEach(function(u){i.context.createMediaStreamSource(u).connect(i)}),i.stream.getTracks()[0]},o.playMediaStream=function(s){window.AudioContext=window.AudioContext||window.webkitAudioContext;try{var n=new window.AudioContext,i=new Audio;i.srcObject=s;var u=n.createMediaStreamSource(i.srcObject);return u.connect(n.destination),n}catch(c){throw o.error("failed to play media stream",c),c}},o.createRecording=function(s){var n=[];if(pn.each(s.mediaStreams,function(T){T!=null&&T.getTracks&&pn.each(T.getTracks(),function(R){n.push(new MediaStream([R]))})}),n.length!=0){var i=new AudioContext,u=this.mix(i,n),c=new MediaStream([u]),d=new MediaRecorder(c),m=new dn,_=0;return d.ondataavailable=function(T){_++,m.next({blob:T.data,chunkNumber:_})},d.onstop=function(T){m.next({blob:null,chunkNumber:_})},d.start(s.timeSlice),{mediaRecorder:d,controller:m}}},o.prototype.createSession=function(){return ce(this,void 0,void 0,function(){var s=this;return fe(this,function(n){switch(n.label){case 0:return this.options.destroyed=function(){s.onDestroyed&&s.onDestroyed()},this.options.error=function(i){s.onError&&s.onError(i)},[4,new Promise(function(i,u){s.options.success=function(){i()},s.options.error=function(c){u(c)},s.instance=new Qe(de({},s.options))})];case 1:return n.sent(),[2,new Pv(this.instance)]}})})},o}(),In=function(){function o(s,n,i,u){this.recording=!1,this.statsQueryInterval=0,this.instance=s,this.session=n,this.controllers=u,this.handle=i,this.statsReportHookTimer=this.handleStatsHook(this.handle,u,null),this.recording&&(console.info("recording enabled"),this.handleRecordingSetup(u))}return o.prototype.promisify=function(s){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return ce(this,void 0,void 0,function(){var u;return fe(this,function(c){return u=pn.first(n),pn.isPlainObject(u)?[2,new Promise(function(d,m){s(de(de({},pn.omit(u,["success","error"])),{success:function(_){d(_)},error:function(_){m(_)}}))})]:[2,new Promise(function(d,m){s.apply(void 0,tr(tr([],n,!1),[function(_){d(_)}],!1))})]})})},o.prototype.replaceTracks=function(s){return ce(this,void 0,void 0,function(){return fe(this,function(n){return[2,this.promisify(this.handle.replaceTracks,de({},s))]})})},o.prototype.getVolume=function(s){return this.promisify(this.handle.getVolume,s)},o.prototype.getRemoteVolume=function(s){return this.promisify(this.handle.getRemoteVolume,s)},o.prototype.getLocalVolume=function(s){return this.promisify(this.handle.getLocalVolume,s)},o.prototype.isAudioMuted=function(){throw new Error("Method not implemented.")},o.prototype.muteAudio=function(){throw new Error("Method not implemented.")},o.prototype.unmuteAudio=function(){throw new Error("Method not implemented.")},o.prototype.isVideoMuted=function(){throw new Error("Method not implemented.")},o.prototype.muteVideo=function(){throw new Error("Method not implemented.")},o.prototype.unmuteVideo=function(){throw new Error("Method not implemented.")},o.prototype.getBitrate=function(){throw new Error("Method not implemented.")},o.prototype.setMaxBitrate=function(s){throw new Error("Method not implemented.")},o.prototype.getLocalTracks=function(){throw new Error("Method not implemented.")},o.prototype.getRemoteTracks=function(){throw new Error("Method not implemented.")},o.prototype.handleRecordingSetup=function(s){var n=this,i;this.onMessage.subscribe(function(u){var c,d,m=u.message,_=m==null?void 0:m.result;if((_==null?void 0:_.event)==="accepted"||(_==null?void 0:_.event)==="progress"){if(!i){if(!n.webrtcStuff.remoteStream||!n.webrtcStuff.myStream)return;console.info("recording initiated"),i=ko.createRecording({mediaStreams:[n.webrtcStuff.myStream,n.webrtcStuff.remoteStream],timeSlice:n.recordingTimeSlice})}i&&(n.mediaRecorder=i.mediaRecorder,i.controller.subscribe(function(T){s.onRecordingDataController.next(T)}))}(_==null?void 0:_.event)==="hangup"&&((c=n.mediaRecorder)===null||c===void 0?void 0:c.state)!=="inactive"&&((d=n.mediaRecorder)===null||d===void 0||d.stop())})},o.prototype.sendTrickle=function(){return ce(this,void 0,void 0,function(){return fe(this,function(s){return[2]})})},o.prototype.handleStatsHook=function(s,n,i){var u=this;return setInterval(function(){return ce(u,void 0,void 0,function(){var c,d;return fe(this,function(m){switch(m.label){case 0:return s.webrtcStuff.pc?(c=[],[4,s.webrtcStuff.pc.getStats()]):[2];case 1:return d=m.sent(),d.forEach(function(_){c.push.apply(c,_)}),n.onStatReportsController.next(c),[2]}})})},this.statsQueryInterval)},Object.defineProperty(o.prototype,"recorder",{get:function(){return this.mediaRecorder},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onRecordingData",{get:function(){return this.controllers.onRecordingDataController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onStatReports",{get:function(){return this.controllers.onStatReportsController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onMessage",{get:function(){return this.controllers.onMessageController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onLocalTrack",{get:function(){return this.controllers.onLocalTrackController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onData",{get:function(){return this.controllers.onDataController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onError",{get:function(){return this.controllers.onErrorController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onRemoteTrack",{get:function(){return this.controllers.onRemoteTrackController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onMediaState",{get:function(){return this.controllers.onMediaStateController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onSlowLink",{get:function(){return this.controllers.onSlowLinkController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onWebRTCState",{get:function(){return this.controllers.onWebRTCStateController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onIceState",{get:function(){return this.controllers.onIceStateController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onDataOpen",{get:function(){return this.controllers.onDataOpenController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onDetached",{get:function(){return this.controllers.onDetachedController.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"onCleanup",{get:function(){return this.controllers.onCleanupController.asObservable()},enumerable:!1,configurable:!0}),o.prototype.getId=function(){throw new Error("Method not implemented.")},o.prototype.getPlugin=function(){throw new Error("Method not implemented.")},o.prototype.send=function(s){return ce(this,void 0,void 0,function(){var n=this;return fe(this,function(i){return[2,new Promise(function(u,c){n.handle.send(de(de({},s),{success:function(d){u(d)},error:function(d){c(d)}}))})]})})},o.prototype.createOffer=function(s){var n=this;return new Promise(function(i,u){n.handle.createOffer(de(de({},s),{success:function(c){i(c)},error:function(c){u(c)}}))})},o.prototype.createAnswer=function(s){var n=this;return new Promise(function(i,u){n.handle.createAnswer(de(de({},s),{success:function(c){i(c)},error:function(c){u(c)}}))})},o.prototype.data=function(s){var n=this;return new Promise(function(i,u){n.handle.data(de(de({},s),{success:function(){i()},error:function(c){u(c)}}))})},o.prototype.handleRemoteJsep=function(s){throw new Error("Method not implemented.")},o.prototype.dtmf=function(s){throw new Error("Method not implemented.")},o.prototype.hangup=function(s){throw new Error("Method not implemented.")},o.prototype.detach=function(s){var n=this;return new Promise(function(i,u){n.handle.detach(de(de({},s),{success:function(){i()},error:function(c){u(c)}}))})},o.prototype.stopCollectingStats=function(){clearInterval(this.statsReportHookTimer)},o.identifier=null,o}(),Dn=function(){function o(){}return o.VIDEO_ROOM="janus.plugin.videoroom",o.VIDEO_CALL="janus.plugin.videocall",o.AUDIO_BRIDGE="janus.plugin.audiobridge",o.SIP="janus.plugin.sip",o.STREAMING="janus.plugin.streaming",o.ECHO_TEST="janus.plugin.echotest",o}();(function(o){vt(s,o);function s(n,i,u,c){return o.call(this,n,i,u,c)||this}return s.prototype.createRoom=function(){return ce(this,arguments,void 0,function(n){var i;return n===void 0&&(n={}),fe(this,function(u){return i=de({request:"create"},n),[2,this.send({message:i})]})})},s.prototype.joinRoomAsPublisher=function(n,i){var u=de({request:"join",room:n,ptype:"publisher"},i);return this.send({message:u})},s.prototype.listParticipants=function(n){return ce(this,void 0,void 0,function(){var i;return fe(this,function(u){return i={request:"listparticipants",room:n},[2,this.send({message:i})]})})},s.prototype.joinRoomAsSubscriber=function(n,i){return ce(this,void 0,void 0,function(){var u;return fe(this,function(c){return u=de({request:"join",ptype:"subscriber",room:n},i),[2,this.send({message:u})]})})},s.prototype.startAsSubscriber=function(n){return ce(this,void 0,void 0,function(){var i;return fe(this,function(u){return i={request:"start"},[2,this.send({message:i,jsep:n})]})})},s.prototype.publishAsPublisher=function(n,i){return ce(this,void 0,void 0,function(){var u;return fe(this,function(c){return u=de({request:"publish"},i),[2,this.send({message:u,jsep:n})]})})},s.prototype.unpublishAsPublisher=function(){return ce(this,void 0,void 0,function(){var n;return fe(this,function(i){return n={request:"unpublish"},[2,this.send({message:n})]})})},s.prototype.updateAsSubscriber=function(n){return ce(this,arguments,void 0,function(i){var u,c=i.subscribe,d=i.unsubscribe;return fe(this,function(m){return u={request:"update",subscribe:c,unsubscribe:d},[2,this.send({message:u})]})})},s.prototype.leave=function(){return ce(this,void 0,void 0,function(){var n;return fe(this,function(i){return n={request:"leave"},[2,this.send({message:n})]})})},s.identifier=Dn.VIDEO_ROOM,s})(In);(function(o){vt(s,o);function s(n,i,u,c){return o.call(this,n,i,u,c)||this}return s.prototype.register=function(n){return ce(this,void 0,void 0,function(){return fe(this,function(i){switch(i.label){case 0:return[4,this.send({message:{request:"register",username:n}})];case 1:return i.sent(),[2]}})})},s.prototype.call=function(n){return ce(this,arguments,void 0,function(i,u){return u===void 0&&(u=null),fe(this,function(c){switch(c.label){case 0:return u!==null?[3,2]:[4,this.createOffer({media:{videoSend:!0,videoRecv:!0,audioSend:!0,audioRecv:!0}})];case 1:u=c.sent(),c.label=2;case 2:return[4,this.send({message:{request:"call",username:i},jsep:u})];case 3:return c.sent(),[2]}})})},s.identifier=Dn.VIDEO_CALL,s})(In);var xv=function(o){vt(s,o);function s(n,i,u,c){return o.call(this,n,i,u,c)||this}return s.prototype.list=function(){return ce(this,void 0,void 0,function(){return fe(this,function(n){return[2,this.send({message:{request:"list"}})]})})},s.prototype.info=function(n){return ce(this,arguments,void 0,function(i,u){return u===void 0&&(u=void 0),fe(this,function(c){return[2,this.send({message:{request:"info",id:i,secret:u}})]})})},s.identifier=Dn.STREAMING,s}(In);(function(o){vt(s,o);function s(n,i,u,c){return o.call(this,n,i,u,c)||this}return s.prototype.register=function(n,i,u){return ce(this,void 0,void 0,function(){var c;return fe(this,function(d){switch(d.label){case 0:return c=de({request:"register",username:"sip:".concat(n,"@").concat(i)},u),c.proxy="sip:".concat(i),[4,this.send({message:c})];case 1:return d.sent(),[2]}})})},s.prototype.call=function(n,i,u){return ce(this,void 0,void 0,function(){var c;return fe(this,function(d){switch(d.label){case 0:return u?[3,2]:[4,this.createOffer({media:{audioRecv:!0,audioSend:!0,videoRecv:!1,videoSend:!1}})];case 1:u=d.sent(),d.label=2;case 2:return c=de({request:"call",uri:n},i),[4,this.send({message:c,jsep:u})];case 3:return d.sent(),[2]}})})},s.prototype.update=function(n){return ce(this,void 0,void 0,function(){var i;return fe(this,function(u){switch(u.label){case 0:return n?[3,2]:[4,this.createOffer({media:{audioRecv:!0,audioSend:!0,videoRecv:!1,videoSend:!1}})];case 1:n=u.sent(),u.label=2;case 2:return i={request:"update"},[4,this.send({message:i,jsep:n})];case 3:return u.sent(),[2]}})})},s.prototype.decline=function(n,i){return ce(this,void 0,void 0,function(){var u;return fe(this,function(c){switch(c.label){case 0:return u={request:"decline",code:n,headers:i},[4,this.send({message:u})];case 1:return c.sent(),[2]}})})},s.prototype.accept=function(n){return ce(this,void 0,void 0,function(){var i;return fe(this,function(u){switch(u.label){case 0:return i=de({request:"accept"},n),[4,this.send({message:i})];case 1:return u.sent(),[2]}})})},s.prototype.hold=function(n){return ce(this,void 0,void 0,function(){var i;return fe(this,function(u){switch(u.label){case 0:return i={request:"hold",direction:n},[4,this.send({message:i})];case 1:return u.sent(),[2]}})})},s.prototype.unhold=function(){return ce(this,void 0,void 0,function(){var n;return fe(this,function(i){switch(i.label){case 0:return n={request:"unhold"},[4,this.send({message:n})];case 1:return i.sent(),[2]}})})},s.prototype.record=function(n){return ce(this,arguments,void 0,function(i,u){var c;return u===void 0&&(u={peer_audio:!0,peer_video:!1,audio:!0,video:!1,filename:"recording_"+new Date().toDateString()}),fe(this,function(d){switch(d.label){case 0:return c=de({request:"recording",action:i},u),[4,this.send({message:c})];case 1:return d.sent(),[2]}})})},s.identifier=Dn.SIP,s})(In);(function(o){vt(s,o);function s(n,i,u,c){return o.call(this,n,i,u,c)||this}return s.prototype.createRoom=function(n,i){return ce(this,void 0,void 0,function(){var u;return fe(this,function(c){return u=de({request:"create",room:n},i),[2,this.send({message:u})]})})},s.prototype.editRoom=function(n,i){return ce(this,void 0,void 0,function(){var u;return fe(this,function(c){return u=de({request:"edit",room:n},i),[2,this.send({message:u})]})})},s.prototype.joinRoom=function(n){return ce(this,arguments,void 0,function(i,u){var c,d=u===void 0?{}:u,m=d.id,_=d.group,T=d.pin,R=d.display,M=d.token,B=d.muted,z=d.codec,Z=d.preBuffer,ee=d.bitrate,ye=d.quality,pe=d.expectedLoss,yt=d.volume,Le=d.spatialPosition,Pt=d.secret,ge=d.audioLevelAverage,V=d.audioActivePackets,j=d.record,et=d.filename;return fe(this,function(Nt){return c={request:"join",room:i,id:m,group:_,pin:T,display:R,token:M,muted:B,codec:z,prebuffer:Z,bitrate:ee,quality:ye,expected_loss:pe,volume:yt,spatial_position:Le,secret:Pt,audio_level_average:ge,audio_active_packets:V,record:j,filename:et},[2,this.send({message:c})]})})},s.prototype.configure=function(n){return ce(this,arguments,void 0,function(i){var u,c=i.muted,d=i.offer,m=i.display,_=i.preBuffer,T=i.bitrate,R=i.quality,M=i.expectedLoss,B=i.volume,z=i.spatialPosition,Z=i.record,ee=i.filename,ye=i.group;return fe(this,function(pe){return u={request:"configure",muted:c,display:m,prebuffer:_,bitrate:T,quality:R,expected_loss:M,volume:B,spatial_position:z,record:Z,filename:ee,group:ye},[2,this.send({message:u,jsep:d})]})})},s.identifier=Dn.AUDIO_BRIDGE,s})(In);(function(o){vt(s,o);function s(n,i,u,c){return o.call(this,n,i,u,c)||this}return s.prototype.boomCall=function(){},s.identifier=Dn.ECHO_TEST,s})(In);var Ev=Object.defineProperty,Av=Object.getOwnPropertyDescriptor,nr=(o,s,n,i)=>{for(var u=i>1?void 0:i?Av(s,n):s,c=o.length-1,d;c>=0;c--)(d=o[c])&&(u=(i?d(s,n,u):d(u))||u);return i&&u&&Ev(s,n,u),u};let hn=class extends Hm(Jm,zm){constructor(){super(...arguments),this.janusClient=null,this.session=null,this.handle=null,this.useStun=!1,this.aspectRatio=null,this.status="connecting"}get url(){var i;const s=this.camSettings.stream_url;let n=new URL(s,this.printerUrl===null?this.hostUrl.toString():this.printerUrl);if(n.port="8188",n.protocol=(i=this.printerUrl)!=null&&i.startsWith("https")?"wss":"ws",s.startsWith("ws")||s.startsWith("http")){n=new URL(s);const u=n.pathname.split("/");n.pathname=u.slice(0,u.length-1).join("/")}return n}get wrapperStyle(){return this.getWrapperStyle(this.aspectRatio,this.camSettings.rotation)}get streamId(){const s=new URL(this.camSettings.stream_url).pathname.split("/");return s[s.length-1]}get webcamStyle(){var s,n,i,u;return{transform:this.generateTransform((s=this.camSettings.flip_horizontal)!=null?s:!1,(n=this.camSettings.flip_vertical)!=null?n:!1,(i=this.camSettings.rotation)!=null?i:0,(u=this.aspectRatio)!=null?u:1)}}get streamConfig(){const s={server:this.url.toString()};return this.useStun&&(s.iceServers=[{urls:["stun:stun.l.google.com:19302"]}]),s}async startStream(){var n,i;this.janusClient=new ko(this.streamConfig),await this.janusClient.init({debug:!1}),this.session=await this.janusClient.createSession(),this.handle=await this.session.attach(xv,{}),(n=this.handle)==null||n.onMessage.subscribe(async({message:u,jsep:c})=>{var d,m,_;if((d=u==null?void 0:u.result)!=null&&d.status&&(this.status=u.result.status),c){const T=await((m=this.handle)==null?void 0:m.createAnswer({jsep:c}));(_=this.handle)==null||_.send({message:{request:"start"},jsep:T})}});const s=new MediaStream;ko.attachMediaStream(this.stream,s),(i=this.handle)==null||i.onRemoteTrack.subscribe(({on:u,track:c})=>{u?s.addTrack(c):s.removeTrack(c)}),this.handle.onIceState.subscribe(u=>{}),this.handle.onError.subscribe(u=>{this.status="errored: ".concat(JSON.stringify(u))}),await this.handle.send({message:{request:"watch",id:parseInt(this.streamId)}})}mounted(){this.startStream()}onLoadedMetadata(){this.aspectRatio=this.updateAspectRatioFromVideo(this.stream)}beforeDestroy(){var s;(s=this.session)==null||s.destroy({})}async changedUrl(){var s;await((s=this.session)==null?void 0:s.destroy({})),await this.startStream()}};nr([wu({required:!0})],hn.prototype,"camSettings",2);nr([wu({default:null})],hn.prototype,"printerUrl",2);nr([Vm()],hn.prototype,"stream",2);nr([Km("url")],hn.prototype,"changedUrl",1);hn=nr([$m],hn);var wv=function(){var s=this,n=s._self._c;return s._self._setupProxy,n("div",{staticClass:"webcamBackground",style:s.wrapperStyle},[n("video",{directives:[{name:"show",rawName:"v-show",value:s.status==="started",expression:"status === 'started'"}],ref:"stream",staticClass:"webcamImage",style:s.webcamStyle,attrs:{autoplay:"",muted:"",playsinline:""},domProps:{muted:!0},on:{loadedmetadata:s.onLoadedMetadata}}),s.status!=="started"?n(jm,[n(Zm,{staticClass:"_webcam_webrtc_output text-center d-flex flex-column justify-center align-center"},[s.status==="connecting"?n(Xm,{staticClass:"mb-3",attrs:{indeterminate:"",color:"primary"}}):s._e(),n("span",{staticClass:"mt-3"},[s._v(s._s(s.status))])],1)],1):s._e()],1)},Ov=[],Iv=Ym(hn,wv,Ov,!1,null,"7648f7b7");const Nv=Iv.exports;export{Nv as default};
